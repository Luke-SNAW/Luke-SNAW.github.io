<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Things You Should Know About Databases</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Things You Should Know About Databases"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/4yc7ze5ur5zu4cr1nardho0/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="7/5/2022"/><meta property="article:modified_time" content="7/5/2022"/><link rel="canonical" href="https://luke-snaw.github.io//notes/4yc7ze5ur5zu4cr1nardho0/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="things-you-should-know-about-databases">Things You Should Know About Databases<a aria-hidden="true" class="anchor-heading icon-link" href="#things-you-should-know-about-databases"></a></h1>
<blockquote>
<p><a href="https://architecturenotes.co/things-you-should-know-about-databases/">https://architecturenotes.co/things-you-should-know-about-databases/</a><br>
<a href="https://news.ycombinator.com/item?id=31895623">https://news.ycombinator.com/item?id=31895623</a></p>
</blockquote>
<p>It is often surprising how little is known about how databases operate at a surface level, considering they store almost all of the states in our applications. Yet, it's foundational to the overall success of most systems. So today, I will explain the two most important topics when working with RDBMSs indexes and transactions.</p>
<p>So, without fully getting into the weeds on database-specific quirks, I will cover everything you <em>should</em> understand about RDBMS indexes. I will touch briefly on transactions and isolation levels and how they can impact your reasoning about specific transactions.</p>
<p><img src="https://architecturenotes.co/content/images/2022/07/Databases-01-1.jpg" alt="Things you should know about databases"></p>
<p>Things you should know about databases</p>
<h4 id="what-is-an-rdbms">What is an RDBMS?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-an-rdbms"></a></h4>
<p>A relational database is a digital database based on the relational data model, as proposed by E. F. Codd in 1970. A <strong>relational database management system</strong> (RDBMS) is used to maintain relational databases. Many relational database systems have an option of using the SQL (Structured Query Language) for querying and maintaining the database. Examples include MySQL and PostgreSQL.</p>
<h2 id="what-is-an-index">What is an index?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-an-index"></a></h2>
<p>Indexes are a data structure that helps decrease the look-up time of requested data. Indexes achieve this with the additional costs of storage, memory, and keeping it up to date (slower writes), which allows us to skip the tedious task of checking every table row.</p>
<p>Like an index in the back of a textbook, it helps you get to the right page. I am not a great fan of the book analogy, it quickly falls apart as we dig deeper into database indexes, but it is an excellent way to introduce the topic.</p>
<h3 id="why-do-we-need-indexes">Why do we need indexes?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-do-we-need-indexes"></a></h3>
<p>Small amounts of data are manageable but, (think of an attendance list for a small class) when they get larger (think birth registry for a large city) less so. Everything that used to be quick gets slower, too slow.</p>
<p>Think about how your strategy would change if you had to find something on 1 page vs. thousand pages of names. No, <strong>seriously</strong>, take a second and think.</p>
<p>Some database has implemented almost all the good strategies you can come up with at some point. As they grow, systems collect and store more data, eventually leading to the problem above.</p>
<p>We need indexes to help us get the relevant data we need as quickly as possible.</p>
<h3 id="how-do-indexes-work">How do indexes work?<a aria-hidden="true" class="anchor-heading icon-link" href="#how-do-indexes-work"></a></h3>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-01-3.jpg" alt="Read performance increases as you index the data, but that comes at the cost of write performance since you need to keep index up to date."></p>
<p>Read performance increases as you index the data, but that comes at the cost of write performance since you need to keep index up to date.</p>
<p>So one of the solutions question that is often posed above is to store this data logically on how you would search it. Meaning if you want to search the list by name you would sort the list by first name. There are few issues with that strategy. I will pose them mostly as questions for the reader here:</p>
<ol>
<li>What if you want to search the data in multiple ways?</li>
<li>How would you deal with adding new data to the list? Is that fast?</li>
<li>How would you deal with updates?</li>
<li>Whats is the O notation on these tasks?</li>
</ol>
<p>Something to <strong>think</strong> about. Regardless of your original strategy we definitely need a way to maintain order so we can quickly get relevant unordered data (more on that soon)</p>
<p>🐦</p>
<p>We are hoping to build the largest system design community on the internet! We would love for you to join us. You can find us here on <a href="https://twitter.com/arcnotes">Twitter</a>. You can reach the author <a href="https://twitter.com/myusuf3">here</a> too for feedback.</p>
<p>Lets take the Figure 1.1 below.</p>
<pre class="language-sql"><code class="language-sql"><span class="token operator">+</span>─────<span class="token operator">+</span>─────────<span class="token operator">+</span>──────────────<span class="token operator">+</span>
<span class="token operator">|</span> id  <span class="token operator">|</span> name    <span class="token operator">|</span> city         <span class="token operator">|</span>
<span class="token operator">+</span>─────<span class="token operator">+</span>─────────<span class="token operator">+</span>──────────────<span class="token operator">+</span>
<span class="token operator">|</span> <span class="token number">1</span>   <span class="token operator">|</span> Mahdi   <span class="token operator">|</span> Ottawa       <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2</span>   <span class="token operator">|</span> Elon    <span class="token operator">|</span> Mars         <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">3</span>   <span class="token operator">|</span> Jeff    <span class="token operator">|</span> Orbit        <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">4</span>   <span class="token operator">|</span> Klay    <span class="token operator">|</span> Oakland      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">5</span>   <span class="token operator">|</span> Lebron  <span class="token operator">|</span> Los Angeles  <span class="token operator">|</span>
<span class="token operator">+</span>─────<span class="token operator">+</span>─────────<span class="token operator">+</span>──────────────<span class="token operator">+</span>
</code></pre>
<p>Figure 1.1 Small table that is easily read from disk quickly.</p>
<p>The underlying data is spread around storage with no order and allocated perceivably randomly. Nowadays, most production servers come with SSDs, but there are some cases where you would want (HDD) spinning disks, but honestly, the reasons are getting less and less as prices for SSDs come down significantly.</p>
<h4 id="ssd-vs-hdd">SSD vs. HDD<a aria-hidden="true" class="anchor-heading icon-link" href="#ssd-vs-hdd"></a></h4>
<p>The main difference between a solid-state drive (SSD) and a hard disk drive (HDD) is how data is stored and accessed. HDDs use mechanical spinning disks and a moving read/write head to access data (latency), while SSDs use much faster memory chips, especially when reading many small files. Therefore, if the price isn’t an issue, SSDs are a better option — especially since modern SSDs are just about as reliable as HDDs.</p>
<p>Now reading in that small amount of data into memory is quite fast and relatively trivial to scan. Now what if the data we are searching across can't be cached entirely in memory? or the time to read all the data from disk is taking too long?</p>
<pre class="language-sql"><code class="language-sql"><span class="token operator">+</span>──────────<span class="token operator">+</span>─────────<span class="token operator">+</span>───────────────────<span class="token operator">+</span>
<span class="token operator">|</span> id       <span class="token operator">|</span> name    <span class="token operator">|</span> city              <span class="token operator">|</span>
<span class="token operator">+</span>──────────<span class="token operator">+</span>─────────<span class="token operator">+</span>───────────────────<span class="token operator">+</span>
<span class="token operator">|</span> <span class="token number">1</span>        <span class="token operator">|</span> Mahdi   <span class="token operator">|</span> Ottawa            <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2</span>        <span class="token operator">|</span> Elon    <span class="token operator">|</span> Mars              <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">3</span>        <span class="token operator">|</span> Jeff    <span class="token operator">|</span> Orbit             <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">4</span>        <span class="token operator">|</span> Klay    <span class="token operator">|</span> Oakland           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">5</span>        <span class="token operator">|</span> Lebron  <span class="token operator">|</span> Los Angeles       <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>      <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>               <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1000000</span>  <span class="token operator">|</span> Steph   <span class="token operator">|</span> San Francisco     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1001000</span>  <span class="token operator">|</span> Linus   <span class="token operator">|</span> Portland          <span class="token operator">|</span>
<span class="token operator">+</span>───────<span class="token operator">+</span>─────────<span class="token operator">+</span>──────────────────────<span class="token operator">+</span>
</code></pre>
<p>Figure 1.2 Large Table that doesn't fit entirely in memory and is spread across disk.</p>
<p>So here is where most developers go – I have seen this problem before; we need some dictionary (hash map) and a way to get to the specific row we are looking for without having to scan the slow disk, reading tons of blocks to see if the data we need is there.</p>
<p>These are called <strong>index leaf nodes</strong> are given a specific column to index, they can store the location of the matching row(s)</p>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-02-1.jpg"></p>
<p>These index leaf nodes are the mapping between the indexed column and where the corresponding row lives on the disk. This gives us a quick way to get to a specific row if you reference it by indexed column. Scanning the index can be much faster since it is a compact representation (fewer bytes) of the column you are searching by. It saves you time reading a bunch of blocks looking for the requested data and is much more convenient to cache, further speeding up the entire process.</p>
<h2 id="scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it">Scale of data often works against you, and balanced trees are the first tool in your arsenal against it.<a aria-hidden="true" class="anchor-heading icon-link" href="#scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it"></a></h2>
<p>These indexes leaf nodes are of uniform size, and we are trying to store as many of these leaf nodes as a possible per block. Since this structure requires things to be sorted (logically, not physically on disk), we need to solve the problem of having to add and remove data quickly; the good ol' linked list manages this, more specifically, a doubly linked list.</p>
<h4 id="blocks">Blocks<a aria-hidden="true" class="anchor-heading icon-link" href="#blocks"></a></h4>
<p>In computing, blocks are a grouping of bytes that usually contain a fixed number of records which are limited by a total length (block length). So if we were to calculate the number of bytes it would take to store a row divided by the block length, it would give us how many rows could be read from a specific block.</p>
<p>At a very low level you can use this to reason about how performant your systems can be. Quick Maths™ can be very powerful when you are capacity planning.</p>
<p>The benefits here are twofold: it allows us to read the index leaf nodes both forward and backward and quickly rebuild the index structure when we remove or add new rows since we are just modifying pointers—potent stuff.</p>
<h4 id="linked-list">Linked List<a aria-hidden="true" class="anchor-heading icon-link" href="#linked-list"></a></h4>
<p>A <strong>linked list</strong> is a linear collection of data elements whose order is not given by their physical placement in memory. Instead, each piece points to the next. It is a data structure consisting of a collection of nodes representing a sequence together. In its most basic form, each node contains data and a reference (in other words, a <em>link</em>) to the next node in the series.</p>
<p>Since these leaf nodes aren't arranged physically on disk in order (remember pointers maintain the sorting in the doubly linked list), we need a way to get to the correct index leaf nodes.</p>
<h3 id="balanced-trees-b-trees">Balanced Trees (B-Trees)<a aria-hidden="true" class="anchor-heading icon-link" href="#balanced-trees-b-trees"></a></h3>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-06-3.jpg"></p>
<p>Structual difference BTrees vs. B+Trees</p>
<p>So you might wonder where you made a massive error to find yourself reading about B-Trees you hated from school. I get it these things are boring, but they are powerful and worth understanding.</p>
<p>B+Trees allows us to build a tree structure where each intermediate node points to the highest node value of its respective leaf nodes. It gives us a clear path to find the index leaf node that will point to the necessary data.</p>
<p>This structure is built from the bottom up so that an intermediate node covers all leaf nodes until we reach the root node at the top. This tree structure gets its name <em>balanced</em> because the depth is uniform across the entire tree.</p>
<h4 id="b-tree-vs-btree">B-Tree vs. B+Tree<a aria-hidden="true" class="anchor-heading icon-link" href="#b-tree-vs-btree"></a></h4>
<p>The main difference B+ Trees show off is that intermediate nodes don't store any data on them. Instead, all the data references are linked to the leaf nodes, which allows for better caching of the tree structure.</p>
<p>Secondly, the leaf nodes are linked, so if you need to do an index scan, you can do a single linear pass rather than traversing the entire tree up and down and loading more index data from the disk.</p>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-03-3.jpg" alt="How B+Trees are used in RDBMSs"></p>
<p>How B+Trees are used in RDBMSs</p>
<h3 id="logarithmic-scalability">Logarithmic Scalability<a aria-hidden="true" class="anchor-heading icon-link" href="#logarithmic-scalability"></a></h3>
<p>I want to take a brief aside here to hit home the power of this structure. Of course, most developers are aware of the exponential growth of data and, ideally, your company's valuations. But unfortunately, scale of data often works against you, and balanced trees are the first tool in your arsenal against it.</p>
<p>Depending on the number of items the intermediate nodes can reference (M) plus the overall tree (N) depth, we can reference M to the N objects.</p>
<p>Here is a table illustrating the concept with an M value of 5.</p>
<p>Tree Height (N)</p>
<p>Index Leaf Nodes</p>
<p>3</p>
<p>125</p>
<p>4</p>
<p>625</p>
<p>5</p>
<p>3125</p>
<p>6</p>
<p>15625</p>
<p>7</p>
<p>78125</p>
<p>8</p>
<p>390625</p>
<p>9</p>
<p>1953125</p>
<p>So as the number of index leaf nodes increases exponentially, the tree height grows incredibly slowly (logarithmically) relative to the number of index leaf nodes. This coupled with balanced tree height, allows for almost instant identification of relevant index leaf nodes that point to actual data on disk.</p>
<p>Ain't that a beautiful sight!</p>
<h2 id="what-is-a-transaction">What is a transaction?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-a-transaction"></a></h2>
<p>A transaction is a unit of work you want to treat as a single unit. Therefore, it has to either happen in full or not at all. I would argue most systems don't need to manage transactions manually, but there are situations where the increased flexibility is instrumental in achieving the desired effect. Transactions mainly deal with the <strong>I</strong> in <strong>ACID,</strong> Isolation.</p>
<h4 id="what-is-acid">What is ACID?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-acid"></a></h4>
<p>In computer science, <strong>ACID</strong> (atomicity, consistency, isolation, durability) is a set of properties of database transactions intended to guarantee data validity despite errors, power failures, and other mishaps.</p>
<ul>
<li>A guarantee of <strong>Atomicity</strong> prevents updates to the database from occurring only partially, which can cause more significant problems than rejecting the whole series outright.</li>
<li><strong>Consistency</strong> guarantees that transaction can move database from one valid state to the next. This ensures these all adhere to all defined database rules. Also preventing corruption by illegal transaction.</li>
<li><strong>Isolation</strong> determines how a particular action is shown to other concurrent system users.</li>
<li><strong>Durability</strong> is the property that guarantees that transactions that have been committed will survive permanently.</li>
</ul>
<p>These concepts are generally well understood, but their definitions may not be consistent from system to system depending on the database system. So be sure to read up on each one for your production database.</p>
<p>These can be done automatically for you so you aren't even aware they are taking place, or you can create them manually like so:</p>
<pre class="language-sql"><code class="language-sql"><span class="token comment">-- Manual transaction with commit.</span>
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> people <span class="token keyword">WHERE</span> id <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span> <span class="token operator">or</span> <span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
</code></pre>
<p>Figure 1.3 How to create a manual transaction.</p>
<p>We will focus on the time between <strong>BEGIN</strong> and <strong>COMMIT</strong> or <strong>ROLLBACK</strong> and what happens to various other transactions acting on the same data.</p>
<h4 id="commitrollback">COMMIT/ROLLBACK<a aria-hidden="true" class="anchor-heading icon-link" href="#commitrollback"></a></h4>
<p>All manual transactions either end in successful COMMIT or ROLLBACK.</p>
<ul>
<li>COMMIT durability persists the changes made by the current transaction.</li>
<li>ROLLBACK undoes the changes made by the current transaction.</li>
</ul>
<p>When you aren't manually managing transactions, if all queries within a transaction are completed successfully, they are COMMITTED. If there is any failure, the changes during that transaction are ROLLED BACK to ensure the atomicity of the entire action.</p>
<h3 id="read-phenomena">Read Phenomena<a aria-hidden="true" class="anchor-heading icon-link" href="#read-phenomena"></a></h3>
<p>Several read phenomena can occur in these isolations, and understanding them is essential in debugging your systems and honestly helping understand what kind of inconsistencies your system can tolerate.</p>
<p><strong>Non-repeatable reads</strong></p>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-08.jpg" alt="Non-repeatable reads example"></p>
<p>Non-repeatable reads example</p>
<p>As in the image above, non-repeatable reads occur if you cannot get a consistent view of the data between two subsequent reads during your transaction. In specific modes, concurrent database modification is possible, and there can be scenarios where the value you just read can be modified, resulting in a non-repeatable read.</p>
<p><strong>Dirty reads</strong></p>
<p><img src="https://architecturenotes.co/content/images/2022/07/dirty-reads.png" alt="Dirty read example"></p>
<p>Dirty read example</p>
<p>Similarly, a dirty read occurs when you perform a read, and another transaction updates the same row but doesn't commit the work, you perform another read, and you can access the uncommitted (dirty) value, which isn't a durable state change and is inconsistent with the state of the database.</p>
<p><strong>Phantom reads</strong></p>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-10.jpg" alt="Phantom read example"></p>
<p>Phantom read example</p>
<p>Phantom reads are another committed read phenomena, which occurs when you are most commonly dealing with aggregates. For example, you ask for the number of customers in a specific transaction. Between the two subsequent reads, another customer signs up or deletes their account (committed), which results in you getting two different values if your database doesn't support range locks for these transactions.</p>
<h4 id="range-locks">Range Locks<a aria-hidden="true" class="anchor-heading icon-link" href="#range-locks"></a></h4>
<p>Range locks are best described by illustrating all the possible lock levels.</p>
<ol>
<li>Serialized Database Access — Making the database run queries one by one—terrible concurrency, the highest level of consistency, though.</li>
<li>Table Lock — lock the table for your transaction with slightly better concurrency, but concurrent table writes are still slowed.</li>
<li>Row Lock — Locks the row you are working on even better than table locks, but if multiple transactions need this row, they will need to wait.</li>
</ol>
<p>Range locks are between the last two levels of locks; they lock the range of values captured by the transaction and don't allow inserts or updates within the range captured by the transaction.</p>
<h3 id="isolation-levels">Isolation Levels<a aria-hidden="true" class="anchor-heading icon-link" href="#isolation-levels"></a></h3>
<p><img src="https://architecturenotes.co/content/images/2022/06/Databases-05-2.jpg" alt="4 Isolation levels for SQL Standard"></p>
<p>4 Isolation levels for SQL Standard</p>
<p>The SQL standard defines 4 standard isolation levels these can and should be configured globally (insidious things can happen if we can't reliably reason about isolation levels).</p>
<h3 id="repeatable-read">REPEATABLE READ<a aria-hidden="true" class="anchor-heading icon-link" href="#repeatable-read"></a></h3>
<p>Let's start with <em>REPEATABLE READ.</em> It is relatively straightforward to understand and sets the table for the remainder of the isolation levels. This isolation level ensures consistent reads within the transaction established by the first read. This view is maintained in several ways; some affect the overall system's performance, others don't, but outside this post's scope.</p>
<p>See the graphic above; once we do our first read, that view is locked for the duration of the transaction, so anything that happens outside the context of this transaction is of no consequence, committed or otherwise.</p>
<p>This isolation level protects us from several known isolation issues, mainly non-repeatable and dirty reads. It does have the minor data inconsistency while its locked to specific view of the database; keeping transactions short-lived as possible here is beneficial.</p>
<h3 id="serializable">SERIALIZABLE<a aria-hidden="true" class="anchor-heading icon-link" href="#serializable"></a></h3>
<p>This operating mode can be the most restrictive and consistent since it allows only one query to be run at a time.</p>
<p>All types of reading phenomena are no longer possible since the database runs the queries one by one, transitioning from one stable state to the next. There is more nuance here, but more or less accurate.</p>
<p><em>It is essential to note in this mode to have some retry mechanism since queries can fail due to concurrency issues.</em></p>
<p>Newer distributed databases take advantage of this isolation level for consistency guarantees. <a href="https://www.cockroachlabs.com/">CockroachDB</a> is an example of such a database. Worth a look.</p>
<h3 id="read-committed">READ COMMITTED<a aria-hidden="true" class="anchor-heading icon-link" href="#read-committed"></a></h3>
<p>This isolation mode is different from <em>REPEATABLE READ</em> in that each read creates its own consistent (committed) snapshot of time. As a result, this isolation mode is susceptible to <em>phantom reads</em> if we execute multiple reads within the same transaction.</p>
<h3 id="read-uncommitted">READ UNCOMMITTED<a aria-hidden="true" class="anchor-heading icon-link" href="#read-uncommitted"></a></h3>
<p>Alternatively, <em>the READ UNCOMMITTED</em> isolation level doesn't maintain any transaction locking and can see uncommitted data as it happens, leading to dirty reads. The stuff of nightmares... in some systems.</p>
<p>There you have it, The <strong>Things You Should Know</strong> About Databases</p>
<p>If you enjoyed this, we have a ton more content like this on the way! We strive to make all these detailed and nuanced topics understandable and highlight where you would run into them!</p>
<p>Signing up or sharing it with someone who you think could benefit from this write up would be really appreciated.</p>
<p>Feedback is appreciate and can be directed at @<a href="https://twitter.com/myusuf3">myusuf3</a> on Twitter!</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-an-rdbms" title="What is an RDBMS?">What is an RDBMS?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-an-index" title="What is an index?">What is an index?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-do-we-need-indexes" title="Why do we need indexes?">Why do we need indexes?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-do-indexes-work" title="How do indexes work?">How do indexes work?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ssd-vs-hdd" title="SSD vs. HDD">SSD vs. HDD</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it" title="Scale of data often works against you, and balanced trees are the first tool in your arsenal against it.">Scale of data often works against you, and balanced trees are the first tool in your arsenal against it.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#blocks" title="Blocks">Blocks</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#linked-list" title="Linked List">Linked List</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#balanced-trees-b-trees" title="Balanced Trees (B-Trees)">Balanced Trees (B-Trees)</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#b-tree-vs-btree" title="B-Tree vs. B+Tree">B-Tree vs. B+Tree</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#logarithmic-scalability" title="Logarithmic Scalability">Logarithmic Scalability</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-a-transaction" title="What is a transaction?">What is a transaction?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-acid" title="What is ACID?">What is ACID?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#commitrollback" title="COMMIT/ROLLBACK">COMMIT/ROLLBACK</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#read-phenomena" title="Read Phenomena">Read Phenomena</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#range-locks" title="Range Locks">Range Locks</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#isolation-levels" title="Isolation Levels">Isolation Levels</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#repeatable-read" title="REPEATABLE READ">REPEATABLE READ</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#serializable" title="SERIALIZABLE">SERIALIZABLE</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#read-committed" title="READ COMMITTED">READ COMMITTED</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#read-uncommitted" title="READ UNCOMMITTED">READ UNCOMMITTED</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"4yc7ze5ur5zu4cr1nardho0","title":"Things You Should Know About Databases","desc":"","updated":1656993726571,"created":1656993654341,"custom":{},"fname":"dev.DB.Things You Should Know About Databases","type":"note","vault":{"fsPath":"vault"},"contentHash":"28ee1bf3e50b164f3656dc4bedd588b8","links":[],"anchors":{"what-is-an-rdbms":{"type":"header","text":"What is an RDBMS?","value":"what-is-an-rdbms","line":19,"column":0,"depth":4},"what-is-an-index":{"type":"header","text":"What is an index?","value":"what-is-an-index","line":23,"column":0,"depth":2},"why-do-we-need-indexes":{"type":"header","text":"Why do we need indexes?","value":"why-do-we-need-indexes","line":29,"column":0,"depth":3},"how-do-indexes-work":{"type":"header","text":"How do indexes work?","value":"how-do-indexes-work","line":39,"column":0,"depth":3},"ssd-vs-hdd":{"type":"header","text":"SSD vs. HDD","value":"ssd-vs-hdd","line":76,"column":0,"depth":4},"scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it":{"type":"header","text":"Scale of data often works against you, and balanced trees are the first tool in your arsenal against it.","value":"scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it","line":107,"column":0,"depth":2},"blocks":{"type":"header","text":"Blocks","value":"blocks","line":111,"column":0,"depth":4},"linked-list":{"type":"header","text":"Linked List","value":"linked-list","line":119,"column":0,"depth":4},"balanced-trees-b-trees":{"type":"header","text":"Balanced Trees (B-Trees)","value":"balanced-trees-b-trees","line":125,"column":0,"depth":3},"b-tree-vs-btree":{"type":"header","text":"B-Tree vs. B+Tree","value":"b-tree-vs-btree","line":137,"column":0,"depth":4},"logarithmic-scalability":{"type":"header","text":"Logarithmic Scalability","value":"logarithmic-scalability","line":147,"column":0,"depth":3},"what-is-a-transaction":{"type":"header","text":"What is a transaction?","value":"what-is-a-transaction","line":191,"column":0,"depth":2},"what-is-acid":{"type":"header","text":"What is ACID?","value":"what-is-acid","line":195,"column":0,"depth":4},"commitrollback":{"type":"header","text":"COMMIT/ROLLBACK","value":"commitrollback","line":219,"column":0,"depth":4},"read-phenomena":{"type":"header","text":"Read Phenomena","value":"read-phenomena","line":228,"column":0,"depth":3},"range-locks":{"type":"header","text":"Range Locks","value":"range-locks","line":256,"column":0,"depth":4},"isolation-levels":{"type":"header","text":"Isolation Levels","value":"isolation-levels","line":266,"column":0,"depth":3},"repeatable-read":{"type":"header","text":"REPEATABLE READ","value":"repeatable-read","line":274,"column":0,"depth":3},"serializable":{"type":"header","text":"SERIALIZABLE","value":"serializable","line":282,"column":0,"depth":3},"read-committed":{"type":"header","text":"READ COMMITTED","value":"read-committed","line":292,"column":0,"depth":3},"read-uncommitted":{"type":"header","text":"READ UNCOMMITTED","value":"read-uncommitted","line":296,"column":0,"depth":3}},"children":[],"parent":"eha8xvsaz0zdh4f18pqqls2","data":{}},"body":"\u003ch1 id=\"things-you-should-know-about-databases\"\u003eThings You Should Know About Databases\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#things-you-should-know-about-databases\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://architecturenotes.co/things-you-should-know-about-databases/\"\u003ehttps://architecturenotes.co/things-you-should-know-about-databases/\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://news.ycombinator.com/item?id=31895623\"\u003ehttps://news.ycombinator.com/item?id=31895623\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIt is often surprising how little is known about how databases operate at a surface level, considering they store almost all of the states in our applications. Yet, it's foundational to the overall success of most systems. So today, I will explain the two most important topics when working with RDBMSs indexes and transactions.\u003c/p\u003e\n\u003cp\u003eSo, without fully getting into the weeds on database-specific quirks, I will cover everything you \u003cem\u003eshould\u003c/em\u003e understand about RDBMS indexes. I will touch briefly on transactions and isolation levels and how they can impact your reasoning about specific transactions.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/07/Databases-01-1.jpg\" alt=\"Things you should know about databases\"\u003e\u003c/p\u003e\n\u003cp\u003eThings you should know about databases\u003c/p\u003e\n\u003ch4 id=\"what-is-an-rdbms\"\u003eWhat is an RDBMS?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-an-rdbms\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eA relational database is a digital database based on the relational data model, as proposed by E. F. Codd in 1970. A \u003cstrong\u003erelational database management system\u003c/strong\u003e (RDBMS) is used to maintain relational databases. Many relational database systems have an option of using the SQL (Structured Query Language) for querying and maintaining the database. Examples include MySQL and PostgreSQL.\u003c/p\u003e\n\u003ch2 id=\"what-is-an-index\"\u003eWhat is an index?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-an-index\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIndexes are a data structure that helps decrease the look-up time of requested data. Indexes achieve this with the additional costs of storage, memory, and keeping it up to date (slower writes), which allows us to skip the tedious task of checking every table row.\u003c/p\u003e\n\u003cp\u003eLike an index in the back of a textbook, it helps you get to the right page. I am not a great fan of the book analogy, it quickly falls apart as we dig deeper into database indexes, but it is an excellent way to introduce the topic.\u003c/p\u003e\n\u003ch3 id=\"why-do-we-need-indexes\"\u003eWhy do we need indexes?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-do-we-need-indexes\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSmall amounts of data are manageable but, (think of an attendance list for a small class) when they get larger (think birth registry for a large city) less so. Everything that used to be quick gets slower, too slow.\u003c/p\u003e\n\u003cp\u003eThink about how your strategy would change if you had to find something on 1 page vs. thousand pages of names. No, \u003cstrong\u003eseriously\u003c/strong\u003e, take a second and think.\u003c/p\u003e\n\u003cp\u003eSome database has implemented almost all the good strategies you can come up with at some point. As they grow, systems collect and store more data, eventually leading to the problem above.\u003c/p\u003e\n\u003cp\u003eWe need indexes to help us get the relevant data we need as quickly as possible.\u003c/p\u003e\n\u003ch3 id=\"how-do-indexes-work\"\u003eHow do indexes work?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-do-indexes-work\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-01-3.jpg\" alt=\"Read performance increases as you index the data, but that comes at the cost of write performance since you need to keep index up to date.\"\u003e\u003c/p\u003e\n\u003cp\u003eRead performance increases as you index the data, but that comes at the cost of write performance since you need to keep index up to date.\u003c/p\u003e\n\u003cp\u003eSo one of the solutions question that is often posed above is to store this data logically on how you would search it. Meaning if you want to search the list by name you would sort the list by first name. There are few issues with that strategy. I will pose them mostly as questions for the reader here:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWhat if you want to search the data in multiple ways?\u003c/li\u003e\n\u003cli\u003eHow would you deal with adding new data to the list? Is that fast?\u003c/li\u003e\n\u003cli\u003eHow would you deal with updates?\u003c/li\u003e\n\u003cli\u003eWhats is the O notation on these tasks?\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eSomething to \u003cstrong\u003ethink\u003c/strong\u003e about. Regardless of your original strategy we definitely need a way to maintain order so we can quickly get relevant unordered data (more on that soon)\u003c/p\u003e\n\u003cp\u003e🐦\u003c/p\u003e\n\u003cp\u003eWe are hoping to build the largest system design community on the internet! We would love for you to join us. You can find us here on \u003ca href=\"https://twitter.com/arcnotes\"\u003eTwitter\u003c/a\u003e. You can reach the author \u003ca href=\"https://twitter.com/myusuf3\"\u003ehere\u003c/a\u003e too for feedback.\u003c/p\u003e\n\u003cp\u003eLets take the Figure 1.1 below.\u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e id  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e name    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e city         \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Mahdi   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Ottawa       \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Elon    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Mars         \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Jeff    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Orbit        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Klay    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Oakland      \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Lebron  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Los Angeles  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFigure 1.1 Small table that is easily read from disk quickly.\u003c/p\u003e\n\u003cp\u003eThe underlying data is spread around storage with no order and allocated perceivably randomly. Nowadays, most production servers come with SSDs, but there are some cases where you would want (HDD) spinning disks, but honestly, the reasons are getting less and less as prices for SSDs come down significantly.\u003c/p\u003e\n\u003ch4 id=\"ssd-vs-hdd\"\u003eSSD vs. HDD\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ssd-vs-hdd\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThe main difference between a solid-state drive (SSD) and a hard disk drive (HDD) is how data is stored and accessed. HDDs use mechanical spinning disks and a moving read/write head to access data (latency), while SSDs use much faster memory chips, especially when reading many small files. Therefore, if the price isn’t an issue, SSDs are a better option — especially since modern SSDs are just about as reliable as HDDs.\u003c/p\u003e\n\u003cp\u003eNow reading in that small amount of data into memory is quite fast and relatively trivial to scan. Now what if the data we are searching across can't be cached entirely in memory? or the time to read all the data from disk is taking too long?\u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e───────────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e id       \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e name    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e city              \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e───────────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Mahdi   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Ottawa            \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Elon    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Mars              \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Jeff    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Orbit             \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Klay    \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Oakland           \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e        \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Lebron  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Los Angeles       \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e      \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e     \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e               \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000000\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Steph   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e San Francisco     \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token number\"\u003e1001000\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Linus   \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e Portland          \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e───────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e─────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e──────────────────────\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFigure 1.2 Large Table that doesn't fit entirely in memory and is spread across disk.\u003c/p\u003e\n\u003cp\u003eSo here is where most developers go – I have seen this problem before; we need some dictionary (hash map) and a way to get to the specific row we are looking for without having to scan the slow disk, reading tons of blocks to see if the data we need is there.\u003c/p\u003e\n\u003cp\u003eThese are called \u003cstrong\u003eindex leaf nodes\u003c/strong\u003e are given a specific column to index, they can store the location of the matching row(s)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-02-1.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eThese index leaf nodes are the mapping between the indexed column and where the corresponding row lives on the disk. This gives us a quick way to get to a specific row if you reference it by indexed column. Scanning the index can be much faster since it is a compact representation (fewer bytes) of the column you are searching by. It saves you time reading a bunch of blocks looking for the requested data and is much more convenient to cache, further speeding up the entire process.\u003c/p\u003e\n\u003ch2 id=\"scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it\"\u003eScale of data often works against you, and balanced trees are the first tool in your arsenal against it.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#scale-of-data-often-works-against-you-and-balanced-trees-are-the-first-tool-in-your-arsenal-against-it\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThese indexes leaf nodes are of uniform size, and we are trying to store as many of these leaf nodes as a possible per block. Since this structure requires things to be sorted (logically, not physically on disk), we need to solve the problem of having to add and remove data quickly; the good ol' linked list manages this, more specifically, a doubly linked list.\u003c/p\u003e\n\u003ch4 id=\"blocks\"\u003eBlocks\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#blocks\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eIn computing, blocks are a grouping of bytes that usually contain a fixed number of records which are limited by a total length (block length). So if we were to calculate the number of bytes it would take to store a row divided by the block length, it would give us how many rows could be read from a specific block.\u003c/p\u003e\n\u003cp\u003eAt a very low level you can use this to reason about how performant your systems can be. Quick Maths™ can be very powerful when you are capacity planning.\u003c/p\u003e\n\u003cp\u003eThe benefits here are twofold: it allows us to read the index leaf nodes both forward and backward and quickly rebuild the index structure when we remove or add new rows since we are just modifying pointers—potent stuff.\u003c/p\u003e\n\u003ch4 id=\"linked-list\"\u003eLinked List\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#linked-list\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eA \u003cstrong\u003elinked list\u003c/strong\u003e is a linear collection of data elements whose order is not given by their physical placement in memory. Instead, each piece points to the next. It is a data structure consisting of a collection of nodes representing a sequence together. In its most basic form, each node contains data and a reference (in other words, a \u003cem\u003elink\u003c/em\u003e) to the next node in the series.\u003c/p\u003e\n\u003cp\u003eSince these leaf nodes aren't arranged physically on disk in order (remember pointers maintain the sorting in the doubly linked list), we need a way to get to the correct index leaf nodes.\u003c/p\u003e\n\u003ch3 id=\"balanced-trees-b-trees\"\u003eBalanced Trees (B-Trees)\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#balanced-trees-b-trees\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-06-3.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eStructual difference BTrees vs. B+Trees\u003c/p\u003e\n\u003cp\u003eSo you might wonder where you made a massive error to find yourself reading about B-Trees you hated from school. I get it these things are boring, but they are powerful and worth understanding.\u003c/p\u003e\n\u003cp\u003eB+Trees allows us to build a tree structure where each intermediate node points to the highest node value of its respective leaf nodes. It gives us a clear path to find the index leaf node that will point to the necessary data.\u003c/p\u003e\n\u003cp\u003eThis structure is built from the bottom up so that an intermediate node covers all leaf nodes until we reach the root node at the top. This tree structure gets its name \u003cem\u003ebalanced\u003c/em\u003e because the depth is uniform across the entire tree.\u003c/p\u003e\n\u003ch4 id=\"b-tree-vs-btree\"\u003eB-Tree vs. B+Tree\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#b-tree-vs-btree\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThe main difference B+ Trees show off is that intermediate nodes don't store any data on them. Instead, all the data references are linked to the leaf nodes, which allows for better caching of the tree structure.\u003c/p\u003e\n\u003cp\u003eSecondly, the leaf nodes are linked, so if you need to do an index scan, you can do a single linear pass rather than traversing the entire tree up and down and loading more index data from the disk.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-03-3.jpg\" alt=\"How B+Trees are used in RDBMSs\"\u003e\u003c/p\u003e\n\u003cp\u003eHow B+Trees are used in RDBMSs\u003c/p\u003e\n\u003ch3 id=\"logarithmic-scalability\"\u003eLogarithmic Scalability\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#logarithmic-scalability\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eI want to take a brief aside here to hit home the power of this structure. Of course, most developers are aware of the exponential growth of data and, ideally, your company's valuations. But unfortunately, scale of data often works against you, and balanced trees are the first tool in your arsenal against it.\u003c/p\u003e\n\u003cp\u003eDepending on the number of items the intermediate nodes can reference (M) plus the overall tree (N) depth, we can reference M to the N objects.\u003c/p\u003e\n\u003cp\u003eHere is a table illustrating the concept with an M value of 5.\u003c/p\u003e\n\u003cp\u003eTree Height (N)\u003c/p\u003e\n\u003cp\u003eIndex Leaf Nodes\u003c/p\u003e\n\u003cp\u003e3\u003c/p\u003e\n\u003cp\u003e125\u003c/p\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003cp\u003e625\u003c/p\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003cp\u003e3125\u003c/p\u003e\n\u003cp\u003e6\u003c/p\u003e\n\u003cp\u003e15625\u003c/p\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003cp\u003e78125\u003c/p\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003cp\u003e390625\u003c/p\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003cp\u003e1953125\u003c/p\u003e\n\u003cp\u003eSo as the number of index leaf nodes increases exponentially, the tree height grows incredibly slowly (logarithmically) relative to the number of index leaf nodes. This coupled with balanced tree height, allows for almost instant identification of relevant index leaf nodes that point to actual data on disk.\u003c/p\u003e\n\u003cp\u003eAin't that a beautiful sight!\u003c/p\u003e\n\u003ch2 id=\"what-is-a-transaction\"\u003eWhat is a transaction?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-a-transaction\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eA transaction is a unit of work you want to treat as a single unit. Therefore, it has to either happen in full or not at all. I would argue most systems don't need to manage transactions manually, but there are situations where the increased flexibility is instrumental in achieving the desired effect. Transactions mainly deal with the \u003cstrong\u003eI\u003c/strong\u003e in \u003cstrong\u003eACID,\u003c/strong\u003e Isolation.\u003c/p\u003e\n\u003ch4 id=\"what-is-acid\"\u003eWhat is ACID?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-acid\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eIn computer science, \u003cstrong\u003eACID\u003c/strong\u003e (atomicity, consistency, isolation, durability) is a set of properties of database transactions intended to guarantee data validity despite errors, power failures, and other mishaps.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA guarantee of \u003cstrong\u003eAtomicity\u003c/strong\u003e prevents updates to the database from occurring only partially, which can cause more significant problems than rejecting the whole series outright.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConsistency\u003c/strong\u003e guarantees that transaction can move database from one valid state to the next. This ensures these all adhere to all defined database rules. Also preventing corruption by illegal transaction.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIsolation\u003c/strong\u003e determines how a particular action is shown to other concurrent system users.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDurability\u003c/strong\u003e is the property that guarantees that transactions that have been committed will survive permanently.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThese concepts are generally well understood, but their definitions may not be consistent from system to system depending on the database system. So be sure to read up on each one for your production database.\u003c/p\u003e\n\u003cp\u003eThese can be done automatically for you so you aren't even aware they are taking place, or you can create them manually like so:\u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token comment\"\u003e-- Manual transaction with commit.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eBEGIN\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e people \u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e id \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eCOMMIT\u003c/span\u003e \u003cspan class=\"token operator\"\u003eor\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eROLLBACK\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFigure 1.3 How to create a manual transaction.\u003c/p\u003e\n\u003cp\u003eWe will focus on the time between \u003cstrong\u003eBEGIN\u003c/strong\u003e and \u003cstrong\u003eCOMMIT\u003c/strong\u003e or \u003cstrong\u003eROLLBACK\u003c/strong\u003e and what happens to various other transactions acting on the same data.\u003c/p\u003e\n\u003ch4 id=\"commitrollback\"\u003eCOMMIT/ROLLBACK\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#commitrollback\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eAll manual transactions either end in successful COMMIT or ROLLBACK.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCOMMIT durability persists the changes made by the current transaction.\u003c/li\u003e\n\u003cli\u003eROLLBACK undoes the changes made by the current transaction.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWhen you aren't manually managing transactions, if all queries within a transaction are completed successfully, they are COMMITTED. If there is any failure, the changes during that transaction are ROLLED BACK to ensure the atomicity of the entire action.\u003c/p\u003e\n\u003ch3 id=\"read-phenomena\"\u003eRead Phenomena\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#read-phenomena\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSeveral read phenomena can occur in these isolations, and understanding them is essential in debugging your systems and honestly helping understand what kind of inconsistencies your system can tolerate.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNon-repeatable reads\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-08.jpg\" alt=\"Non-repeatable reads example\"\u003e\u003c/p\u003e\n\u003cp\u003eNon-repeatable reads example\u003c/p\u003e\n\u003cp\u003eAs in the image above, non-repeatable reads occur if you cannot get a consistent view of the data between two subsequent reads during your transaction. In specific modes, concurrent database modification is possible, and there can be scenarios where the value you just read can be modified, resulting in a non-repeatable read.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDirty reads\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/07/dirty-reads.png\" alt=\"Dirty read example\"\u003e\u003c/p\u003e\n\u003cp\u003eDirty read example\u003c/p\u003e\n\u003cp\u003eSimilarly, a dirty read occurs when you perform a read, and another transaction updates the same row but doesn't commit the work, you perform another read, and you can access the uncommitted (dirty) value, which isn't a durable state change and is inconsistent with the state of the database.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ePhantom reads\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-10.jpg\" alt=\"Phantom read example\"\u003e\u003c/p\u003e\n\u003cp\u003ePhantom read example\u003c/p\u003e\n\u003cp\u003ePhantom reads are another committed read phenomena, which occurs when you are most commonly dealing with aggregates. For example, you ask for the number of customers in a specific transaction. Between the two subsequent reads, another customer signs up or deletes their account (committed), which results in you getting two different values if your database doesn't support range locks for these transactions.\u003c/p\u003e\n\u003ch4 id=\"range-locks\"\u003eRange Locks\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#range-locks\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eRange locks are best described by illustrating all the possible lock levels.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eSerialized Database Access — Making the database run queries one by one—terrible concurrency, the highest level of consistency, though.\u003c/li\u003e\n\u003cli\u003eTable Lock — lock the table for your transaction with slightly better concurrency, but concurrent table writes are still slowed.\u003c/li\u003e\n\u003cli\u003eRow Lock — Locks the row you are working on even better than table locks, but if multiple transactions need this row, they will need to wait.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eRange locks are between the last two levels of locks; they lock the range of values captured by the transaction and don't allow inserts or updates within the range captured by the transaction.\u003c/p\u003e\n\u003ch3 id=\"isolation-levels\"\u003eIsolation Levels\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#isolation-levels\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://architecturenotes.co/content/images/2022/06/Databases-05-2.jpg\" alt=\"4 Isolation levels for SQL Standard\"\u003e\u003c/p\u003e\n\u003cp\u003e4 Isolation levels for SQL Standard\u003c/p\u003e\n\u003cp\u003eThe SQL standard defines 4 standard isolation levels these can and should be configured globally (insidious things can happen if we can't reliably reason about isolation levels).\u003c/p\u003e\n\u003ch3 id=\"repeatable-read\"\u003eREPEATABLE READ\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#repeatable-read\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eLet's start with \u003cem\u003eREPEATABLE READ.\u003c/em\u003e It is relatively straightforward to understand and sets the table for the remainder of the isolation levels. This isolation level ensures consistent reads within the transaction established by the first read. This view is maintained in several ways; some affect the overall system's performance, others don't, but outside this post's scope.\u003c/p\u003e\n\u003cp\u003eSee the graphic above; once we do our first read, that view is locked for the duration of the transaction, so anything that happens outside the context of this transaction is of no consequence, committed or otherwise.\u003c/p\u003e\n\u003cp\u003eThis isolation level protects us from several known isolation issues, mainly non-repeatable and dirty reads. It does have the minor data inconsistency while its locked to specific view of the database; keeping transactions short-lived as possible here is beneficial.\u003c/p\u003e\n\u003ch3 id=\"serializable\"\u003eSERIALIZABLE\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#serializable\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis operating mode can be the most restrictive and consistent since it allows only one query to be run at a time.\u003c/p\u003e\n\u003cp\u003eAll types of reading phenomena are no longer possible since the database runs the queries one by one, transitioning from one stable state to the next. There is more nuance here, but more or less accurate.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eIt is essential to note in this mode to have some retry mechanism since queries can fail due to concurrency issues.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNewer distributed databases take advantage of this isolation level for consistency guarantees. \u003ca href=\"https://www.cockroachlabs.com/\"\u003eCockroachDB\u003c/a\u003e is an example of such a database. Worth a look.\u003c/p\u003e\n\u003ch3 id=\"read-committed\"\u003eREAD COMMITTED\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#read-committed\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis isolation mode is different from \u003cem\u003eREPEATABLE READ\u003c/em\u003e in that each read creates its own consistent (committed) snapshot of time. As a result, this isolation mode is susceptible to \u003cem\u003ephantom reads\u003c/em\u003e if we execute multiple reads within the same transaction.\u003c/p\u003e\n\u003ch3 id=\"read-uncommitted\"\u003eREAD UNCOMMITTED\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#read-uncommitted\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eAlternatively, \u003cem\u003ethe READ UNCOMMITTED\u003c/em\u003e isolation level doesn't maintain any transaction locking and can see uncommitted data as it happens, leading to dirty reads. The stuff of nightmares... in some systems.\u003c/p\u003e\n\u003cp\u003eThere you have it, The \u003cstrong\u003eThings You Should Know\u003c/strong\u003e About Databases\u003c/p\u003e\n\u003cp\u003eIf you enjoyed this, we have a ton more content like this on the way! We strive to make all these detailed and nuanced topics understandable and highlight where you would run into them!\u003c/p\u003e\n\u003cp\u003eSigning up or sharing it with someone who you think could benefit from this write up would be really appreciated.\u003c/p\u003e\n\u003cp\u003eFeedback is appreciate and can be directed at @\u003ca href=\"https://twitter.com/myusuf3\"\u003emyusuf3\u003c/a\u003e on Twitter!\u003c/p\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"4yc7ze5ur5zu4cr1nardho0"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>