<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>(Almost) Every infrastructure decision I endorse or regret after 4 years running infrastructure at a startup</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="(Almost) Every infrastructure decision I endorse or regret after 4 years running infrastructure at a startup"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/po3eez1w96f1vxyjawiogz5/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2/13/2024"/><meta property="article:modified_time" content="2/13/2024"/><link rel="canonical" href="https://luke-snaw.github.io//notes/po3eez1w96f1vxyjawiogz5/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="almost-every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup">(Almost) Every infrastructure decision I endorse or regret after 4 years running infrastructure at a startup<a aria-hidden="true" class="anchor-heading icon-link" href="#almost-every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup"></a></h1>
<blockquote>
<p><a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/">https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/</a></p>
</blockquote>
<p>I’ve led infrastructure at a <a href="https://cresta.com/careers/">startup</a> for the past 4 years that has had to scale quickly. From the beginning I made some core decisions that the company has had to stick to, for better or worse, these past four years. This post will list some of the major decisions made and if I endorse them for your startup, or if I regret them and advise you to pick something else.</p>
<h2 id="aws-link-to-heading">AWS <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#aws-link-to-heading"></a></h2>
<h3 id="picking-aws-over-google-cloud-link-to-heading">Picking AWS over Google Cloud <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-aws-over-google-cloud">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#picking-aws-over-google-cloud-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Early on, we were using both GCP and AWS. During that time, I had no idea who my “account manager” was for Google Cloud, while at the same time I had regular cadence meetings with our AWS account manager. There is a feel that Google lives on robots and automation, while Amazon lives with a customer focus. This support has helped us when evaluating new AWS services. Besides support, AWS has done a great job around stability and minimizing backwards incompatible API changes.</p>
<p>There was a time when Google Cloud was the choice for Kubernetes clusters, especially when there was ambiguity around if AWS would invest in EKS over <a href="https://aws.amazon.com/ecs/">ECS</a>. Now though, with all the extra Kubernetes integrations around AWS services (external-dns, external-secrets, etc), this is not much of any issue anymore.</p>
<h3 id="eks-link-to-heading"><a href="https://aws.amazon.com/eks/">EKS</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ekshttpsawsamazoncomeks">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#eks-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Unless you’re penny-pinching (and your time is free), there’s no reason to run your own control plane rather than use EKS. The main advantage of using an alternative in AWS, like ECS, is the deep integration into AWS services. Luckily, Kubernetes has caught up in many ways: for example, using external-dns to integrate with Route53.</p>
<h3 id="eks-managed-addons-link-to-heading">EKS <a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html">managed addons</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#eks-managed-addonshttpsdocsawsamazoncomekslatestuserguideeks-add-onshtml">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#eks-managed-addons-link-to-heading"></a></h3>
<p>🟧 <em>Regret</em></p>
<p>We started with EKS managed addons because I thought it was the “right” way to use EKS. Unfortunately, we always ran into a situation where we needed to customize the installation itself. Maybe the CPU requests, the image tag, or some configmap. We’ve since switched to using helm charts for what were add-ons and things are running much better with promotions that fit similar to our existing GitOps pipelines.</p>
<h3 id="rds-link-to-heading"><a href="https://aws.amazon.com/rds/">RDS</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#rdshttpsawsamazoncomrds">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#rds-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Data is the most critical part of your infrastructure. You lose your network: that’s downtime. You lose your data: that’s a company ending event. The markup cost of using RDS (or any managed database) is worth it.</p>
<h3 id="redis-elasticache-link-to-heading"><a href="https://aws.amazon.com/elasticache/redis/">Redis ElastiCache</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#redis-elasticachehttpsawsamazoncomelasticacheredis">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#redis-elasticache-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Redis has worked very well as a cache and general use product. It’s fast, the API is simple and well documented, and the implementation is battle tested. Unlike other cache options, like Memcached, Redis has a lot of features that make it useful for more than just caching. It’s a great swiss army knife of “do fast data thing”.</p>
<p>Part of me is unsure what the state of Redis is for Cloud Providers, but I feel it’s so widely used by AWS customers that AWS will continue to support it well.</p>
<h3 id="ecr-link-to-heading"><a href="https://aws.amazon.com/ecr/">ECR</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ecrhttpsawsamazoncomecr">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#ecr-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>We originally hosted on <a href="https://quay.io/">quay.io</a>. It was a hot mess of stability problems. Since moving to ECR, things have been much more stable. The deeper permission integrations with EKS nodes or dev servers has also been a big plus.</p>
<h3 id="aws-vpn-link-to-heading"><a href="https://aws.amazon.com/vpn/">AWS VPN</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws-vpnhttpsawsamazoncomvpn">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#aws-vpn-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>There are Zero Trust VPN alternatives from companies like CloudFlare. I’m sure these products work well, but a VPN is just so dead simple to setup and understand (“simplicity is preferable” is my mantra). We use Okta to manage our VPN access and it’s been a great experience.</p>
<h3 id="aws-premium-support-link-to-heading">AWS <a href="https://aws.amazon.com/premiumsupport/">premium support</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws-premium-supporthttpsawsamazoncompremiumsupport">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#aws-premium-support-link-to-heading"></a></h3>
<p>🟧 <em>Regret</em></p>
<p>It’s super expensive: almost (if not more) than the cost of another engineer. I think if we had very little in house knowledge of AWS, it would be worth it.</p>
<h3 id="control-tower-account-factory-for-terraform-link-to-heading"><a href="https://docs.aws.amazon.com/controltower/latest/userguide/aft-overview.html">Control Tower Account Factory for Terraform</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#control-tower-account-factory-for-terraformhttpsdocsawsamazoncomcontroltowerlatestuserguideaft-overviewhtml">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#control-tower-account-factory-for-terraform-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Before integrating AFT, using control tower was a pain mostly because it was very difficult to automate. We’ve since integrated AFT into our stack and spinning up accounts has worked well since. Another thing AFT makes easier is standardizing tags for our accounts. For example, our production accounts have a tag that we can then use to make peering decisions. Tags work better than organizations for us because the decision of “what properties describe this account” isn’t always a tree structure.</p>
<h2 id="process-link-to-heading">Process <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#process">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#process-link-to-heading"></a></h2>
<h3 id="automating-post-mortem-process-with-a-slack-bot-link-to-heading">Automating post-mortem process with a slack bot <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#automating-post-mortem-process-with-a-slack-bot">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#automating-post-mortem-process-with-a-slack-bot-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Everyone is busy. It can feel like you’re the “bad guy” reminding people to fill out the post-mortem. Making a robot be the bad guy had been great. It streamlines the process by nudging people to follow the SEV and post-mortem procedure.</p>
<p>It doesn’t have to be too complex to start. Just the basics of “It’s been an hour of no messages. Someone post an update” or “It’s been a day with no calendar invite. Someone schedule the post-mortem meeting” can go a long ways.</p>
<h2 id="using-pager-dutys-incident-templates-link-to-heading">Using pager duty’s incident <a href="https://response.pagerduty.com/after/post_mortem_template/">templates</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-pager-dutys-incident-templateshttpsresponsepagerdutycomafterpost_mortem_template">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#using-pager-dutys-incident-templates-link-to-heading"></a></h2>
<p>🟩 <em>Endorse</em></p>
<p>Why reinvent the wheel? PagerDuty publishes a template of what to do during an incident. We’ve customized it a bit, which is where the flexibility of Notion comes in handy, but it’s been a great starting point.</p>
<h3 id="reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading">Reviewing pager duty tickets on a regular cadence <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#reviewing-pager-duty-tickets-on-a-regular-cadence">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Alerting for a company goes like this:</p>
<ol>
<li>There are no alerts at all. We need alerts.</li>
<li>We have alerts. There are too many alerts, so we ignore them.</li>
<li>We’ve prioritized the alerts. Now only the critical ones wake me up.</li>
<li>We ignore the non-critical alerts.</li>
</ol>
<p>We have a two tiered alerting setup: critical and non-critical. Critical alerts wake people up. Non-critical alerts are expected to ping the on-call async (email). The problem is that non-critical alerts are often ignored. To resolve this, we have regular (usually every 2 weeks) PagerDuty review meetings where we go over all our alerts. For the critical alerts, we discuss if it should stay critical. Then, we iterate the non-critical alerts (usually picking a few each meeting) and discuss what we can do to clear those out as well (usually tweaking the threshold or creating some automation).</p>
<h3 id="monthly-cost-tracking-meetings-link-to-heading">Monthly cost tracking meetings <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#monthly-cost-tracking-meetings">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#monthly-cost-tracking-meetings-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Early on, I set up a monthly meeting to go over all of our SaaS cost (AWS, DataDog, etc). Previously, this was just something reviewed from a finance perspective, but it’s hard for them to answer general questions around “does this cost number seem right”. During these meetings, usually attended by both finance and engineering, we go over every software related bill we get and do a gut check of “does this cost sound right”. We dive into the numbers of each of the high bills and try to break them down.</p>
<p>For example, with AWS we group items by tag and separate them by account. These two dimensions, combined with the general service name (EC2, RDS, etc) gives us a good idea of where the major cost drivers are. Some things we do with this data are go deeper into spot instance usage or which accounts contribute to networking costs the most. But don’t stop at just AWS: go into all the major spend sinks your company has.</p>
<h3 id="manging-post-mortems-in-datadog-or-pager-duty-link-to-heading">Manging post mortems in datadog or pager duty <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#manging-post-mortems-in-datadog-or-pager-duty">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#manging-post-mortems-in-datadog-or-pager-duty-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>Everyone should do post-mortems. Both <a href="https://www.datadoghq.com/product/incident-management/">DataDog</a> and PagerDuty have integrations to manage writing post-mortems and we tried each. Unfortunately, they both make it hard to customize the post-mortem process. Given how powerful wiki-ish tools like Notion are, I think it’s better to use a tool like that to manage post-mortems.</p>
<h3 id="not-using-function-as-a-servicefaas-more-link-to-heading">Not using Function as a Service(FaaS) more <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-function-as-a-servicefaas-more">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-using-function-as-a-servicefaas-more-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>There are no great FaaS options for running GPU workloads, which is why we could never go fully FaaS. However, many CPU workloads could be FaaS (<a href="https://aws.amazon.com/lambda/">lambda</a>, etc). The biggest counter-point people bring up is the cost. They’ll say something like “This EC2 instance type running 24/7 at full load is way less expensive than a Lambda running”. This is true, but it’s also a false comparison. Nobody runs a service at 100% CPU utilization and moves on with their life. It’s always on some scaler that says “Never reach 100%. At 70% scale up another”. And it’s always unclear when to scale back down, instead it’s a heuristic of “If we’ve been at 10% for 10 minutes, scale down”. Then, people assume spot instances when they aren’t always on market.</p>
<p>Another hidden benefit of Lambda is that it’s very easy to track costs with high accuracy. When deploying services in Kubernetes, cost can get hidden behind other per node objects or other services running on the same node.</p>
<h3 id="gitops-link-to-heading"><a href="https://www.gitops.tech/">GitOps</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#gitopshttpswwwgitopstech">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#gitops-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>GitOps has so far scaled pretty well and we use it for many parts of our infrastructure: services, terraform, and config to name a few. The main downside is that pipeline oriented workflows give a clear picture of “here is the box that means you did a commit and here are arrows that go from that box to the end of the pipeline”. With GitOps we’ve had to invest in tooling to help people answer questions like “I did a commit: why isn’t it deployed yet”.</p>
<p>Even still, the flexibility of GitOps has been a huge win and I strongly recommend it for your company.</p>
<h3 id="prioritizing-team-efficiency-over-external-demands-link-to-heading">Prioritizing team efficiency over external demands <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#prioritizing-team-efficiency-over-external-demands">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#prioritizing-team-efficiency-over-external-demands-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Most likely, your company is not selling the infrastructure itself, but another product. This puts pressure on the team to deliver features and not scale your own workload. But just like airplanes tell you to put your own mask on first, you need to make sure your team is efficient. With rare exception, I have never regretted prioritizing taking time to write some automation or documentation.</p>
<h3 id="multiple-applications-sharing-a-database-link-to-heading">Multiple applications sharing a database <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#multiple-applications-sharing-a-database">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#multiple-applications-sharing-a-database-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>Like most tech debt, we didn’t <em>make</em> this decision, we just did not <em>not</em> make this decision. Eventually, someone wants the product to do a new thing and makes a new table. This feels good because there are now foreign keys between the two tables. But since <em>everything</em> is owned by <em>someone</em> and that <em>someone</em> is a row in a table, you’ve got foreign keys between all objects in the entire stack.</p>
<p>Since the database is used by <em>everyone</em>, it becomes cared for by <em>no one</em>. Startups don’t have the luxury of a DBA, and everything owned by <em>no one</em> is owned by <em>infrastructure</em> eventually.</p>
<p>The biggest problem with a shared database are:</p>
<ul>
<li>Crud accumulates in the database, and it’s unclear if it can be deleted.</li>
<li>When there are performance issues, infrastructure (without deep product knowledge) has to debug the database and figure out who to redirect to</li>
<li>Database users can push bad code that does bad things to the database. These bad things may PagerDuty alert the infrastructure team (since they own the database). It feels bad to wake up one team for another team’s issue. With application owned databases, the application team is the first responder.</li>
</ul>
<p>All that said, I’m not against stacks that want to share a single database either. Just be aware of the tradeoffs above and have a good story for how you’ll manage them.</p>
<h2 id="saas-link-to-heading">SaaS <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#saas">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#saas-link-to-heading"></a></h2>
<h3 id="not-adopting-an-identity-platform-early-on-link-to-heading">Not adopting an identity platform early on <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-adopting-an-identity-platform-early-on">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-adopting-an-identity-platform-early-on-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>I stuck with Google Workspace at the start, using it to create groups for employees as a way to assign permissions. It just isn’t flexible enough. In retrospect, I wish we had picked up <a href="https://www.okta.com/">Okta</a> much sooner. It’s worked very well, has integrations for almost everything, and solves a lot of compliance/security aspects. Just lean into an identity solution early on and only accept SaaS vendors that integrate with it.</p>
<h3 id="notion-link-to-heading"><a href="https://www.notion.so/">Notion</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#notionhttpswwwnotionso">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#notion-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Every company needs a place to put documentation. Notion has been a great choice and worked much easier than things I’ve used in the past (Wikis, Google Docs, Confluence, etc). Their Database concept for page organization has also allowed me to create pretty sophisticated organizations of pages.</p>
<h3 id="slack-link-to-heading"><a href="https://slack.com/">Slack</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#slackhttpsslackcom">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#slack-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Thank god I don’t have to use HipChat anymore. Slack is great as a default communication tool, but to reduce stress and noise I recommend:</p>
<ul>
<li>Using threads to condense communication</li>
<li>Communicating expectations that people may not respond quickly to messages</li>
<li>Discourage private messages and encourage public channels.</li>
</ul>
<h3 id="moving-off-jira-onto-linear-link-to-heading">Moving off <a href="https://www.atlassian.com/software/jira">JIRA</a> onto <a href="https://linear.app/">linear</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#moving-off-jirahttpswwwatlassiancomsoftwarejira-onto-linearhttpslinearapp">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#moving-off-jira-onto-linear-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Not even close. JIRA is so bloated I’m worried running it in an AI company it would just turn fully sentient. When I’m using Linear, I will often think “I wonder if I can do X” and then I’ll try and I can!</p>
<h3 id="not-using-terraform-cloud-link-to-heading">Not using <a href="https://www.terraform.io/cloud">Terraform Cloud</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-terraform-cloudhttpswwwterraformiocloud">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-using-terraform-cloud-link-to-heading"></a></h3>
<p>🟩 <em>No Regrets</em></p>
<p>Early on, I tried to migrate our terraform to Terraform Cloud. The biggest downside was that I couldn’t justify the cost. I’ve since moved us to <a href="https://www.runatlantis.io/">Atlantis</a>, and it has worked well enough. Where atlantis falls short, we’ve written a bit of automation in our CI/CD pipelines to make up for it.</p>
<h3 id="github-actions-for-cicd-link-to-heading"><a href="https://docs.github.com/en/actions">GitHub actions</a> for CI/CD <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#github-actionshttpsdocsgithubcomenactions-for-cicd">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#github-actions-for-cicd-link-to-heading"></a></h3>
<p>🟧 <em>Endorse-ish</em></p>
<p>We, like most companies, host our code on GitHub. While originally using CircleCI, we’ve switched to Github actions for CI/CD. The marketplace of actions available to use for your workflows is large and the syntax is easy to read. The main downside of Github actions is their support for self-hosted workflows is very limited. We’re using EKS and <a href="https://github.com/actions/actions-runner-controller">actions-runner-controller</a> for our self-hosted runners hosted in EKS, but the integration is often buggy (but nothing we cannot work around). I hope GitHub takes Kuberentes self-hosting more seriously in the future.</p>
<h3 id="datadog-link-to-heading"><a href="https://www.datadoghq.com/">Datadog</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#datadoghttpswwwdatadoghqcom">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#datadog-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>Datadog is a great product, but it’s expensive. More than just expensive, I’m worried their cost model is especially bad for Kubernetes clusters and for AI companies. Kubernetes clusters are most cost-effective when you can rapidly spin up and down many nodes, as well as use spot instances. Datadog’s pricing model is based on the number of instances you have and that means even if we have no more than 10 instances up at once, if we spin up and down 20 instances in that hour, we pay for 20 instances. Similarly, AI companies tend to use GPUs heavily. While a CPU node could have dozens of services running at once, spreading the per node Datadog cost between many use cases, a GPU node is likely to have only one service using it, making the per <strong>service</strong> Datadog cost much higher.</p>
<h3 id="pagerduty-link-to-heading"><a href="https://www.pagerduty.com/">Pagerduty</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#pagerdutyhttpswwwpagerdutycom">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#pagerduty-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Pagerduty is a great product and well priced. We’ve never regretted picking it.</p>
<h2 id="software-link-to-heading">Software <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#software">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#software-link-to-heading"></a></h2>
<h3 id="schema-migration-by-diff-link-to-heading">Schema migration by Diff <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#schema-migration-by-diff">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#schema-migration-by-diff-link-to-heading"></a></h3>
<p>🟧 <em>Endorse-ish</em></p>
<p>Schema management is hard no matter how you do it, mostly because of how scary it is. Data is important and a bad schema migration can delete data. Of all the scary ways to solve this hard problem, I’ve been very happy with the idea of checking in the entire schema into git and then using a <a href="https://michaelsogos.github.io/pg-diff/">tool</a> to generate the SQL to sync the database to the schema.</p>
<h2 id="ubuntu-for-dev-servers-link-to-heading">Ubuntu for dev servers <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ubuntu-for-dev-servers">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#ubuntu-for-dev-servers-link-to-heading"></a></h2>
<p>🟩 <em>Endorse</em></p>
<p>Originally I tried making the dev servers the same base OS that our Kubernetes nodes ran on, thinking this would make the development environment closer to prod. In retrospect, the effort isn’t worth it. I’m happy we are sticking with Ubuntu for development servers. It’s a well-supported OS and has most of the packages we need.</p>
<h3 id="appsmith-link-to-heading"><a href="https://www.appsmith.com/">AppSmith</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#appsmithhttpswwwappsmithcom">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#appsmith-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>We frequently need to automate some process for an internal engineer: restart/promote/diagnose/etc. It’s easy enough for us to make APIs to solve these problems, but it’s a bit annoying debugging someone’s specific installation of a CLI/os/dependencies/etc. Being able to make a simple UI for engineers to interact with our scripts is very useful.</p>
<p>We self-host our AppSmith. It works … well enough. Of course there are things we would change, but it is enough for the “free” price point. I originally explored deeper integration with <a href="https://retool.com/">retool</a>, but I couldn’t justify the price point for what, at the time, was just a few integrations.</p>
<h3 id="helm-link-to-heading"><a href="https://helm.sh/">helm</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#helmhttpshelmsh">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#helm-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Helm v2 got a bad reputation (for good reason), but helm v3 has worked … well enough. There are still issues with deploying CRDs and educating developers on why their helm chart did not deploy correctly. Overall, however, helm works well enough as a way to package and deploy versioned Kubernetes objetcs and the Go templating language is difficult to debug, but powerful.</p>
<h3 id="helm-charts-in-ecroci-link-to-heading">helm charts in ECR(oci) <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#helm-charts-in-ecroci">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#helm-charts-in-ecroci-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Originally our helm charts were hosted inside S3 and downloaded with a plugin. The main downsides were needing to install a custom helm plugin and manually managing lifecycles. We’ve since switched to OCI stored helm charts and haven’t had any issues with this setup.</p>
<h3 id="bazel-link-to-heading"><a href="https://bazel.build/">bazel</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#bazelhttpsbazelbuild">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#bazel-link-to-heading"></a></h3>
<p>🟧 <em>Unsure</em></p>
<p>To be fair, a lot of smart people like bazel, so I’m sure it’s not a <em>bad</em> choice to make.</p>
<p>When deploying Go services, bazel personally feels like overkill. I think Bazel is a great choice if your last company used bazel, and you feel home sick. Otherwise, we have a build system that only a few engineers can dive deeply into, compared to GitHub Actions, where it seems everyone knows how to get their hands dirty.</p>
<h3 id="not-using-open-telemetry-early-link-to-heading">Not using open <a href="https://opentelemetry.io/">telemetry</a> early <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-open-telemetryhttpsopentelemetryio-early">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-using-open-telemetry-early-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>We started off sending metrics directly to DataDog using DataDog’s API. This has made it very hard to rip them out.</p>
<p>Open telemetry wasn’t as mature 4 years ago, but it’s gotten much better. I think the metrics telemetry is still a bit immature, but the tracing is great. I recommend using it from the start for any company.</p>
<h3 id="picking-renovatebot-over-dependabot-link-to-heading">Picking <a href="https://docs.renovatebot.com/">renovatebot</a> over <a href="https://github.com/dependabot">dependabot</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-renovatebothttpsdocsrenovatebotcom-over-dependabothttpsgithubcomdependabot">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#picking-renovatebot-over-dependabot-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>I honestly wish we had thought about “keep your dependencies up to date” sooner. When you wait on this too long, you end up with versions so old the upgrade process is long and inevitably buggy. Renovatebot has worked well with the flexibility to customize it to your needs. The biggest, and it’s pretty big, downside is that it’s VERY complicated to setup and debug. I guess it’s the best of all the bad options.</p>
<h3 id="kubernetes-link-to-heading"><a href="https://kubernetes.io/">Kubernetes</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#kuberneteshttpskubernetesio">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#kubernetes-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>You need <strong>something</strong> to host your long running services. Kuberentes is a popular choice and it’s worked well for us. The Kubernetes community has done a great job integrating AWS services (like load balancers, DNS, etc) into the Kubernetes ecosystem. The biggest downside with any flexible system is that there are a lot of ways to use it, and any system with a lot of ways to use has a lot of ways to use wrong.</p>
<blockquote>
<p>any system with a lot of ways to use has a lot of ways to use wrong</p>
<ul>
<li>Jack Lindamood</li>
</ul>
</blockquote>
<h3 id="buying-our-own-ips-link-to-heading">Buying our own IPs <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#buying-our-own-ips">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#buying-our-own-ips-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>If you work with external partners, you’ll frequently need to publish a whitelist of your IPs for them. Unfortunately, you may later develop more systems that need their own IPs. Buying your own IP block is a great way to avoid this by giving the external partner a larger CIDR block to whitelist.</p>
<h3 id="picking-flux-for-k8s-gitops-link-to-heading">Picking <a href="https://fluxcd.io/">Flux</a> for k8s GitOps <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-fluxhttpsfluxcdio-for-k8s-gitops">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#picking-flux-for-k8s-gitops-link-to-heading"></a></h3>
<p>🟩 <em>No Regrets</em></p>
<p>An early GitOps choice for Kubernetes was to decide between ArgoCD and Flux: I went with Flux (v1 at the time). It’s worked very well. We’re currently using Flux 2. The only downside is we’ve had to make our own tooling to help people understand the state of their deployments.</p>
<p>I hear great things about ArgoCD, so I’m sure if you picked that you’re also safe.</p>
<h3 id="karpenter-for-node-management-link-to-heading"><a href="https://karpenter.sh/">Karpenter</a> for node management <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#karpenterhttpskarpentersh-for-node-management">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#karpenter-for-node-management-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>If you’re using EKS (and not fully on Fargate), you should be using Karpenter. 100% full stop. We’ve used other autoscalers, including the default Kubernetes autoscaler and <a href="https://spot.io/">SpotInst</a>. Between them all, Karpenter has been the most reliable and the most cost-effective.</p>
<h3 id="using-sealedsecrets-to-manage-k8s-secrets-link-to-heading">Using <a href="https://github.com/bitnami-labs/sealed-secrets">SealedSecrets</a> to manage k8s secrets <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-sealedsecretshttpsgithubcombitnami-labssealed-secrets-to-manage-k8s-secrets">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#using-sealedsecrets-to-manage-k8s-secrets-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>My original thought was to push secret management to something GitOps styled. The two main drawbacks of using sealed-secrets were:</p>
<ul>
<li>It was more complicated for less infra knowledgeable developers to create/update secrets</li>
<li>We lost all the existing automations that AWS has around rotating secrets (<a href="https://aws.amazon.com/blogs/security/rotate-amazon-rds-database-credentials-automatically-with-aws-secrets-manager/">for example</a>)</li>
</ul>
<h3 id="using-externalsecrets-to-manage-k8s-secrets-link-to-heading">Using <a href="https://github.com/external-secrets/external-secrets">ExternalSecrets</a> to manage k8s secrets <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-externalsecretshttpsgithubcomexternal-secretsexternal-secrets-to-manage-k8s-secrets">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#using-externalsecrets-to-manage-k8s-secrets-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>ExternalSecrets has worked very well to sync AWS -> Kubernetes secrets. The process is simple for developers to understand and lets us take advantage of terraform as a way to easily create/update the secrets inside AWS, as well as give users a UI to use to create/update the secrets.</p>
<h3 id="using-externaldns-to-manage-dns-link-to-heading">Using <a href="https://github.com/kubernetes-sigs/external-dns">ExternalDNS</a> to manage DNS <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-externaldnshttpsgithubcomkubernetes-sigsexternal-dns-to-manage-dns">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#using-externaldns-to-manage-dns-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>ExternalDNS is a great product. It syncs our Kubernetes -> Route53 DNS entries and has given us very little problems in the past 4 years.</p>
<h3 id="using-cert-manager-to-manage-ssl-certificates-link-to-heading">Using <a href="https://github.com/cert-manager/cert-manager">cert-manager</a> to manage SSL certificates <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-cert-managerhttpsgithubcomcert-managercert-manager-to-manage-ssl-certificates">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#using-cert-manager-to-manage-ssl-certificates-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Very intuitive to configure and has worked well with no issues. Highly recommend using it to create your Let’s Encrypt certificates for Kubernetes. The only downside is we sometimes have ANCIENT (SaaS problems am I right?) tech stack customers that don’t trust Let’s Encrypt, and you need to go get a paid cert for those.</p>
<h3 id="bottlerocket-for-eks-link-to-heading"><a href="https://aws.amazon.com/bottlerocket/">Bottlerocket</a> for EKS <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#bottlerockethttpsawsamazoncombottlerocket-for-eks">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#bottlerocket-for-eks-link-to-heading"></a></h3>
<p>🟥 <em>Regret</em></p>
<p>Our EKS cluster used to run on Bottlerocket. The main downside was we frequently ran into networking CSI issues and debugging the bottlerocket images were much harder than debugging the standard EKS AMIs. Using the <a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-optimized-ami.html">EKS optimized</a> AMIs for our nodes has given us no problems, and we still have a backdoor to debug the node itself when there are strange networking issues.</p>
<h3 id="picking-terraform-over-cloudformation-link-to-heading">Picking <a href="https://www.terraform.io/">Terraform</a> over <a href="https://aws.amazon.com/pm/cloudformation/">Cloudformation</a> <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-terraformhttpswwwterraformio-over-cloudformationhttpsawsamazoncompmcloudformation">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#picking-terraform-over-cloudformation-link-to-heading"></a></h3>
<p>🟩 <em>Endorse</em></p>
<p>Using Infrastructure as Code is a must for any company. Being in AWS, the two main choices are Cloudformation and Terraform. I’ve used both and don’t regret sticking with Terraform. It’s been easy to extend for other SaaS providers (like Pagerduty), the syntax is easier to read than CloudFormation, and hasn’t been a blocker or slowdown for us.</p>
<h3 id="not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading">Not using more code-ish IaC solutions (<a href="https://www.pulumi.com/">Pulumi</a>, <a href="https://aws.amazon.com/cdk/">CDK</a>, etc) <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-more-code-ish-iac-solutions-pulumihttpswwwpulumicom-cdkhttpsawsamazoncomcdk-etc">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading"></a></h3>
<p>🟩 <em>No Regrets</em></p>
<p>While Terraform and CloudFormation are data files (HCL and YAML/JSON) that describe your infrastructure, solutions like Pulumi or CDK allow you to write code that does the same. Code is of course powerful, but I’ve found the restrictive nature of Terraform’s HCL to be a benefit with reduced complexity. It’s not that it’s impossible to write complex Terraform: it’s just that it’s more obvious when it’s happening.</p>
<p>Some of these solutions, like Pulumi, were invented many years ago while Terraform lacked a lot of the features it has today. Newer versions of Terraform have integrated a lot of the features that we can use to reduce complexity. We instead use a middleground that generates basic skeletons of our Terraform code for parts we want to abstract away.</p>
<h3 id="not-using-a-network-mesh-istiolinkerdetc-link-to-heading">Not using a network mesh (<a href="https://istio.io/">istio</a>/<a href="https://linkerd.io/">linkerd</a>/etc) <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-a-network-mesh-istiohttpsistioiolinkerdhttpslinkerdioetc">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#not-using-a-network-mesh-istiolinkerdetc-link-to-heading"></a></h3>
<p>🟩 <em>No regrets</em></p>
<p>Network meshes are really cool and a lot of smart people tend to endorse them, so I’m convinced they are fine ideas. Unfortunately, I think companies underestimate the complexity of things. My general infrastructure advice is “less is better”.</p>
<h3 id="nginx-load-balancer-for-eks-ingress-link-to-heading"><a href="https://github.com/kubernetes/ingress-nginx">Nginx</a> load balancer for EKS ingress <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#nginxhttpsgithubcomkubernetesingress-nginx-load-balancer-for-eks-ingress">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#nginx-load-balancer-for-eks-ingress-link-to-heading"></a></h3>
<p>🟩 <em>No Regrets</em></p>
<p>Nginx is old, it’s stable, and it’s battle tested.</p>
<h2 id="homebrew-for-company-scripts-link-to-heading"><a href="https://brew.sh/">homebrew</a> for company scripts <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#homebrewhttpsbrewsh-for-company-scripts">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#homebrew-for-company-scripts-link-to-heading"></a></h2>
<p>🟩 <em>Endorse</em></p>
<p>Your company will likely need a way to distribute scripts and binaries for your engineers to use. Homebrew has worked <em>well enough</em> for both linux and Mac users as a way to distribute scripts and binaries.</p>
<h2 id="go-for-services-link-to-heading"><a href="https://go.dev/">Go</a> for services <a href="https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#gohttpsgodev-for-services">Link to heading</a><a aria-hidden="true" class="anchor-heading icon-link" href="#go-for-services-link-to-heading"></a></h2>
<p>🟩 <em>Endorse</em></p>
<p>Go has been easy for new engineers to pick up and is a great choice overall. For non-GPU services that are mostly network IO bound, Go should be your default language choice.</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#aws-link-to-heading" title="AWS Link to heading">AWS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#picking-aws-over-google-cloud-link-to-heading" title="Picking AWS over Google Cloud Link to heading">Picking AWS over Google Cloud Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#eks-link-to-heading" title="EKS Link to heading">EKS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#eks-managed-addons-link-to-heading" title="EKS managed addons Link to heading">EKS managed addons Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#rds-link-to-heading" title="RDS Link to heading">RDS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#redis-elasticache-link-to-heading" title="Redis ElastiCache Link to heading">Redis ElastiCache Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ecr-link-to-heading" title="ECR Link to heading">ECR Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#aws-vpn-link-to-heading" title="AWS VPN Link to heading">AWS VPN Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#aws-premium-support-link-to-heading" title="AWS premium support Link to heading">AWS premium support Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#control-tower-account-factory-for-terraform-link-to-heading" title="Control Tower Account Factory for Terraform Link to heading">Control Tower Account Factory for Terraform Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#process-link-to-heading" title="Process Link to heading">Process Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#automating-post-mortem-process-with-a-slack-bot-link-to-heading" title="Automating post-mortem process with a slack bot Link to heading">Automating post-mortem process with a slack bot Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-pager-dutys-incident-templates-link-to-heading" title="Using pager duty’s incident templates Link to heading">Using pager duty’s incident templates Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading" title="Reviewing pager duty tickets on a regular cadence Link to heading">Reviewing pager duty tickets on a regular cadence Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#monthly-cost-tracking-meetings-link-to-heading" title="Monthly cost tracking meetings Link to heading">Monthly cost tracking meetings Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#manging-post-mortems-in-datadog-or-pager-duty-link-to-heading" title="Manging post mortems in datadog or pager duty Link to heading">Manging post mortems in datadog or pager duty Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-using-function-as-a-servicefaas-more-link-to-heading" title="Not using Function as a Service(FaaS) more Link to heading">Not using Function as a Service(FaaS) more Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#gitops-link-to-heading" title="GitOps Link to heading">GitOps Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#prioritizing-team-efficiency-over-external-demands-link-to-heading" title="Prioritizing team efficiency over external demands Link to heading">Prioritizing team efficiency over external demands Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#multiple-applications-sharing-a-database-link-to-heading" title="Multiple applications sharing a database Link to heading">Multiple applications sharing a database Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#saas-link-to-heading" title="SaaS Link to heading">SaaS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-adopting-an-identity-platform-early-on-link-to-heading" title="Not adopting an identity platform early on Link to heading">Not adopting an identity platform early on Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#notion-link-to-heading" title="Notion Link to heading">Notion Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#slack-link-to-heading" title="Slack Link to heading">Slack Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#moving-off-jira-onto-linear-link-to-heading" title="Moving off JIRA onto linear Link to heading">Moving off JIRA onto linear Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-using-terraform-cloud-link-to-heading" title="Not using Terraform Cloud Link to heading">Not using Terraform Cloud Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#github-actions-for-cicd-link-to-heading" title="GitHub actions for CI/CD Link to heading">GitHub actions for CI/CD Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#datadog-link-to-heading" title="Datadog Link to heading">Datadog Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pagerduty-link-to-heading" title="Pagerduty Link to heading">Pagerduty Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#software-link-to-heading" title="Software Link to heading">Software Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#schema-migration-by-diff-link-to-heading" title="Schema migration by Diff Link to heading">Schema migration by Diff Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ubuntu-for-dev-servers-link-to-heading" title="Ubuntu for dev servers Link to heading">Ubuntu for dev servers Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#appsmith-link-to-heading" title="AppSmith Link to heading">AppSmith Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#helm-link-to-heading" title="helm Link to heading">helm Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#helm-charts-in-ecroci-link-to-heading" title="helm charts in ECR(oci) Link to heading">helm charts in ECR(oci) Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#bazel-link-to-heading" title="bazel Link to heading">bazel Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-using-open-telemetry-early-link-to-heading" title="Not using open telemetry early Link to heading">Not using open telemetry early Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#picking-renovatebot-over-dependabot-link-to-heading" title="Picking renovatebot over dependabot Link to heading">Picking renovatebot over dependabot Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#kubernetes-link-to-heading" title="Kubernetes Link to heading">Kubernetes Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#buying-our-own-ips-link-to-heading" title="Buying our own IPs Link to heading">Buying our own IPs Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#picking-flux-for-k8s-gitops-link-to-heading" title="Picking Flux for k8s GitOps Link to heading">Picking Flux for k8s GitOps Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#karpenter-for-node-management-link-to-heading" title="Karpenter for node management Link to heading">Karpenter for node management Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-sealedsecrets-to-manage-k8s-secrets-link-to-heading" title="Using SealedSecrets to manage k8s secrets Link to heading">Using SealedSecrets to manage k8s secrets Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-externalsecrets-to-manage-k8s-secrets-link-to-heading" title="Using ExternalSecrets to manage k8s secrets Link to heading">Using ExternalSecrets to manage k8s secrets Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-externaldns-to-manage-dns-link-to-heading" title="Using ExternalDNS to manage DNS Link to heading">Using ExternalDNS to manage DNS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-cert-manager-to-manage-ssl-certificates-link-to-heading" title="Using cert-manager to manage SSL certificates Link to heading">Using cert-manager to manage SSL certificates Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#bottlerocket-for-eks-link-to-heading" title="Bottlerocket for EKS Link to heading">Bottlerocket for EKS Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#picking-terraform-over-cloudformation-link-to-heading" title="Picking Terraform over Cloudformation Link to heading">Picking Terraform over Cloudformation Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading" title="Not using more code-ish IaC solutions (Pulumi, CDK, etc) Link to heading">Not using more code-ish IaC solutions (Pulumi, CDK, etc) Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#not-using-a-network-mesh-istiolinkerdetc-link-to-heading" title="Not using a network mesh (istio/linkerd/etc) Link to heading">Not using a network mesh (istio/linkerd/etc) Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#nginx-load-balancer-for-eks-ingress-link-to-heading" title="Nginx load balancer for EKS ingress Link to heading">Nginx load balancer for EKS ingress Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#homebrew-for-company-scripts-link-to-heading" title="homebrew for company scripts Link to heading">homebrew for company scripts Link to heading</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#go-for-services-link-to-heading" title="Go for services Link to heading">Go for services Link to heading</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"po3eez1w96f1vxyjawiogz5","title":"(Almost) Every infrastructure decision I endorse or regret after 4 years running infrastructure at a startup","desc":"","updated":1707806615800,"created":1707806576040,"custom":{},"fname":"dev.infrastructure.every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup","type":"note","vault":{"fsPath":"vault"},"contentHash":"098995da49f9dafa2d0510e7ead9e2f9","links":[],"anchors":{"aws-link-to-heading":{"type":"header","text":"AWS Link to heading","value":"aws-link-to-heading","line":14,"column":0,"depth":2},"picking-aws-over-google-cloud-link-to-heading":{"type":"header","text":"Picking AWS over Google Cloud Link to heading","value":"picking-aws-over-google-cloud-link-to-heading","line":16,"column":0,"depth":3},"eks-link-to-heading":{"type":"header","text":"EKS Link to heading","value":"eks-link-to-heading","line":24,"column":0,"depth":3},"eks-managed-addons-link-to-heading":{"type":"header","text":"EKS managed addons Link to heading","value":"eks-managed-addons-link-to-heading","line":30,"column":0,"depth":3},"rds-link-to-heading":{"type":"header","text":"RDS Link to heading","value":"rds-link-to-heading","line":36,"column":0,"depth":3},"redis-elasticache-link-to-heading":{"type":"header","text":"Redis ElastiCache Link to heading","value":"redis-elasticache-link-to-heading","line":42,"column":0,"depth":3},"ecr-link-to-heading":{"type":"header","text":"ECR Link to heading","value":"ecr-link-to-heading","line":50,"column":0,"depth":3},"aws-vpn-link-to-heading":{"type":"header","text":"AWS VPN Link to heading","value":"aws-vpn-link-to-heading","line":56,"column":0,"depth":3},"aws-premium-support-link-to-heading":{"type":"header","text":"AWS premium support Link to heading","value":"aws-premium-support-link-to-heading","line":62,"column":0,"depth":3},"control-tower-account-factory-for-terraform-link-to-heading":{"type":"header","text":"Control Tower Account Factory for Terraform Link to heading","value":"control-tower-account-factory-for-terraform-link-to-heading","line":68,"column":0,"depth":3},"process-link-to-heading":{"type":"header","text":"Process Link to heading","value":"process-link-to-heading","line":74,"column":0,"depth":2},"automating-post-mortem-process-with-a-slack-bot-link-to-heading":{"type":"header","text":"Automating post-mortem process with a slack bot Link to heading","value":"automating-post-mortem-process-with-a-slack-bot-link-to-heading","line":76,"column":0,"depth":3},"using-pager-dutys-incident-templates-link-to-heading":{"type":"header","text":"Using pager duty’s incident templates Link to heading","value":"using-pager-dutys-incident-templates-link-to-heading","line":84,"column":0,"depth":2},"reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading":{"type":"header","text":"Reviewing pager duty tickets on a regular cadence Link to heading","value":"reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading","line":90,"column":0,"depth":3},"monthly-cost-tracking-meetings-link-to-heading":{"type":"header","text":"Monthly cost tracking meetings Link to heading","value":"monthly-cost-tracking-meetings-link-to-heading","line":103,"column":0,"depth":3},"manging-post-mortems-in-datadog-or-pager-duty-link-to-heading":{"type":"header","text":"Manging post mortems in datadog or pager duty Link to heading","value":"manging-post-mortems-in-datadog-or-pager-duty-link-to-heading","line":111,"column":0,"depth":3},"not-using-function-as-a-servicefaas-more-link-to-heading":{"type":"header","text":"Not using Function as a Service(FaaS) more Link to heading","value":"not-using-function-as-a-servicefaas-more-link-to-heading","line":117,"column":0,"depth":3},"gitops-link-to-heading":{"type":"header","text":"GitOps Link to heading","value":"gitops-link-to-heading","line":125,"column":0,"depth":3},"prioritizing-team-efficiency-over-external-demands-link-to-heading":{"type":"header","text":"Prioritizing team efficiency over external demands Link to heading","value":"prioritizing-team-efficiency-over-external-demands-link-to-heading","line":133,"column":0,"depth":3},"multiple-applications-sharing-a-database-link-to-heading":{"type":"header","text":"Multiple applications sharing a database Link to heading","value":"multiple-applications-sharing-a-database-link-to-heading","line":139,"column":0,"depth":3},"saas-link-to-heading":{"type":"header","text":"SaaS Link to heading","value":"saas-link-to-heading","line":155,"column":0,"depth":2},"not-adopting-an-identity-platform-early-on-link-to-heading":{"type":"header","text":"Not adopting an identity platform early on Link to heading","value":"not-adopting-an-identity-platform-early-on-link-to-heading","line":157,"column":0,"depth":3},"notion-link-to-heading":{"type":"header","text":"Notion Link to heading","value":"notion-link-to-heading","line":163,"column":0,"depth":3},"slack-link-to-heading":{"type":"header","text":"Slack Link to heading","value":"slack-link-to-heading","line":169,"column":0,"depth":3},"moving-off-jira-onto-linear-link-to-heading":{"type":"header","text":"Moving off JIRA onto linear Link to heading","value":"moving-off-jira-onto-linear-link-to-heading","line":179,"column":0,"depth":3},"not-using-terraform-cloud-link-to-heading":{"type":"header","text":"Not using Terraform Cloud Link to heading","value":"not-using-terraform-cloud-link-to-heading","line":185,"column":0,"depth":3},"github-actions-for-cicd-link-to-heading":{"type":"header","text":"GitHub actions for CI/CD Link to heading","value":"github-actions-for-cicd-link-to-heading","line":191,"column":0,"depth":3},"datadog-link-to-heading":{"type":"header","text":"Datadog Link to heading","value":"datadog-link-to-heading","line":197,"column":0,"depth":3},"pagerduty-link-to-heading":{"type":"header","text":"Pagerduty Link to heading","value":"pagerduty-link-to-heading","line":203,"column":0,"depth":3},"software-link-to-heading":{"type":"header","text":"Software Link to heading","value":"software-link-to-heading","line":209,"column":0,"depth":2},"schema-migration-by-diff-link-to-heading":{"type":"header","text":"Schema migration by Diff Link to heading","value":"schema-migration-by-diff-link-to-heading","line":211,"column":0,"depth":3},"ubuntu-for-dev-servers-link-to-heading":{"type":"header","text":"Ubuntu for dev servers Link to heading","value":"ubuntu-for-dev-servers-link-to-heading","line":217,"column":0,"depth":2},"appsmith-link-to-heading":{"type":"header","text":"AppSmith Link to heading","value":"appsmith-link-to-heading","line":223,"column":0,"depth":3},"helm-link-to-heading":{"type":"header","text":"helm Link to heading","value":"helm-link-to-heading","line":231,"column":0,"depth":3},"helm-charts-in-ecroci-link-to-heading":{"type":"header","text":"helm charts in ECR(oci) Link to heading","value":"helm-charts-in-ecroci-link-to-heading","line":237,"column":0,"depth":3},"bazel-link-to-heading":{"type":"header","text":"bazel Link to heading","value":"bazel-link-to-heading","line":243,"column":0,"depth":3},"not-using-open-telemetry-early-link-to-heading":{"type":"header","text":"Not using open telemetry early Link to heading","value":"not-using-open-telemetry-early-link-to-heading","line":251,"column":0,"depth":3},"picking-renovatebot-over-dependabot-link-to-heading":{"type":"header","text":"Picking renovatebot over dependabot Link to heading","value":"picking-renovatebot-over-dependabot-link-to-heading","line":259,"column":0,"depth":3},"kubernetes-link-to-heading":{"type":"header","text":"Kubernetes Link to heading","value":"kubernetes-link-to-heading","line":265,"column":0,"depth":3},"buying-our-own-ips-link-to-heading":{"type":"header","text":"Buying our own IPs Link to heading","value":"buying-our-own-ips-link-to-heading","line":275,"column":0,"depth":3},"picking-flux-for-k8s-gitops-link-to-heading":{"type":"header","text":"Picking Flux for k8s GitOps Link to heading","value":"picking-flux-for-k8s-gitops-link-to-heading","line":281,"column":0,"depth":3},"karpenter-for-node-management-link-to-heading":{"type":"header","text":"Karpenter for node management Link to heading","value":"karpenter-for-node-management-link-to-heading","line":289,"column":0,"depth":3},"using-sealedsecrets-to-manage-k8s-secrets-link-to-heading":{"type":"header","text":"Using SealedSecrets to manage k8s secrets Link to heading","value":"using-sealedsecrets-to-manage-k8s-secrets-link-to-heading","line":295,"column":0,"depth":3},"using-externalsecrets-to-manage-k8s-secrets-link-to-heading":{"type":"header","text":"Using ExternalSecrets to manage k8s secrets Link to heading","value":"using-externalsecrets-to-manage-k8s-secrets-link-to-heading","line":304,"column":0,"depth":3},"using-externaldns-to-manage-dns-link-to-heading":{"type":"header","text":"Using ExternalDNS to manage DNS Link to heading","value":"using-externaldns-to-manage-dns-link-to-heading","line":310,"column":0,"depth":3},"using-cert-manager-to-manage-ssl-certificates-link-to-heading":{"type":"header","text":"Using cert-manager to manage SSL certificates Link to heading","value":"using-cert-manager-to-manage-ssl-certificates-link-to-heading","line":316,"column":0,"depth":3},"bottlerocket-for-eks-link-to-heading":{"type":"header","text":"Bottlerocket for EKS Link to heading","value":"bottlerocket-for-eks-link-to-heading","line":322,"column":0,"depth":3},"picking-terraform-over-cloudformation-link-to-heading":{"type":"header","text":"Picking Terraform over Cloudformation Link to heading","value":"picking-terraform-over-cloudformation-link-to-heading","line":328,"column":0,"depth":3},"not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading":{"type":"header","text":"Not using more code-ish IaC solutions (Pulumi, CDK, etc) Link to heading","value":"not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading","line":334,"column":0,"depth":3},"not-using-a-network-mesh-istiolinkerdetc-link-to-heading":{"type":"header","text":"Not using a network mesh (istio/linkerd/etc) Link to heading","value":"not-using-a-network-mesh-istiolinkerdetc-link-to-heading","line":342,"column":0,"depth":3},"nginx-load-balancer-for-eks-ingress-link-to-heading":{"type":"header","text":"Nginx load balancer for EKS ingress Link to heading","value":"nginx-load-balancer-for-eks-ingress-link-to-heading","line":348,"column":0,"depth":3},"homebrew-for-company-scripts-link-to-heading":{"type":"header","text":"homebrew for company scripts Link to heading","value":"homebrew-for-company-scripts-link-to-heading","line":354,"column":0,"depth":2},"go-for-services-link-to-heading":{"type":"header","text":"Go for services Link to heading","value":"go-for-services-link-to-heading","line":360,"column":0,"depth":2}},"children":[],"parent":"wjjq6sy13jsepua2azqg393","data":{}},"body":"\u003ch1 id=\"almost-every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup\"\u003e(Almost) Every infrastructure decision I endorse or regret after 4 years running infrastructure at a startup\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#almost-every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/\"\u003ehttps://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI’ve led infrastructure at a \u003ca href=\"https://cresta.com/careers/\"\u003estartup\u003c/a\u003e for the past 4 years that has had to scale quickly. From the beginning I made some core decisions that the company has had to stick to, for better or worse, these past four years. This post will list some of the major decisions made and if I endorse them for your startup, or if I regret them and advise you to pick something else.\u003c/p\u003e\n\u003ch2 id=\"aws-link-to-heading\"\u003eAWS \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#aws-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"picking-aws-over-google-cloud-link-to-heading\"\u003ePicking AWS over Google Cloud \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-aws-over-google-cloud\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#picking-aws-over-google-cloud-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEarly on, we were using both GCP and AWS. During that time, I had no idea who my “account manager” was for Google Cloud, while at the same time I had regular cadence meetings with our AWS account manager. There is a feel that Google lives on robots and automation, while Amazon lives with a customer focus. This support has helped us when evaluating new AWS services. Besides support, AWS has done a great job around stability and minimizing backwards incompatible API changes.\u003c/p\u003e\n\u003cp\u003eThere was a time when Google Cloud was the choice for Kubernetes clusters, especially when there was ambiguity around if AWS would invest in EKS over \u003ca href=\"https://aws.amazon.com/ecs/\"\u003eECS\u003c/a\u003e. Now though, with all the extra Kubernetes integrations around AWS services (external-dns, external-secrets, etc), this is not much of any issue anymore.\u003c/p\u003e\n\u003ch3 id=\"eks-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/eks/\"\u003eEKS\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ekshttpsawsamazoncomeks\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#eks-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eUnless you’re penny-pinching (and your time is free), there’s no reason to run your own control plane rather than use EKS. The main advantage of using an alternative in AWS, like ECS, is the deep integration into AWS services. Luckily, Kubernetes has caught up in many ways: for example, using external-dns to integrate with Route53.\u003c/p\u003e\n\u003ch3 id=\"eks-managed-addons-link-to-heading\"\u003eEKS \u003ca href=\"https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html\"\u003emanaged addons\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#eks-managed-addonshttpsdocsawsamazoncomekslatestuserguideeks-add-onshtml\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#eks-managed-addons-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟧 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe started with EKS managed addons because I thought it was the “right” way to use EKS. Unfortunately, we always ran into a situation where we needed to customize the installation itself. Maybe the CPU requests, the image tag, or some configmap. We’ve since switched to using helm charts for what were add-ons and things are running much better with promotions that fit similar to our existing GitOps pipelines.\u003c/p\u003e\n\u003ch3 id=\"rds-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/rds/\"\u003eRDS\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#rdshttpsawsamazoncomrds\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#rds-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eData is the most critical part of your infrastructure. You lose your network: that’s downtime. You lose your data: that’s a company ending event. The markup cost of using RDS (or any managed database) is worth it.\u003c/p\u003e\n\u003ch3 id=\"redis-elasticache-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/elasticache/redis/\"\u003eRedis ElastiCache\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#redis-elasticachehttpsawsamazoncomelasticacheredis\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#redis-elasticache-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eRedis has worked very well as a cache and general use product. It’s fast, the API is simple and well documented, and the implementation is battle tested. Unlike other cache options, like Memcached, Redis has a lot of features that make it useful for more than just caching. It’s a great swiss army knife of “do fast data thing”.\u003c/p\u003e\n\u003cp\u003ePart of me is unsure what the state of Redis is for Cloud Providers, but I feel it’s so widely used by AWS customers that AWS will continue to support it well.\u003c/p\u003e\n\u003ch3 id=\"ecr-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/ecr/\"\u003eECR\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ecrhttpsawsamazoncomecr\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ecr-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe originally hosted on \u003ca href=\"https://quay.io/\"\u003equay.io\u003c/a\u003e. It was a hot mess of stability problems. Since moving to ECR, things have been much more stable. The deeper permission integrations with EKS nodes or dev servers has also been a big plus.\u003c/p\u003e\n\u003ch3 id=\"aws-vpn-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/vpn/\"\u003eAWS VPN\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws-vpnhttpsawsamazoncomvpn\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#aws-vpn-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThere are Zero Trust VPN alternatives from companies like CloudFlare. I’m sure these products work well, but a VPN is just so dead simple to setup and understand (“simplicity is preferable” is my mantra). We use Okta to manage our VPN access and it’s been a great experience.\u003c/p\u003e\n\u003ch3 id=\"aws-premium-support-link-to-heading\"\u003eAWS \u003ca href=\"https://aws.amazon.com/premiumsupport/\"\u003epremium support\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#aws-premium-supporthttpsawsamazoncompremiumsupport\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#aws-premium-support-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟧 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eIt’s super expensive: almost (if not more) than the cost of another engineer. I think if we had very little in house knowledge of AWS, it would be worth it.\u003c/p\u003e\n\u003ch3 id=\"control-tower-account-factory-for-terraform-link-to-heading\"\u003e\u003ca href=\"https://docs.aws.amazon.com/controltower/latest/userguide/aft-overview.html\"\u003eControl Tower Account Factory for Terraform\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#control-tower-account-factory-for-terraformhttpsdocsawsamazoncomcontroltowerlatestuserguideaft-overviewhtml\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#control-tower-account-factory-for-terraform-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eBefore integrating AFT, using control tower was a pain mostly because it was very difficult to automate. We’ve since integrated AFT into our stack and spinning up accounts has worked well since. Another thing AFT makes easier is standardizing tags for our accounts. For example, our production accounts have a tag that we can then use to make peering decisions. Tags work better than organizations for us because the decision of “what properties describe this account” isn’t always a tree structure.\u003c/p\u003e\n\u003ch2 id=\"process-link-to-heading\"\u003eProcess \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#process\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#process-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"automating-post-mortem-process-with-a-slack-bot-link-to-heading\"\u003eAutomating post-mortem process with a slack bot \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#automating-post-mortem-process-with-a-slack-bot\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#automating-post-mortem-process-with-a-slack-bot-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEveryone is busy. It can feel like you’re the “bad guy” reminding people to fill out the post-mortem. Making a robot be the bad guy had been great. It streamlines the process by nudging people to follow the SEV and post-mortem procedure.\u003c/p\u003e\n\u003cp\u003eIt doesn’t have to be too complex to start. Just the basics of “It’s been an hour of no messages. Someone post an update” or “It’s been a day with no calendar invite. Someone schedule the post-mortem meeting” can go a long ways.\u003c/p\u003e\n\u003ch2 id=\"using-pager-dutys-incident-templates-link-to-heading\"\u003eUsing pager duty’s incident \u003ca href=\"https://response.pagerduty.com/after/post_mortem_template/\"\u003etemplates\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-pager-dutys-incident-templateshttpsresponsepagerdutycomafterpost_mortem_template\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-pager-dutys-incident-templates-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWhy reinvent the wheel? PagerDuty publishes a template of what to do during an incident. We’ve customized it a bit, which is where the flexibility of Notion comes in handy, but it’s been a great starting point.\u003c/p\u003e\n\u003ch3 id=\"reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading\"\u003eReviewing pager duty tickets on a regular cadence \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#reviewing-pager-duty-tickets-on-a-regular-cadence\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reviewing-pager-duty-tickets-on-a-regular-cadence-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAlerting for a company goes like this:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThere are no alerts at all. We need alerts.\u003c/li\u003e\n\u003cli\u003eWe have alerts. There are too many alerts, so we ignore them.\u003c/li\u003e\n\u003cli\u003eWe’ve prioritized the alerts. Now only the critical ones wake me up.\u003c/li\u003e\n\u003cli\u003eWe ignore the non-critical alerts.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWe have a two tiered alerting setup: critical and non-critical. Critical alerts wake people up. Non-critical alerts are expected to ping the on-call async (email). The problem is that non-critical alerts are often ignored. To resolve this, we have regular (usually every 2 weeks) PagerDuty review meetings where we go over all our alerts. For the critical alerts, we discuss if it should stay critical. Then, we iterate the non-critical alerts (usually picking a few each meeting) and discuss what we can do to clear those out as well (usually tweaking the threshold or creating some automation).\u003c/p\u003e\n\u003ch3 id=\"monthly-cost-tracking-meetings-link-to-heading\"\u003eMonthly cost tracking meetings \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#monthly-cost-tracking-meetings\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#monthly-cost-tracking-meetings-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEarly on, I set up a monthly meeting to go over all of our SaaS cost (AWS, DataDog, etc). Previously, this was just something reviewed from a finance perspective, but it’s hard for them to answer general questions around “does this cost number seem right”. During these meetings, usually attended by both finance and engineering, we go over every software related bill we get and do a gut check of “does this cost sound right”. We dive into the numbers of each of the high bills and try to break them down.\u003c/p\u003e\n\u003cp\u003eFor example, with AWS we group items by tag and separate them by account. These two dimensions, combined with the general service name (EC2, RDS, etc) gives us a good idea of where the major cost drivers are. Some things we do with this data are go deeper into spot instance usage or which accounts contribute to networking costs the most. But don’t stop at just AWS: go into all the major spend sinks your company has.\u003c/p\u003e\n\u003ch3 id=\"manging-post-mortems-in-datadog-or-pager-duty-link-to-heading\"\u003eManging post mortems in datadog or pager duty \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#manging-post-mortems-in-datadog-or-pager-duty\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#manging-post-mortems-in-datadog-or-pager-duty-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEveryone should do post-mortems. Both \u003ca href=\"https://www.datadoghq.com/product/incident-management/\"\u003eDataDog\u003c/a\u003e and PagerDuty have integrations to manage writing post-mortems and we tried each. Unfortunately, they both make it hard to customize the post-mortem process. Given how powerful wiki-ish tools like Notion are, I think it’s better to use a tool like that to manage post-mortems.\u003c/p\u003e\n\u003ch3 id=\"not-using-function-as-a-servicefaas-more-link-to-heading\"\u003eNot using Function as a Service(FaaS) more \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-function-as-a-servicefaas-more\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-using-function-as-a-servicefaas-more-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThere are no great FaaS options for running GPU workloads, which is why we could never go fully FaaS. However, many CPU workloads could be FaaS (\u003ca href=\"https://aws.amazon.com/lambda/\"\u003elambda\u003c/a\u003e, etc). The biggest counter-point people bring up is the cost. They’ll say something like “This EC2 instance type running 24/7 at full load is way less expensive than a Lambda running”. This is true, but it’s also a false comparison. Nobody runs a service at 100% CPU utilization and moves on with their life. It’s always on some scaler that says “Never reach 100%. At 70% scale up another”. And it’s always unclear when to scale back down, instead it’s a heuristic of “If we’ve been at 10% for 10 minutes, scale down”. Then, people assume spot instances when they aren’t always on market.\u003c/p\u003e\n\u003cp\u003eAnother hidden benefit of Lambda is that it’s very easy to track costs with high accuracy. When deploying services in Kubernetes, cost can get hidden behind other per node objects or other services running on the same node.\u003c/p\u003e\n\u003ch3 id=\"gitops-link-to-heading\"\u003e\u003ca href=\"https://www.gitops.tech/\"\u003eGitOps\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#gitopshttpswwwgitopstech\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#gitops-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eGitOps has so far scaled pretty well and we use it for many parts of our infrastructure: services, terraform, and config to name a few. The main downside is that pipeline oriented workflows give a clear picture of “here is the box that means you did a commit and here are arrows that go from that box to the end of the pipeline”. With GitOps we’ve had to invest in tooling to help people answer questions like “I did a commit: why isn’t it deployed yet”.\u003c/p\u003e\n\u003cp\u003eEven still, the flexibility of GitOps has been a huge win and I strongly recommend it for your company.\u003c/p\u003e\n\u003ch3 id=\"prioritizing-team-efficiency-over-external-demands-link-to-heading\"\u003ePrioritizing team efficiency over external demands \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#prioritizing-team-efficiency-over-external-demands\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prioritizing-team-efficiency-over-external-demands-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eMost likely, your company is not selling the infrastructure itself, but another product. This puts pressure on the team to deliver features and not scale your own workload. But just like airplanes tell you to put your own mask on first, you need to make sure your team is efficient. With rare exception, I have never regretted prioritizing taking time to write some automation or documentation.\u003c/p\u003e\n\u003ch3 id=\"multiple-applications-sharing-a-database-link-to-heading\"\u003eMultiple applications sharing a database \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#multiple-applications-sharing-a-database\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#multiple-applications-sharing-a-database-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eLike most tech debt, we didn’t \u003cem\u003emake\u003c/em\u003e this decision, we just did not \u003cem\u003enot\u003c/em\u003e make this decision. Eventually, someone wants the product to do a new thing and makes a new table. This feels good because there are now foreign keys between the two tables. But since \u003cem\u003eeverything\u003c/em\u003e is owned by \u003cem\u003esomeone\u003c/em\u003e and that \u003cem\u003esomeone\u003c/em\u003e is a row in a table, you’ve got foreign keys between all objects in the entire stack.\u003c/p\u003e\n\u003cp\u003eSince the database is used by \u003cem\u003eeveryone\u003c/em\u003e, it becomes cared for by \u003cem\u003eno one\u003c/em\u003e. Startups don’t have the luxury of a DBA, and everything owned by \u003cem\u003eno one\u003c/em\u003e is owned by \u003cem\u003einfrastructure\u003c/em\u003e eventually.\u003c/p\u003e\n\u003cp\u003eThe biggest problem with a shared database are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCrud accumulates in the database, and it’s unclear if it can be deleted.\u003c/li\u003e\n\u003cli\u003eWhen there are performance issues, infrastructure (without deep product knowledge) has to debug the database and figure out who to redirect to\u003c/li\u003e\n\u003cli\u003eDatabase users can push bad code that does bad things to the database. These bad things may PagerDuty alert the infrastructure team (since they own the database). It feels bad to wake up one team for another team’s issue. With application owned databases, the application team is the first responder.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAll that said, I’m not against stacks that want to share a single database either. Just be aware of the tradeoffs above and have a good story for how you’ll manage them.\u003c/p\u003e\n\u003ch2 id=\"saas-link-to-heading\"\u003eSaaS \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#saas\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#saas-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"not-adopting-an-identity-platform-early-on-link-to-heading\"\u003eNot adopting an identity platform early on \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-adopting-an-identity-platform-early-on\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-adopting-an-identity-platform-early-on-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eI stuck with Google Workspace at the start, using it to create groups for employees as a way to assign permissions. It just isn’t flexible enough. In retrospect, I wish we had picked up \u003ca href=\"https://www.okta.com/\"\u003eOkta\u003c/a\u003e much sooner. It’s worked very well, has integrations for almost everything, and solves a lot of compliance/security aspects. Just lean into an identity solution early on and only accept SaaS vendors that integrate with it.\u003c/p\u003e\n\u003ch3 id=\"notion-link-to-heading\"\u003e\u003ca href=\"https://www.notion.so/\"\u003eNotion\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#notionhttpswwwnotionso\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#notion-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEvery company needs a place to put documentation. Notion has been a great choice and worked much easier than things I’ve used in the past (Wikis, Google Docs, Confluence, etc). Their Database concept for page organization has also allowed me to create pretty sophisticated organizations of pages.\u003c/p\u003e\n\u003ch3 id=\"slack-link-to-heading\"\u003e\u003ca href=\"https://slack.com/\"\u003eSlack\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#slackhttpsslackcom\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#slack-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThank god I don’t have to use HipChat anymore. Slack is great as a default communication tool, but to reduce stress and noise I recommend:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUsing threads to condense communication\u003c/li\u003e\n\u003cli\u003eCommunicating expectations that people may not respond quickly to messages\u003c/li\u003e\n\u003cli\u003eDiscourage private messages and encourage public channels.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"moving-off-jira-onto-linear-link-to-heading\"\u003eMoving off \u003ca href=\"https://www.atlassian.com/software/jira\"\u003eJIRA\u003c/a\u003e onto \u003ca href=\"https://linear.app/\"\u003elinear\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#moving-off-jirahttpswwwatlassiancomsoftwarejira-onto-linearhttpslinearapp\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#moving-off-jira-onto-linear-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNot even close. JIRA is so bloated I’m worried running it in an AI company it would just turn fully sentient. When I’m using Linear, I will often think “I wonder if I can do X” and then I’ll try and I can!\u003c/p\u003e\n\u003ch3 id=\"not-using-terraform-cloud-link-to-heading\"\u003eNot using \u003ca href=\"https://www.terraform.io/cloud\"\u003eTerraform Cloud\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-terraform-cloudhttpswwwterraformiocloud\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-using-terraform-cloud-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eNo Regrets\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eEarly on, I tried to migrate our terraform to Terraform Cloud. The biggest downside was that I couldn’t justify the cost. I’ve since moved us to \u003ca href=\"https://www.runatlantis.io/\"\u003eAtlantis\u003c/a\u003e, and it has worked well enough. Where atlantis falls short, we’ve written a bit of automation in our CI/CD pipelines to make up for it.\u003c/p\u003e\n\u003ch3 id=\"github-actions-for-cicd-link-to-heading\"\u003e\u003ca href=\"https://docs.github.com/en/actions\"\u003eGitHub actions\u003c/a\u003e for CI/CD \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#github-actionshttpsdocsgithubcomenactions-for-cicd\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#github-actions-for-cicd-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟧 \u003cem\u003eEndorse-ish\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe, like most companies, host our code on GitHub. While originally using CircleCI, we’ve switched to Github actions for CI/CD. The marketplace of actions available to use for your workflows is large and the syntax is easy to read. The main downside of Github actions is their support for self-hosted workflows is very limited. We’re using EKS and \u003ca href=\"https://github.com/actions/actions-runner-controller\"\u003eactions-runner-controller\u003c/a\u003e for our self-hosted runners hosted in EKS, but the integration is often buggy (but nothing we cannot work around). I hope GitHub takes Kuberentes self-hosting more seriously in the future.\u003c/p\u003e\n\u003ch3 id=\"datadog-link-to-heading\"\u003e\u003ca href=\"https://www.datadoghq.com/\"\u003eDatadog\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#datadoghttpswwwdatadoghqcom\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#datadog-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eDatadog is a great product, but it’s expensive. More than just expensive, I’m worried their cost model is especially bad for Kubernetes clusters and for AI companies. Kubernetes clusters are most cost-effective when you can rapidly spin up and down many nodes, as well as use spot instances. Datadog’s pricing model is based on the number of instances you have and that means even if we have no more than 10 instances up at once, if we spin up and down 20 instances in that hour, we pay for 20 instances. Similarly, AI companies tend to use GPUs heavily. While a CPU node could have dozens of services running at once, spreading the per node Datadog cost between many use cases, a GPU node is likely to have only one service using it, making the per \u003cstrong\u003eservice\u003c/strong\u003e Datadog cost much higher.\u003c/p\u003e\n\u003ch3 id=\"pagerduty-link-to-heading\"\u003e\u003ca href=\"https://www.pagerduty.com/\"\u003ePagerduty\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#pagerdutyhttpswwwpagerdutycom\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#pagerduty-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003ePagerduty is a great product and well priced. We’ve never regretted picking it.\u003c/p\u003e\n\u003ch2 id=\"software-link-to-heading\"\u003eSoftware \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#software\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#software-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"schema-migration-by-diff-link-to-heading\"\u003eSchema migration by Diff \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#schema-migration-by-diff\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#schema-migration-by-diff-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟧 \u003cem\u003eEndorse-ish\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eSchema management is hard no matter how you do it, mostly because of how scary it is. Data is important and a bad schema migration can delete data. Of all the scary ways to solve this hard problem, I’ve been very happy with the idea of checking in the entire schema into git and then using a \u003ca href=\"https://michaelsogos.github.io/pg-diff/\"\u003etool\u003c/a\u003e to generate the SQL to sync the database to the schema.\u003c/p\u003e\n\u003ch2 id=\"ubuntu-for-dev-servers-link-to-heading\"\u003eUbuntu for dev servers \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#ubuntu-for-dev-servers\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ubuntu-for-dev-servers-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eOriginally I tried making the dev servers the same base OS that our Kubernetes nodes ran on, thinking this would make the development environment closer to prod. In retrospect, the effort isn’t worth it. I’m happy we are sticking with Ubuntu for development servers. It’s a well-supported OS and has most of the packages we need.\u003c/p\u003e\n\u003ch3 id=\"appsmith-link-to-heading\"\u003e\u003ca href=\"https://www.appsmith.com/\"\u003eAppSmith\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#appsmithhttpswwwappsmithcom\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#appsmith-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe frequently need to automate some process for an internal engineer: restart/promote/diagnose/etc. It’s easy enough for us to make APIs to solve these problems, but it’s a bit annoying debugging someone’s specific installation of a CLI/os/dependencies/etc. Being able to make a simple UI for engineers to interact with our scripts is very useful.\u003c/p\u003e\n\u003cp\u003eWe self-host our AppSmith. It works … well enough. Of course there are things we would change, but it is enough for the “free” price point. I originally explored deeper integration with \u003ca href=\"https://retool.com/\"\u003eretool\u003c/a\u003e, but I couldn’t justify the price point for what, at the time, was just a few integrations.\u003c/p\u003e\n\u003ch3 id=\"helm-link-to-heading\"\u003e\u003ca href=\"https://helm.sh/\"\u003ehelm\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#helmhttpshelmsh\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#helm-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eHelm v2 got a bad reputation (for good reason), but helm v3 has worked … well enough. There are still issues with deploying CRDs and educating developers on why their helm chart did not deploy correctly. Overall, however, helm works well enough as a way to package and deploy versioned Kubernetes objetcs and the Go templating language is difficult to debug, but powerful.\u003c/p\u003e\n\u003ch3 id=\"helm-charts-in-ecroci-link-to-heading\"\u003ehelm charts in ECR(oci) \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#helm-charts-in-ecroci\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#helm-charts-in-ecroci-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eOriginally our helm charts were hosted inside S3 and downloaded with a plugin. The main downsides were needing to install a custom helm plugin and manually managing lifecycles. We’ve since switched to OCI stored helm charts and haven’t had any issues with this setup.\u003c/p\u003e\n\u003ch3 id=\"bazel-link-to-heading\"\u003e\u003ca href=\"https://bazel.build/\"\u003ebazel\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#bazelhttpsbazelbuild\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#bazel-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟧 \u003cem\u003eUnsure\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eTo be fair, a lot of smart people like bazel, so I’m sure it’s not a \u003cem\u003ebad\u003c/em\u003e choice to make.\u003c/p\u003e\n\u003cp\u003eWhen deploying Go services, bazel personally feels like overkill. I think Bazel is a great choice if your last company used bazel, and you feel home sick. Otherwise, we have a build system that only a few engineers can dive deeply into, compared to GitHub Actions, where it seems everyone knows how to get their hands dirty.\u003c/p\u003e\n\u003ch3 id=\"not-using-open-telemetry-early-link-to-heading\"\u003eNot using open \u003ca href=\"https://opentelemetry.io/\"\u003etelemetry\u003c/a\u003e early \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-open-telemetryhttpsopentelemetryio-early\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-using-open-telemetry-early-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe started off sending metrics directly to DataDog using DataDog’s API. This has made it very hard to rip them out.\u003c/p\u003e\n\u003cp\u003eOpen telemetry wasn’t as mature 4 years ago, but it’s gotten much better. I think the metrics telemetry is still a bit immature, but the tracing is great. I recommend using it from the start for any company.\u003c/p\u003e\n\u003ch3 id=\"picking-renovatebot-over-dependabot-link-to-heading\"\u003ePicking \u003ca href=\"https://docs.renovatebot.com/\"\u003erenovatebot\u003c/a\u003e over \u003ca href=\"https://github.com/dependabot\"\u003edependabot\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-renovatebothttpsdocsrenovatebotcom-over-dependabothttpsgithubcomdependabot\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#picking-renovatebot-over-dependabot-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eI honestly wish we had thought about “keep your dependencies up to date” sooner. When you wait on this too long, you end up with versions so old the upgrade process is long and inevitably buggy. Renovatebot has worked well with the flexibility to customize it to your needs. The biggest, and it’s pretty big, downside is that it’s VERY complicated to setup and debug. I guess it’s the best of all the bad options.\u003c/p\u003e\n\u003ch3 id=\"kubernetes-link-to-heading\"\u003e\u003ca href=\"https://kubernetes.io/\"\u003eKubernetes\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#kuberneteshttpskubernetesio\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#kubernetes-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eYou need \u003cstrong\u003esomething\u003c/strong\u003e to host your long running services. Kuberentes is a popular choice and it’s worked well for us. The Kubernetes community has done a great job integrating AWS services (like load balancers, DNS, etc) into the Kubernetes ecosystem. The biggest downside with any flexible system is that there are a lot of ways to use it, and any system with a lot of ways to use has a lot of ways to use wrong.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eany system with a lot of ways to use has a lot of ways to use wrong\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJack Lindamood\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"buying-our-own-ips-link-to-heading\"\u003eBuying our own IPs \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#buying-our-own-ips\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#buying-our-own-ips-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eIf you work with external partners, you’ll frequently need to publish a whitelist of your IPs for them. Unfortunately, you may later develop more systems that need their own IPs. Buying your own IP block is a great way to avoid this by giving the external partner a larger CIDR block to whitelist.\u003c/p\u003e\n\u003ch3 id=\"picking-flux-for-k8s-gitops-link-to-heading\"\u003ePicking \u003ca href=\"https://fluxcd.io/\"\u003eFlux\u003c/a\u003e for k8s GitOps \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-fluxhttpsfluxcdio-for-k8s-gitops\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#picking-flux-for-k8s-gitops-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eNo Regrets\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAn early GitOps choice for Kubernetes was to decide between ArgoCD and Flux: I went with Flux (v1 at the time). It’s worked very well. We’re currently using Flux 2. The only downside is we’ve had to make our own tooling to help people understand the state of their deployments.\u003c/p\u003e\n\u003cp\u003eI hear great things about ArgoCD, so I’m sure if you picked that you’re also safe.\u003c/p\u003e\n\u003ch3 id=\"karpenter-for-node-management-link-to-heading\"\u003e\u003ca href=\"https://karpenter.sh/\"\u003eKarpenter\u003c/a\u003e for node management \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#karpenterhttpskarpentersh-for-node-management\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#karpenter-for-node-management-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eIf you’re using EKS (and not fully on Fargate), you should be using Karpenter. 100% full stop. We’ve used other autoscalers, including the default Kubernetes autoscaler and \u003ca href=\"https://spot.io/\"\u003eSpotInst\u003c/a\u003e. Between them all, Karpenter has been the most reliable and the most cost-effective.\u003c/p\u003e\n\u003ch3 id=\"using-sealedsecrets-to-manage-k8s-secrets-link-to-heading\"\u003eUsing \u003ca href=\"https://github.com/bitnami-labs/sealed-secrets\"\u003eSealedSecrets\u003c/a\u003e to manage k8s secrets \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-sealedsecretshttpsgithubcombitnami-labssealed-secrets-to-manage-k8s-secrets\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-sealedsecrets-to-manage-k8s-secrets-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eMy original thought was to push secret management to something GitOps styled. The two main drawbacks of using sealed-secrets were:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt was more complicated for less infra knowledgeable developers to create/update secrets\u003c/li\u003e\n\u003cli\u003eWe lost all the existing automations that AWS has around rotating secrets (\u003ca href=\"https://aws.amazon.com/blogs/security/rotate-amazon-rds-database-credentials-automatically-with-aws-secrets-manager/\"\u003efor example\u003c/a\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"using-externalsecrets-to-manage-k8s-secrets-link-to-heading\"\u003eUsing \u003ca href=\"https://github.com/external-secrets/external-secrets\"\u003eExternalSecrets\u003c/a\u003e to manage k8s secrets \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-externalsecretshttpsgithubcomexternal-secretsexternal-secrets-to-manage-k8s-secrets\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-externalsecrets-to-manage-k8s-secrets-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eExternalSecrets has worked very well to sync AWS -\u003e Kubernetes secrets. The process is simple for developers to understand and lets us take advantage of terraform as a way to easily create/update the secrets inside AWS, as well as give users a UI to use to create/update the secrets.\u003c/p\u003e\n\u003ch3 id=\"using-externaldns-to-manage-dns-link-to-heading\"\u003eUsing \u003ca href=\"https://github.com/kubernetes-sigs/external-dns\"\u003eExternalDNS\u003c/a\u003e to manage DNS \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-externaldnshttpsgithubcomkubernetes-sigsexternal-dns-to-manage-dns\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-externaldns-to-manage-dns-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eExternalDNS is a great product. It syncs our Kubernetes -\u003e Route53 DNS entries and has given us very little problems in the past 4 years.\u003c/p\u003e\n\u003ch3 id=\"using-cert-manager-to-manage-ssl-certificates-link-to-heading\"\u003eUsing \u003ca href=\"https://github.com/cert-manager/cert-manager\"\u003ecert-manager\u003c/a\u003e to manage SSL certificates \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#using-cert-managerhttpsgithubcomcert-managercert-manager-to-manage-ssl-certificates\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-cert-manager-to-manage-ssl-certificates-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eVery intuitive to configure and has worked well with no issues. Highly recommend using it to create your Let’s Encrypt certificates for Kubernetes. The only downside is we sometimes have ANCIENT (SaaS problems am I right?) tech stack customers that don’t trust Let’s Encrypt, and you need to go get a paid cert for those.\u003c/p\u003e\n\u003ch3 id=\"bottlerocket-for-eks-link-to-heading\"\u003e\u003ca href=\"https://aws.amazon.com/bottlerocket/\"\u003eBottlerocket\u003c/a\u003e for EKS \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#bottlerockethttpsawsamazoncombottlerocket-for-eks\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#bottlerocket-for-eks-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟥 \u003cem\u003eRegret\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eOur EKS cluster used to run on Bottlerocket. The main downside was we frequently ran into networking CSI issues and debugging the bottlerocket images were much harder than debugging the standard EKS AMIs. Using the \u003ca href=\"https://docs.aws.amazon.com/eks/latest/userguide/eks-optimized-ami.html\"\u003eEKS optimized\u003c/a\u003e AMIs for our nodes has given us no problems, and we still have a backdoor to debug the node itself when there are strange networking issues.\u003c/p\u003e\n\u003ch3 id=\"picking-terraform-over-cloudformation-link-to-heading\"\u003ePicking \u003ca href=\"https://www.terraform.io/\"\u003eTerraform\u003c/a\u003e over \u003ca href=\"https://aws.amazon.com/pm/cloudformation/\"\u003eCloudformation\u003c/a\u003e \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#picking-terraformhttpswwwterraformio-over-cloudformationhttpsawsamazoncompmcloudformation\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#picking-terraform-over-cloudformation-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eUsing Infrastructure as Code is a must for any company. Being in AWS, the two main choices are Cloudformation and Terraform. I’ve used both and don’t regret sticking with Terraform. It’s been easy to extend for other SaaS providers (like Pagerduty), the syntax is easier to read than CloudFormation, and hasn’t been a blocker or slowdown for us.\u003c/p\u003e\n\u003ch3 id=\"not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading\"\u003eNot using more code-ish IaC solutions (\u003ca href=\"https://www.pulumi.com/\"\u003ePulumi\u003c/a\u003e, \u003ca href=\"https://aws.amazon.com/cdk/\"\u003eCDK\u003c/a\u003e, etc) \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-more-code-ish-iac-solutions-pulumihttpswwwpulumicom-cdkhttpsawsamazoncomcdk-etc\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-using-more-code-ish-iac-solutions-pulumi-cdk-etc-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eNo Regrets\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWhile Terraform and CloudFormation are data files (HCL and YAML/JSON) that describe your infrastructure, solutions like Pulumi or CDK allow you to write code that does the same. Code is of course powerful, but I’ve found the restrictive nature of Terraform’s HCL to be a benefit with reduced complexity. It’s not that it’s impossible to write complex Terraform: it’s just that it’s more obvious when it’s happening.\u003c/p\u003e\n\u003cp\u003eSome of these solutions, like Pulumi, were invented many years ago while Terraform lacked a lot of the features it has today. Newer versions of Terraform have integrated a lot of the features that we can use to reduce complexity. We instead use a middleground that generates basic skeletons of our Terraform code for parts we want to abstract away.\u003c/p\u003e\n\u003ch3 id=\"not-using-a-network-mesh-istiolinkerdetc-link-to-heading\"\u003eNot using a network mesh (\u003ca href=\"https://istio.io/\"\u003eistio\u003c/a\u003e/\u003ca href=\"https://linkerd.io/\"\u003elinkerd\u003c/a\u003e/etc) \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#not-using-a-network-mesh-istiohttpsistioiolinkerdhttpslinkerdioetc\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#not-using-a-network-mesh-istiolinkerdetc-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eNo regrets\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNetwork meshes are really cool and a lot of smart people tend to endorse them, so I’m convinced they are fine ideas. Unfortunately, I think companies underestimate the complexity of things. My general infrastructure advice is “less is better”.\u003c/p\u003e\n\u003ch3 id=\"nginx-load-balancer-for-eks-ingress-link-to-heading\"\u003e\u003ca href=\"https://github.com/kubernetes/ingress-nginx\"\u003eNginx\u003c/a\u003e load balancer for EKS ingress \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#nginxhttpsgithubcomkubernetesingress-nginx-load-balancer-for-eks-ingress\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#nginx-load-balancer-for-eks-ingress-link-to-heading\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e🟩 \u003cem\u003eNo Regrets\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNginx is old, it’s stable, and it’s battle tested.\u003c/p\u003e\n\u003ch2 id=\"homebrew-for-company-scripts-link-to-heading\"\u003e\u003ca href=\"https://brew.sh/\"\u003ehomebrew\u003c/a\u003e for company scripts \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#homebrewhttpsbrewsh-for-company-scripts\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#homebrew-for-company-scripts-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eYour company will likely need a way to distribute scripts and binaries for your engineers to use. Homebrew has worked \u003cem\u003ewell enough\u003c/em\u003e for both linux and Mac users as a way to distribute scripts and binaries.\u003c/p\u003e\n\u003ch2 id=\"go-for-services-link-to-heading\"\u003e\u003ca href=\"https://go.dev/\"\u003eGo\u003c/a\u003e for services \u003ca href=\"https://cep.dev/posts/every-infrastructure-decision-i-endorse-or-regret-after-4-years-running-infrastructure-at-a-startup/#gohttpsgodev-for-services\"\u003eLink to heading\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#go-for-services-link-to-heading\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e🟩 \u003cem\u003eEndorse\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eGo has been easy for new engineers to pick up and is a great choice overall. For non-GPU services that are mostly network IO bound, Go should be your default language choice.\u003c/p\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"po3eez1w96f1vxyjawiogz5"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>