<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Populating the page: how browsers work</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Populating the page: how browsers work"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/1r16fyj140hhxusvduuzqwc/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="10/17/2023"/><meta property="article:modified_time" content="10/17/2023"/><link rel="canonical" href="https://luke-snaw.github.io//notes/1r16fyj140hhxusvduuzqwc/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_buildManifest.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="populating-the-page-how-browsers-work">Populating the page: how browsers work<a aria-hidden="true" class="anchor-heading icon-link" href="#populating-the-page-how-browsers-work"></a></h1>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work">https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work</a></p>
</blockquote>
<p>Users want web experiences with content that is fast to load and smooth to interact with. Therefore, a developer should strive to achieve these two goals.</p>
<p>To understand how to improve performance and perceived performance, it helps to understand how the browser works.</p>
<h2 id="overview"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#overview">Overview</a><a aria-hidden="true" class="anchor-heading icon-link" href="#overview"></a></h2>
<p>Fast sites provide better user experiences. Users want and expect web experiences with content that is fast to load and smooth to interact with.</p>
<p>Two major issues in web performance are issues having to do with latency and issues having to do with the fact that for the most part, browsers are single-threaded.</p>
<p>Latency is the biggest threat to our ability to ensure a fast-loading page. It is the developers' goal to make the site load as fast as possible — or at least <em>appear</em> to load super fast — so the user gets the requested information as quickly as possible. Network latency is the time it takes to transmit bytes over the air to computers. Web performance is what we have to do to make the page load as quickly as possible.</p>
<p>For the most part, browsers are considered single-threaded. That is, they execute a task from beginning to end before taking up another task. For smooth interactions, the developer's goal is to ensure performant site interactions, from smooth scrolling to being responsive to touch. Render time is key, ensuring the main thread can complete all the work we throw at it and still always be available to handle user interactions. Web performance can be improved by understanding the single-threaded nature of the browser and minimizing the main thread's responsibilities, where possible and appropriate, to ensure rendering is smooth and responses to interactions are immediate.</p>
<h2 id="navigation"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#navigation">Navigation</a><a aria-hidden="true" class="anchor-heading icon-link" href="#navigation"></a></h2>
<p><em>Navigation</em> is the first step in loading a web page. It occurs whenever a user requests a page by entering a URL into the address bar, clicking a link, submitting a form, as well as other actions.</p>
<p>One of the goals of web performance is to minimize the amount of time navigation takes to complete. In ideal conditions, this usually doesn't take too long, but latency and bandwidth are foes that can cause delays.</p>
<h3 id="dns-lookup"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#dns_lookup">DNS lookup</a><a aria-hidden="true" class="anchor-heading icon-link" href="#dns-lookup"></a></h3>
<p>The first step of navigating to a web page is finding where the assets for that page are located. If you navigate to <code>https://example.com</code>, the HTML page is located on the server with IP address of <code>93.184.216.34</code>. If you've never visited this site, a DNS lookup must happen.</p>
<p>Your browser requests a DNS lookup, which is eventually fielded by a name server, which in turn responds with an IP address. After this initial request, the IP will likely be cached for a time, which speeds up subsequent requests by retrieving the IP address from the cache instead of contacting a name server again.</p>
<p>DNS lookups usually only need to be done once per hostname for a page load. However, DNS lookups must be done for each unique hostname the requested page references. If your fonts, images, scripts, ads, and metrics all have different hostnames, a DNS lookup will have to be made for each one.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/latency.jpg">Mobile requests go first to the cell tower, then to a central phone company computer before being sent to the internet</a></p>
<p>This can be problematic for performance, particularly on mobile networks. When a user is on a mobile network, each DNS lookup has to go from the phone to the cell tower to reach an authoritative DNS server. The distance between a phone, a cell tower, and the name server can add significant latency.</p>
<h3 id="tcp-handshake"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#tcp_handshake">TCP handshake</a><a aria-hidden="true" class="anchor-heading icon-link" href="#tcp-handshake"></a></h3>
<p>Once the IP address is known, the browser sets up a connection to the server via a <a href="https://developer.mozilla.org/en-US/docs/Glossary/TCP_handshake">TCP three-way handshake</a>. This mechanism is designed so that two entities attempting to communicate — in this case the browser and web server — can negotiate the parameters of the network TCP socket connection before transmitting data, often over <a href="https://developer.mozilla.org/en-US/docs/Glossary/HTTPS">HTTPS</a>.</p>
<p>TCP's three-way handshaking technique is often referred to as "SYN-SYN-ACK" — or more accurately SYN, SYN-ACK, ACK — because there are three messages transmitted by TCP to negotiate and start a TCP session between two computers. Yes, this means three more messages back and forth between each server, and the request has yet to be made.</p>
<h3 id="tls-negotiation"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#tls_negotiation">TLS negotiation</a><a aria-hidden="true" class="anchor-heading icon-link" href="#tls-negotiation"></a></h3>
<p>For secure connections established over HTTPS, another "handshake" is required. This handshake, or rather the <a href="https://developer.mozilla.org/en-US/docs/Glossary/TLS">TLS</a> negotiation, determines which cipher will be used to encrypt the communication, verifies the server, and establishes that a secure connection is in place before beginning the actual transfer of data. This requires five more round trips to the server before the request for content is actually sent.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/ssl.jpg">The DNS lookup, the TCP handshake, and 5 steps of the TLS handshake including clienthello, serverhello and certificate, clientkey and finished for both server and client.</a></p>
<p>While making the connection secure adds time to the page load, a secure connection is worth the latency expense, as the data transmitted between the browser and the web server cannot be decrypted by a third party.</p>
<p>After the eight round trips to the server, the browser is finally able to make the request.</p>
<h2 id="response"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#response">Response</a><a aria-hidden="true" class="anchor-heading icon-link" href="#response"></a></h2>
<p>Once we have an established connection to a web server, the browser sends an initial <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">HTTP <code>GET</code> request</a> on behalf of the user, which for websites is most often an HTML file. Once the server receives the request, it will reply with relevant response headers and the contents of the HTML.</p>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en-US<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>My simple page<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myscript.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>heading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>My Page<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>A paragraph with a <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>link<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myimage.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image description<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherscript.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span>
</code></pre>
<p>This response for this initial request contains the first byte of data received. <a href="https://developer.mozilla.org/en-US/docs/Glossary/Time_to_first_byte">Time to First Byte</a> (TTFB) is the time between when the user made the request — say by clicking on a link — and the receipt of this first packet of HTML. The first chunk of content is usually 14KB of data.</p>
<p>In our example above, the request is definitely less than 14KB, but the linked resources aren't requested until the browser encounters the links during parsing, described below.</p>
<h3 id="congestion-control--tcp-slow-start"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#congestion_control_tcp_slow_start">Congestion control / TCP slow start</a><a aria-hidden="true" class="anchor-heading icon-link" href="#congestion-control--tcp-slow-start"></a></h3>
<p>TCP packets are split into segments during transmission. Because TCP guarantees the sequence of packets, the server must receive an acknowledgment from the client in the form of an ACK packet after sending a certain number of segments.</p>
<p>If the server waits for an ACK after each segment, that will result in frequent ACKs from the client and may increase transmission time, even in the case of a low-load network.</p>
<p>On the other hand, sending too many segments at once can lead to the problem that in a busy network the client will not be able to receive the segments and will just keep responding with ACKs for a long time, and the server will have to keep re-sending the segments.</p>
<p>In order to balance the number of transmitted segments, the <a href="https://developer.mozilla.org/en-US/docs/Glossary/TCP_slow_start">TCP slow start</a> algorithm is used to gradually increase the amount of transmitted data until the maximum network bandwidth can be determined, and to reduce the amount of transmitted data in case of high network load.</p>
<p>The number of segments to be transmitted is controlled by the value of the congestion window (CWND), which can be initialized to 1, 2, 4, or 10 MSS (MSS is 1500 bytes over the Ethernet protocol). That value is the number of bytes to send, upon receipt of which the client must send an ACK.</p>
<p>If an ACK is received, then the CWND value will be doubled, and so the server will be able to send more segments the next time. If instead no ACK is received, then the CWND value will be halved. That mechanism thus achieves a balance between sending too many segments, and sending too few.</p>
<h2 id="parsing"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#parsing">Parsing</a><a aria-hidden="true" class="anchor-heading icon-link" href="#parsing"></a></h2>
<p>Once the browser receives the first chunk of data, it can begin parsing the information received. <a href="https://developer.mozilla.org/en-US/docs/Glossary/Parse">Parsing</a> is the step the browser takes to turn the data it receives over the network into the <a href="https://developer.mozilla.org/en-US/docs/Glossary/DOM">DOM</a> and <a href="https://developer.mozilla.org/en-US/docs/Glossary/CSSOM">CSSOM</a>, which is used by the renderer to paint a page to the screen.</p>
<p>The DOM is the internal representation of the markup for the browser. The DOM is also exposed and can be manipulated through various APIs in JavaScript.</p>
<p>Even if the requested page's HTML is larger than the initial 14KB packet, the browser will begin parsing and attempting to render an experience based on the data it has. This is why it's important for web performance optimization to include everything the browser needs to start rendering a page, or at least a template of the page — the CSS and HTML needed for the first render — in the first 14KB. But before anything is rendered to the screen, the HTML, CSS, and JavaScript have to be parsed.</p>
<h3 id="building-the-dom-tree"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#building_the_dom_tree">Building the DOM tree</a><a aria-hidden="true" class="anchor-heading icon-link" href="#building-the-dom-tree"></a></h3>
<p>We describe five steps in the <a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path">critical rendering path</a>.</p>
<p>The first step is processing the HTML markup and building the DOM tree. HTML parsing involves <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList">tokenization</a> and tree construction. HTML tokens include start and end tags, as well as attribute names and values. If the document is well-formed, parsing it is straightforward and faster. The parser parses tokenized input into the document, building up the document tree.</p>
<p>The DOM tree describes the content of the document. The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html"><code>&#x3C;html></code></a> element is the first element and root node of the document tree. The tree reflects the relationships and hierarchies between different elements. Elements nested within other elements are child nodes. The greater the number of DOM nodes, the longer it takes to construct the DOM tree.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/dom.gif">The DOM tree for our sample code, showing all the nodes, including text nodes.</a></p>
<p>When the parser finds non-blocking resources, such as an image, the browser will request those resources and continue parsing. Parsing can continue when a CSS file is encountered, but <code>&#x3C;script></code> elements — particularly those without an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code>async</code></a> or <code>defer</code> attribute — block rendering, and pause the parsing of HTML. Though the browser's preload scanner hastens this process, excessive scripts can still be a significant bottleneck.</p>
<h3 id="preload-scanner"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#preload_scanner">Preload scanner</a><a aria-hidden="true" class="anchor-heading icon-link" href="#preload-scanner"></a></h3>
<p>While the browser builds the DOM tree, this process occupies the main thread. As this happens, the <em>preload scanner</em> will parse through the content available and request high-priority resources like CSS, JavaScript, and web fonts. Thanks to the preload scanner, we don't have to wait until the parser finds a reference to an external resource to request it. It will retrieve resources in the background so that by the time the main HTML parser reaches the requested assets, they may already be in flight or have been downloaded. The optimizations the preload scanner provides reduce blockages.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myscript.js<span class="token punctuation">"</span></span> <span class="token attr-name">async</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myimage.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image description<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherscript.js<span class="token punctuation">"</span></span> <span class="token attr-name">async</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>In this example, while the main thread is parsing the HTML and CSS, the preload scanner will find the scripts and image, and start downloading them as well. To ensure the script doesn't block the process, add the <code>async</code> attribute, or the <code>defer</code> attribute if JavaScript parsing and execution order is important.</p>
<p>Waiting to obtain CSS doesn't block HTML parsing or downloading, but it does block JavaScript because JavaScript is often used to query CSS properties' impact on elements.</p>
<h3 id="building-the-cssom-tree"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#building_the_cssom_tree">Building the CSSOM tree</a><a aria-hidden="true" class="anchor-heading icon-link" href="#building-the-cssom-tree"></a></h3>
<p>The second step in the critical rendering path is processing CSS and building the CSSOM tree. The CSS object model is similar to the DOM. The DOM and CSSOM are both trees. They are independent data structures. The browser converts the CSS rules into a map of styles it can understand and work with. The browser goes through each rule set in the CSS, creating a tree of nodes with parent, child, and sibling relationships based on the CSS selectors.</p>
<p>As with HTML, the browser needs to convert the received CSS rules into something it can work with. Hence, it repeats the HTML-to-object process, but for the CSS.</p>
<p>The CSSOM tree includes styles from the user agent style sheet. The browser begins with the most general rule applicable to a node and recursively refines the computed styles by applying more specific rules. In other words, it cascades the property values.</p>
<p>Building the CSSOM is very, very fast and is not displayed in a unique color in current developer tools. Rather, the "Recalculate Style" in developer tools shows the total time it takes to parse CSS, construct the CSSOM tree, and recursively calculate computed styles. In terms of web performance optimization, there are lower hanging fruit, as the total time to create the CSSOM is generally less than the time it takes for one DNS lookup.</p>
<h3 id="other-processes"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#other_processes">Other processes</a><a aria-hidden="true" class="anchor-heading icon-link" href="#other-processes"></a></h3>
<h4 id="javascript-compilation">JavaScript compilation<a aria-hidden="true" class="anchor-heading icon-link" href="#javascript-compilation"></a></h4>
<p>While the CSS is being parsed and the CSSOM created, other assets, including JavaScript files, are downloading (thanks to the preload scanner). JavaScript is parsed, compiled, and interpreted. The scripts are parsed into abstract syntax trees. Some browser engines take the <a href="https://en.wikipedia.org/wiki/Abstract_Syntax_Tree">abstract syntax trees</a> and pass them into a compiler, outputting bytecode. This is known as JavaScript compilation. Most of the code is interpreted on the main thread, but there are exceptions such as code run in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API">web workers</a>.</p>
<h4 id="building-the-accessibility-tree">Building the accessibility tree<a aria-hidden="true" class="anchor-heading icon-link" href="#building-the-accessibility-tree"></a></h4>
<p>The browser also builds an <a href="https://developer.mozilla.org/en-US/docs/Learn/Accessibility">accessibility</a> tree that assistive devices use to parse and interpret content. The accessibility object model (AOM) is like a semantic version of the DOM. The browser updates the accessibility tree when the DOM is updated. The accessibility tree is not modifiable by assistive technologies themselves.</p>
<p>Until the AOM is built, the content is not accessible to <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Screen_Reader_Implementors_Guide">screen readers</a>.</p>
<h2 id="render"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#render">Render</a><a aria-hidden="true" class="anchor-heading icon-link" href="#render"></a></h2>
<p>Rendering steps include style, layout, paint, and in some cases compositing. The CSSOM and DOM trees created in the parsing step are combined into a render tree which is then used to compute the layout of every visible element, which is then painted to the screen. In some cases, content can be promoted to its own layer and composited, improving performance by painting portions of the screen on the GPU instead of the CPU, freeing up the main thread.</p>
<h3 id="style"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#style">Style</a><a aria-hidden="true" class="anchor-heading icon-link" href="#style"></a></h3>
<p>The third step in the critical rendering path is combining the DOM and CSSOM into a render tree. The computed style tree, or render tree, construction starts with the root of the DOM tree, traversing each visible node.</p>
<p>Elements that aren't going to be displayed, like the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head"><code>&#x3C;head></code></a> element and its children and any nodes with <code>display: none</code>, such as the <code>script { display: none; }</code> you will find in user agent stylesheets, are not included in the render tree as they will not appear in the rendered output. Nodes with <code>visibility: hidden</code> applied are included in the render tree, as they do take up space. As we have not given any directives to override the user agent default, the <code>script</code> node in our code example above will not be included in the render tree.</p>
<p>Each visible node has its CSSOM rules applied to it. The render tree holds all the visible nodes with content and computed styles — matching up all the relevant styles to every visible node in the DOM tree, and determining, based on the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade">CSS cascade</a>, what the computed styles are for each node.</p>
<h3 id="layout"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#layout">Layout</a><a aria-hidden="true" class="anchor-heading icon-link" href="#layout"></a></h3>
<p>The fourth step in the critical rendering path is running layout on the render tree to compute the geometry of each node. <em>Layout</em> is the process by which the dimensions and location of all the nodes in the render tree are determined, plus the determination of the size and position of each object on the page. <em>Reflow</em> is any subsequent size and position determination of any part of the page or the entire document.</p>
<p>Once the render tree is built, layout commences. The render tree identified which nodes are displayed (even if invisible) along with their computed styles, but not the dimensions or location of each node. To determine the exact size and position of each object, the browser starts at the root of the render tree and traverses it.</p>
<p>On the web page, almost everything is a box. Different devices and different desktop preferences mean an unlimited number of differing viewport sizes. In this phase, taking the viewport size into consideration, the browser determines what the sizes of all the different boxes are going to be on the screen. Taking the size of the viewport as its base, layout generally starts with the body, laying out the sizes of all the body's descendants, with each element's box model properties, providing placeholder space for replaced elements it doesn't know the dimensions of, such as our image.</p>
<p>The first time the size and position of each node is determined is called <em>layout</em>. Subsequent recalculations of are called <em>reflows</em>. In our example, suppose the initial layout occurs before the image is returned. Since we didn't declare the dimensions of our image, there will be a reflow once the image dimensions are known.</p>
<h3 id="paint"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#paint">Paint</a><a aria-hidden="true" class="anchor-heading icon-link" href="#paint"></a></h3>
<p>The last step in the critical rendering path is painting the individual nodes to the screen, the first occurrence of which is called the <a href="https://developer.mozilla.org/en-US/docs/Glossary/First_meaningful_paint">first meaningful paint</a>. In the painting or rasterization phase, the browser converts each box calculated in the layout phase to actual pixels on the screen. Painting involves drawing every visual part of an element to the screen, including text, colors, borders, shadows, and replaced elements like buttons and images. The browser needs to do this super quickly.</p>
<p>To ensure smooth scrolling and animation, everything occupying the main thread, including calculating styles, along with reflow and paint, must take the browser less than 16.67ms to accomplish. At 2048 x 1536, the iPad has over 3,145,000 pixels to be painted to the screen. That is a lot of pixels that have to be painted very quickly. To ensure repainting can be done even faster than the initial paint, the drawing to the screen is generally broken down into several layers. If this occurs, then compositing is necessary.</p>
<p>Painting can break the elements in the layout tree into layers. Promoting content into layers on the GPU (instead of the main thread on the CPU) improves paint and repaint performance. There are specific properties and elements that instantiate a layer, including <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video"><code>&#x3C;video></code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas"><code>&#x3C;canvas></code></a>, and any element which has the CSS properties of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/opacity"><code>opacity</code></a>, a 3D <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform"><code>transform</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/will-change"><code>will-change</code></a>, and a few others. These nodes will be painted onto their own layer, along with their descendants, unless a descendant necessitates its own layer for one (or more) of the above reasons.</p>
<p>Layers do improve performance but are expensive when it comes to memory management, so should not be overused as part of web performance optimization strategies.</p>
<h3 id="compositing"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#compositing">Compositing</a><a aria-hidden="true" class="anchor-heading icon-link" href="#compositing"></a></h3>
<p>When sections of the document are drawn in different layers, overlapping each other, compositing is necessary to ensure they are drawn to the screen in the right order and the content is rendered correctly.</p>
<p>As the page continues to load assets, reflows can happen (recall our example image that arrived late). A reflow sparks a repaint and a re-composite. Had we defined the dimensions of our image, no reflow would have been necessary, and only the layer that needed to be repainted would be repainted, and composited if necessary. But we didn't include the image dimensions! When the image is obtained from the server, the rendering process goes back to the layout steps and restarts from there.</p>
<h2 id="interactivity"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#interactivity">Interactivity</a><a aria-hidden="true" class="anchor-heading icon-link" href="#interactivity"></a></h2>
<p>Once the main thread is done painting the page, you would think we would be "all set." That isn't necessarily the case. If the load includes JavaScript, that was correctly deferred, and only executed after the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event"><code>onload</code></a> event fires, the main thread might be busy, and not available for scrolling, touch, and other interactions.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Time_to_interactive">Time to Interactive</a> (TTI) is the measurement of how long it took from that first request which led to the DNS lookup and TCP connection to when the page is interactive — interactive being the point in time after the <a href="https://developer.mozilla.org/en-US/docs/Glossary/First_contentful_paint">First Contentful Paint</a> when the page responds to user interactions within 50ms. If the main thread is occupied parsing, compiling, and executing JavaScript, it is not available and therefore not able to respond to user interactions in a timely (less than 50ms) fashion.</p>
<p>In our example, maybe the image loaded quickly, but perhaps the <code>anotherscript.js</code> file was 2MB and our user's network connection was slow. In this case, the user would see the page super quickly, but wouldn't be able to scroll without jank until the script was downloaded, parsed, and executed. That is not a good user experience. Avoid occupying the main thread, as demonstrated in this WebPageTest example:</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/visa_network.png">The main thread is occupied by the downloading, parsing and execution of a JavaScript file - over a fast connection</a></p>
<p>In this example, JavaScript execution took over 1.5 seconds, and the main thread was fully occupied that entire time, unresponsive to click events or screen taps.</p>
<h2 id="see-also"><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#see_also">See also</a><a aria-hidden="true" class="anchor-heading icon-link" href="#see-also"></a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Performance">Web Performance</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#overview" title="Overview">Overview</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#navigation" title="Navigation">Navigation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#dns-lookup" title="DNS lookup">DNS lookup</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tcp-handshake" title="TCP handshake">TCP handshake</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tls-negotiation" title="TLS negotiation">TLS negotiation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#response" title="Response">Response</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#congestion-control--tcp-slow-start" title="Congestion control / TCP slow start">Congestion control / TCP slow start</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#parsing" title="Parsing">Parsing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#building-the-dom-tree" title="Building the DOM tree">Building the DOM tree</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#preload-scanner" title="Preload scanner">Preload scanner</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#building-the-cssom-tree" title="Building the CSSOM tree">Building the CSSOM tree</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#other-processes" title="Other processes">Other processes</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#javascript-compilation" title="JavaScript compilation">JavaScript compilation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#building-the-accessibility-tree" title="Building the accessibility tree">Building the accessibility tree</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#render" title="Render">Render</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#style" title="Style">Style</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#layout" title="Layout">Layout</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#paint" title="Paint">Paint</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#compositing" title="Compositing">Compositing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#interactivity" title="Interactivity">Interactivity</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#see-also" title="See also">See also</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"1r16fyj140hhxusvduuzqwc","title":"Populating the page: how browsers work","desc":"","updated":1697506498448,"created":1697506358423,"custom":{},"fname":"dev.web.how-browsers-work","type":"note","vault":{"fsPath":"vault"},"contentHash":"a3d8b6d1aabb6fb87c8e7a41ef51c45b","links":[],"anchors":{"overview":{"type":"header","text":"Overview","value":"overview","line":14,"column":0,"depth":2},"navigation":{"type":"header","text":"Navigation","value":"navigation","line":24,"column":0,"depth":2},"dns-lookup":{"type":"header","text":"DNS lookup","value":"dns-lookup","line":30,"column":0,"depth":3},"tcp-handshake":{"type":"header","text":"TCP handshake","value":"tcp-handshake","line":42,"column":0,"depth":3},"tls-negotiation":{"type":"header","text":"TLS negotiation","value":"tls-negotiation","line":48,"column":0,"depth":3},"response":{"type":"header","text":"Response","value":"response","line":58,"column":0,"depth":2},"congestion-control--tcp-slow-start":{"type":"header","text":"Congestion control / TCP slow start","value":"congestion-control--tcp-slow-start","line":86,"column":0,"depth":3},"parsing":{"type":"header","text":"Parsing","value":"parsing","line":100,"column":0,"depth":2},"building-the-dom-tree":{"type":"header","text":"Building the DOM tree","value":"building-the-dom-tree","line":108,"column":0,"depth":3},"preload-scanner":{"type":"header","text":"Preload scanner","value":"preload-scanner","line":120,"column":0,"depth":3},"building-the-cssom-tree":{"type":"header","text":"Building the CSSOM tree","value":"building-the-cssom-tree","line":135,"column":0,"depth":3},"other-processes":{"type":"header","text":"Other processes","value":"other-processes","line":145,"column":0,"depth":3},"javascript-compilation":{"type":"header","text":"JavaScript compilation","value":"javascript-compilation","line":147,"column":0,"depth":4},"building-the-accessibility-tree":{"type":"header","text":"Building the accessibility tree","value":"building-the-accessibility-tree","line":151,"column":0,"depth":4},"render":{"type":"header","text":"Render","value":"render","line":157,"column":0,"depth":2},"style":{"type":"header","text":"Style","value":"style","line":161,"column":0,"depth":3},"layout":{"type":"header","text":"Layout","value":"layout","line":169,"column":0,"depth":3},"paint":{"type":"header","text":"Paint","value":"paint","line":179,"column":0,"depth":3},"compositing":{"type":"header","text":"Compositing","value":"compositing","line":189,"column":0,"depth":3},"interactivity":{"type":"header","text":"Interactivity","value":"interactivity","line":195,"column":0,"depth":2},"see-also":{"type":"header","text":"See also","value":"see-also","line":207,"column":0,"depth":2}},"children":[],"parent":"e2owgssw5t9oo46vsvwsu3f","data":{}},"body":"\u003ch1 id=\"populating-the-page-how-browsers-work\"\u003ePopulating the page: how browsers work\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#populating-the-page-how-browsers-work\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eUsers want web experiences with content that is fast to load and smooth to interact with. Therefore, a developer should strive to achieve these two goals.\u003c/p\u003e\n\u003cp\u003eTo understand how to improve performance and perceived performance, it helps to understand how the browser works.\u003c/p\u003e\n\u003ch2 id=\"overview\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#overview\"\u003eOverview\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#overview\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eFast sites provide better user experiences. Users want and expect web experiences with content that is fast to load and smooth to interact with.\u003c/p\u003e\n\u003cp\u003eTwo major issues in web performance are issues having to do with latency and issues having to do with the fact that for the most part, browsers are single-threaded.\u003c/p\u003e\n\u003cp\u003eLatency is the biggest threat to our ability to ensure a fast-loading page. It is the developers' goal to make the site load as fast as possible — or at least \u003cem\u003eappear\u003c/em\u003e to load super fast — so the user gets the requested information as quickly as possible. Network latency is the time it takes to transmit bytes over the air to computers. Web performance is what we have to do to make the page load as quickly as possible.\u003c/p\u003e\n\u003cp\u003eFor the most part, browsers are considered single-threaded. That is, they execute a task from beginning to end before taking up another task. For smooth interactions, the developer's goal is to ensure performant site interactions, from smooth scrolling to being responsive to touch. Render time is key, ensuring the main thread can complete all the work we throw at it and still always be available to handle user interactions. Web performance can be improved by understanding the single-threaded nature of the browser and minimizing the main thread's responsibilities, where possible and appropriate, to ensure rendering is smooth and responses to interactions are immediate.\u003c/p\u003e\n\u003ch2 id=\"navigation\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#navigation\"\u003eNavigation\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#navigation\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eNavigation\u003c/em\u003e is the first step in loading a web page. It occurs whenever a user requests a page by entering a URL into the address bar, clicking a link, submitting a form, as well as other actions.\u003c/p\u003e\n\u003cp\u003eOne of the goals of web performance is to minimize the amount of time navigation takes to complete. In ideal conditions, this usually doesn't take too long, but latency and bandwidth are foes that can cause delays.\u003c/p\u003e\n\u003ch3 id=\"dns-lookup\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#dns_lookup\"\u003eDNS lookup\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dns-lookup\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe first step of navigating to a web page is finding where the assets for that page are located. If you navigate to \u003ccode\u003ehttps://example.com\u003c/code\u003e, the HTML page is located on the server with IP address of \u003ccode\u003e93.184.216.34\u003c/code\u003e. If you've never visited this site, a DNS lookup must happen.\u003c/p\u003e\n\u003cp\u003eYour browser requests a DNS lookup, which is eventually fielded by a name server, which in turn responds with an IP address. After this initial request, the IP will likely be cached for a time, which speeds up subsequent requests by retrieving the IP address from the cache instead of contacting a name server again.\u003c/p\u003e\n\u003cp\u003eDNS lookups usually only need to be done once per hostname for a page load. However, DNS lookups must be done for each unique hostname the requested page references. If your fonts, images, scripts, ads, and metrics all have different hostnames, a DNS lookup will have to be made for each one.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/latency.jpg\"\u003eMobile requests go first to the cell tower, then to a central phone company computer before being sent to the internet\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis can be problematic for performance, particularly on mobile networks. When a user is on a mobile network, each DNS lookup has to go from the phone to the cell tower to reach an authoritative DNS server. The distance between a phone, a cell tower, and the name server can add significant latency.\u003c/p\u003e\n\u003ch3 id=\"tcp-handshake\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#tcp_handshake\"\u003eTCP handshake\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tcp-handshake\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eOnce the IP address is known, the browser sets up a connection to the server via a \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/TCP_handshake\"\u003eTCP three-way handshake\u003c/a\u003e. This mechanism is designed so that two entities attempting to communicate — in this case the browser and web server — can negotiate the parameters of the network TCP socket connection before transmitting data, often over \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/HTTPS\"\u003eHTTPS\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eTCP's three-way handshaking technique is often referred to as \"SYN-SYN-ACK\" — or more accurately SYN, SYN-ACK, ACK — because there are three messages transmitted by TCP to negotiate and start a TCP session between two computers. Yes, this means three more messages back and forth between each server, and the request has yet to be made.\u003c/p\u003e\n\u003ch3 id=\"tls-negotiation\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#tls_negotiation\"\u003eTLS negotiation\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tls-negotiation\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eFor secure connections established over HTTPS, another \"handshake\" is required. This handshake, or rather the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/TLS\"\u003eTLS\u003c/a\u003e negotiation, determines which cipher will be used to encrypt the communication, verifies the server, and establishes that a secure connection is in place before beginning the actual transfer of data. This requires five more round trips to the server before the request for content is actually sent.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/ssl.jpg\"\u003eThe DNS lookup, the TCP handshake, and 5 steps of the TLS handshake including clienthello, serverhello and certificate, clientkey and finished for both server and client.\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWhile making the connection secure adds time to the page load, a secure connection is worth the latency expense, as the data transmitted between the browser and the web server cannot be decrypted by a third party.\u003c/p\u003e\n\u003cp\u003eAfter the eight round trips to the server, the browser is finally able to make the request.\u003c/p\u003e\n\u003ch2 id=\"response\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#response\"\u003eResponse\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#response\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eOnce we have an established connection to a web server, the browser sends an initial \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods\"\u003eHTTP \u003ccode\u003eGET\u003c/code\u003e request\u003c/a\u003e on behalf of the user, which for websites is most often an HTML file. Once the server receives the request, it will reply with relevant response headers and the contents of the HTML.\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token doctype\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;!\u003c/span\u003e\u003cspan class=\"token doctype-tag\"\u003eDOCTYPE\u003c/span\u003e \u003cspan class=\"token name\"\u003ehtml\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ehtml\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003elang\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003een-US\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ehead\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003emeta\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003echarset\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eUTF-8\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003etitle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eMy simple page\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003etitle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elink\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003erel\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003estylesheet\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003estyles.css\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emyscript.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ehead\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh1\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eheading\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eMy Page\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eA paragraph with a \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ea\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ehttps://example.com/about\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003elink\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emyimage.jpg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ealt\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eimage description\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eanotherscript.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ehtml\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis response for this initial request contains the first byte of data received. \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/Time_to_first_byte\"\u003eTime to First Byte\u003c/a\u003e (TTFB) is the time between when the user made the request — say by clicking on a link — and the receipt of this first packet of HTML. The first chunk of content is usually 14KB of data.\u003c/p\u003e\n\u003cp\u003eIn our example above, the request is definitely less than 14KB, but the linked resources aren't requested until the browser encounters the links during parsing, described below.\u003c/p\u003e\n\u003ch3 id=\"congestion-control--tcp-slow-start\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#congestion_control_tcp_slow_start\"\u003eCongestion control / TCP slow start\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#congestion-control--tcp-slow-start\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eTCP packets are split into segments during transmission. Because TCP guarantees the sequence of packets, the server must receive an acknowledgment from the client in the form of an ACK packet after sending a certain number of segments.\u003c/p\u003e\n\u003cp\u003eIf the server waits for an ACK after each segment, that will result in frequent ACKs from the client and may increase transmission time, even in the case of a low-load network.\u003c/p\u003e\n\u003cp\u003eOn the other hand, sending too many segments at once can lead to the problem that in a busy network the client will not be able to receive the segments and will just keep responding with ACKs for a long time, and the server will have to keep re-sending the segments.\u003c/p\u003e\n\u003cp\u003eIn order to balance the number of transmitted segments, the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/TCP_slow_start\"\u003eTCP slow start\u003c/a\u003e algorithm is used to gradually increase the amount of transmitted data until the maximum network bandwidth can be determined, and to reduce the amount of transmitted data in case of high network load.\u003c/p\u003e\n\u003cp\u003eThe number of segments to be transmitted is controlled by the value of the congestion window (CWND), which can be initialized to 1, 2, 4, or 10 MSS (MSS is 1500 bytes over the Ethernet protocol). That value is the number of bytes to send, upon receipt of which the client must send an ACK.\u003c/p\u003e\n\u003cp\u003eIf an ACK is received, then the CWND value will be doubled, and so the server will be able to send more segments the next time. If instead no ACK is received, then the CWND value will be halved. That mechanism thus achieves a balance between sending too many segments, and sending too few.\u003c/p\u003e\n\u003ch2 id=\"parsing\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#parsing\"\u003eParsing\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#parsing\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eOnce the browser receives the first chunk of data, it can begin parsing the information received. \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/Parse\"\u003eParsing\u003c/a\u003e is the step the browser takes to turn the data it receives over the network into the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/DOM\"\u003eDOM\u003c/a\u003e and \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/CSSOM\"\u003eCSSOM\u003c/a\u003e, which is used by the renderer to paint a page to the screen.\u003c/p\u003e\n\u003cp\u003eThe DOM is the internal representation of the markup for the browser. The DOM is also exposed and can be manipulated through various APIs in JavaScript.\u003c/p\u003e\n\u003cp\u003eEven if the requested page's HTML is larger than the initial 14KB packet, the browser will begin parsing and attempting to render an experience based on the data it has. This is why it's important for web performance optimization to include everything the browser needs to start rendering a page, or at least a template of the page — the CSS and HTML needed for the first render — in the first 14KB. But before anything is rendered to the screen, the HTML, CSS, and JavaScript have to be parsed.\u003c/p\u003e\n\u003ch3 id=\"building-the-dom-tree\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#building_the_dom_tree\"\u003eBuilding the DOM tree\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#building-the-dom-tree\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWe describe five steps in the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\"\u003ecritical rendering path\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThe first step is processing the HTML markup and building the DOM tree. HTML parsing involves \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList\"\u003etokenization\u003c/a\u003e and tree construction. HTML tokens include start and end tags, as well as attribute names and values. If the document is well-formed, parsing it is straightforward and faster. The parser parses tokenized input into the document, building up the document tree.\u003c/p\u003e\n\u003cp\u003eThe DOM tree describes the content of the document. The \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html\"\u003e\u003ccode\u003e\u0026#x3C;html\u003e\u003c/code\u003e\u003c/a\u003e element is the first element and root node of the document tree. The tree reflects the relationships and hierarchies between different elements. Elements nested within other elements are child nodes. The greater the number of DOM nodes, the longer it takes to construct the DOM tree.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/dom.gif\"\u003eThe DOM tree for our sample code, showing all the nodes, including text nodes.\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWhen the parser finds non-blocking resources, such as an image, the browser will request those resources and continue parsing. Parsing can continue when a CSS file is encountered, but \u003ccode\u003e\u0026#x3C;script\u003e\u003c/code\u003e elements — particularly those without an \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\"\u003e\u003ccode\u003easync\u003c/code\u003e\u003c/a\u003e or \u003ccode\u003edefer\u003c/code\u003e attribute — block rendering, and pause the parsing of HTML. Though the browser's preload scanner hastens this process, excessive scripts can still be a significant bottleneck.\u003c/p\u003e\n\u003ch3 id=\"preload-scanner\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#preload_scanner\"\u003ePreload scanner\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#preload-scanner\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWhile the browser builds the DOM tree, this process occupies the main thread. As this happens, the \u003cem\u003epreload scanner\u003c/em\u003e will parse through the content available and request high-priority resources like CSS, JavaScript, and web fonts. Thanks to the preload scanner, we don't have to wait until the parser finds a reference to an external resource to request it. It will retrieve resources in the background so that by the time the main HTML parser reaches the requested assets, they may already be in flight or have been downloaded. The optimizations the preload scanner provides reduce blockages.\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elink\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003erel\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003estylesheet\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003estyles.css\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emyscript.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003easync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emyimage.jpg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ealt\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eimage description\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eanotherscript.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003easync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this example, while the main thread is parsing the HTML and CSS, the preload scanner will find the scripts and image, and start downloading them as well. To ensure the script doesn't block the process, add the \u003ccode\u003easync\u003c/code\u003e attribute, or the \u003ccode\u003edefer\u003c/code\u003e attribute if JavaScript parsing and execution order is important.\u003c/p\u003e\n\u003cp\u003eWaiting to obtain CSS doesn't block HTML parsing or downloading, but it does block JavaScript because JavaScript is often used to query CSS properties' impact on elements.\u003c/p\u003e\n\u003ch3 id=\"building-the-cssom-tree\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#building_the_cssom_tree\"\u003eBuilding the CSSOM tree\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#building-the-cssom-tree\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe second step in the critical rendering path is processing CSS and building the CSSOM tree. The CSS object model is similar to the DOM. The DOM and CSSOM are both trees. They are independent data structures. The browser converts the CSS rules into a map of styles it can understand and work with. The browser goes through each rule set in the CSS, creating a tree of nodes with parent, child, and sibling relationships based on the CSS selectors.\u003c/p\u003e\n\u003cp\u003eAs with HTML, the browser needs to convert the received CSS rules into something it can work with. Hence, it repeats the HTML-to-object process, but for the CSS.\u003c/p\u003e\n\u003cp\u003eThe CSSOM tree includes styles from the user agent style sheet. The browser begins with the most general rule applicable to a node and recursively refines the computed styles by applying more specific rules. In other words, it cascades the property values.\u003c/p\u003e\n\u003cp\u003eBuilding the CSSOM is very, very fast and is not displayed in a unique color in current developer tools. Rather, the \"Recalculate Style\" in developer tools shows the total time it takes to parse CSS, construct the CSSOM tree, and recursively calculate computed styles. In terms of web performance optimization, there are lower hanging fruit, as the total time to create the CSSOM is generally less than the time it takes for one DNS lookup.\u003c/p\u003e\n\u003ch3 id=\"other-processes\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#other_processes\"\u003eOther processes\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#other-processes\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch4 id=\"javascript-compilation\"\u003eJavaScript compilation\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#javascript-compilation\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eWhile the CSS is being parsed and the CSSOM created, other assets, including JavaScript files, are downloading (thanks to the preload scanner). JavaScript is parsed, compiled, and interpreted. The scripts are parsed into abstract syntax trees. Some browser engines take the \u003ca href=\"https://en.wikipedia.org/wiki/Abstract_Syntax_Tree\"\u003eabstract syntax trees\u003c/a\u003e and pass them into a compiler, outputting bytecode. This is known as JavaScript compilation. Most of the code is interpreted on the main thread, but there are exceptions such as code run in \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API\"\u003eweb workers\u003c/a\u003e.\u003c/p\u003e\n\u003ch4 id=\"building-the-accessibility-tree\"\u003eBuilding the accessibility tree\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#building-the-accessibility-tree\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThe browser also builds an \u003ca href=\"https://developer.mozilla.org/en-US/docs/Learn/Accessibility\"\u003eaccessibility\u003c/a\u003e tree that assistive devices use to parse and interpret content. The accessibility object model (AOM) is like a semantic version of the DOM. The browser updates the accessibility tree when the DOM is updated. The accessibility tree is not modifiable by assistive technologies themselves.\u003c/p\u003e\n\u003cp\u003eUntil the AOM is built, the content is not accessible to \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Screen_Reader_Implementors_Guide\"\u003escreen readers\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"render\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#render\"\u003eRender\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#render\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eRendering steps include style, layout, paint, and in some cases compositing. The CSSOM and DOM trees created in the parsing step are combined into a render tree which is then used to compute the layout of every visible element, which is then painted to the screen. In some cases, content can be promoted to its own layer and composited, improving performance by painting portions of the screen on the GPU instead of the CPU, freeing up the main thread.\u003c/p\u003e\n\u003ch3 id=\"style\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#style\"\u003eStyle\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#style\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe third step in the critical rendering path is combining the DOM and CSSOM into a render tree. The computed style tree, or render tree, construction starts with the root of the DOM tree, traversing each visible node.\u003c/p\u003e\n\u003cp\u003eElements that aren't going to be displayed, like the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\"\u003e\u003ccode\u003e\u0026#x3C;head\u003e\u003c/code\u003e\u003c/a\u003e element and its children and any nodes with \u003ccode\u003edisplay: none\u003c/code\u003e, such as the \u003ccode\u003escript { display: none; }\u003c/code\u003e you will find in user agent stylesheets, are not included in the render tree as they will not appear in the rendered output. Nodes with \u003ccode\u003evisibility: hidden\u003c/code\u003e applied are included in the render tree, as they do take up space. As we have not given any directives to override the user agent default, the \u003ccode\u003escript\u003c/code\u003e node in our code example above will not be included in the render tree.\u003c/p\u003e\n\u003cp\u003eEach visible node has its CSSOM rules applied to it. The render tree holds all the visible nodes with content and computed styles — matching up all the relevant styles to every visible node in the DOM tree, and determining, based on the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade\"\u003eCSS cascade\u003c/a\u003e, what the computed styles are for each node.\u003c/p\u003e\n\u003ch3 id=\"layout\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#layout\"\u003eLayout\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#layout\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe fourth step in the critical rendering path is running layout on the render tree to compute the geometry of each node. \u003cem\u003eLayout\u003c/em\u003e is the process by which the dimensions and location of all the nodes in the render tree are determined, plus the determination of the size and position of each object on the page. \u003cem\u003eReflow\u003c/em\u003e is any subsequent size and position determination of any part of the page or the entire document.\u003c/p\u003e\n\u003cp\u003eOnce the render tree is built, layout commences. The render tree identified which nodes are displayed (even if invisible) along with their computed styles, but not the dimensions or location of each node. To determine the exact size and position of each object, the browser starts at the root of the render tree and traverses it.\u003c/p\u003e\n\u003cp\u003eOn the web page, almost everything is a box. Different devices and different desktop preferences mean an unlimited number of differing viewport sizes. In this phase, taking the viewport size into consideration, the browser determines what the sizes of all the different boxes are going to be on the screen. Taking the size of the viewport as its base, layout generally starts with the body, laying out the sizes of all the body's descendants, with each element's box model properties, providing placeholder space for replaced elements it doesn't know the dimensions of, such as our image.\u003c/p\u003e\n\u003cp\u003eThe first time the size and position of each node is determined is called \u003cem\u003elayout\u003c/em\u003e. Subsequent recalculations of are called \u003cem\u003ereflows\u003c/em\u003e. In our example, suppose the initial layout occurs before the image is returned. Since we didn't declare the dimensions of our image, there will be a reflow once the image dimensions are known.\u003c/p\u003e\n\u003ch3 id=\"paint\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#paint\"\u003ePaint\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#paint\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe last step in the critical rendering path is painting the individual nodes to the screen, the first occurrence of which is called the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/First_meaningful_paint\"\u003efirst meaningful paint\u003c/a\u003e. In the painting or rasterization phase, the browser converts each box calculated in the layout phase to actual pixels on the screen. Painting involves drawing every visual part of an element to the screen, including text, colors, borders, shadows, and replaced elements like buttons and images. The browser needs to do this super quickly.\u003c/p\u003e\n\u003cp\u003eTo ensure smooth scrolling and animation, everything occupying the main thread, including calculating styles, along with reflow and paint, must take the browser less than 16.67ms to accomplish. At 2048 x 1536, the iPad has over 3,145,000 pixels to be painted to the screen. That is a lot of pixels that have to be painted very quickly. To ensure repainting can be done even faster than the initial paint, the drawing to the screen is generally broken down into several layers. If this occurs, then compositing is necessary.\u003c/p\u003e\n\u003cp\u003ePainting can break the elements in the layout tree into layers. Promoting content into layers on the GPU (instead of the main thread on the CPU) improves paint and repaint performance. There are specific properties and elements that instantiate a layer, including \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video\"\u003e\u003ccode\u003e\u0026#x3C;video\u003e\u003c/code\u003e\u003c/a\u003e and \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas\"\u003e\u003ccode\u003e\u0026#x3C;canvas\u003e\u003c/code\u003e\u003c/a\u003e, and any element which has the CSS properties of \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\"\u003e\u003ccode\u003eopacity\u003c/code\u003e\u003c/a\u003e, a 3D \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/transform\"\u003e\u003ccode\u003etransform\u003c/code\u003e\u003c/a\u003e, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/will-change\"\u003e\u003ccode\u003ewill-change\u003c/code\u003e\u003c/a\u003e, and a few others. These nodes will be painted onto their own layer, along with their descendants, unless a descendant necessitates its own layer for one (or more) of the above reasons.\u003c/p\u003e\n\u003cp\u003eLayers do improve performance but are expensive when it comes to memory management, so should not be overused as part of web performance optimization strategies.\u003c/p\u003e\n\u003ch3 id=\"compositing\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#compositing\"\u003eCompositing\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#compositing\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWhen sections of the document are drawn in different layers, overlapping each other, compositing is necessary to ensure they are drawn to the screen in the right order and the content is rendered correctly.\u003c/p\u003e\n\u003cp\u003eAs the page continues to load assets, reflows can happen (recall our example image that arrived late). A reflow sparks a repaint and a re-composite. Had we defined the dimensions of our image, no reflow would have been necessary, and only the layer that needed to be repainted would be repainted, and composited if necessary. But we didn't include the image dimensions! When the image is obtained from the server, the rendering process goes back to the layout steps and restarts from there.\u003c/p\u003e\n\u003ch2 id=\"interactivity\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#interactivity\"\u003eInteractivity\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#interactivity\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eOnce the main thread is done painting the page, you would think we would be \"all set.\" That isn't necessarily the case. If the load includes JavaScript, that was correctly deferred, and only executed after the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event\"\u003e\u003ccode\u003eonload\u003c/code\u003e\u003c/a\u003e event fires, the main thread might be busy, and not available for scrolling, touch, and other interactions.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/Time_to_interactive\"\u003eTime to Interactive\u003c/a\u003e (TTI) is the measurement of how long it took from that first request which led to the DNS lookup and TCP connection to when the page is interactive — interactive being the point in time after the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/First_contentful_paint\"\u003eFirst Contentful Paint\u003c/a\u003e when the page responds to user interactions within 50ms. If the main thread is occupied parsing, compiling, and executing JavaScript, it is not available and therefore not able to respond to user interactions in a timely (less than 50ms) fashion.\u003c/p\u003e\n\u003cp\u003eIn our example, maybe the image loaded quickly, but perhaps the \u003ccode\u003eanotherscript.js\u003c/code\u003e file was 2MB and our user's network connection was slow. In this case, the user would see the page super quickly, but wouldn't be able to scroll without jank until the script was downloaded, parsed, and executed. That is not a good user experience. Avoid occupying the main thread, as demonstrated in this WebPageTest example:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work/visa_network.png\"\u003eThe main thread is occupied by the downloading, parsing and execution of a JavaScript file - over a fast connection\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIn this example, JavaScript execution took over 1.5 seconds, and the main thread was fully occupied that entire time, unresponsive to click events or screen taps.\u003c/p\u003e\n\u003ch2 id=\"see-also\"\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#see_also\"\u003eSee also\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#see-also\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance\"\u003eWeb Performance\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1766965759366,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a724de3efd251cf89fe82a5860d9008b","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":43,"column":5,"offset":2710},"end":{"line":43,"column":29,"offset":2734},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2026.articles","alias":"What I read in 2026","position":{"start":{"line":72,"column":3,"offset":4440},"end":{"line":72,"column":45,"offset":4482},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2026.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2025.articles","alias":"2025","position":{"start":{"line":73,"column":5,"offset":4487},"end":{"line":73,"column":32,"offset":4514},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2025.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2024.articles","alias":"2024","position":{"start":{"line":74,"column":5,"offset":4519},"end":{"line":74,"column":32,"offset":4546},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2024.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2023.articles","alias":"2023","position":{"start":{"line":75,"column":5,"offset":4551},"end":{"line":75,"column":32,"offset":4578},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2023.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2022.articles","alias":"2022","position":{"start":{"line":76,"column":5,"offset":4583},"end":{"line":76,"column":32,"offset":4610},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2022.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":82,"column":3,"offset":4746},"end":{"line":82,"column":39,"offset":4782},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":76,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","o7xruzrah5wzqetottecss7","z1zo2mp6ddji5p317i4x9xw","v06c2tjelh341x4resa50fh","0yqesk4rcffwgyuab5x8rfa","sy2vkbtyu671chkvgn1yt8j","ufixpmxoydiccoh59kphrib","alswadkx4wb05y1z9iwfzfv","1daut9dpw70xd0zh5a7j5p4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 현실은 인간의 연산으로 완전히 파악할 수 없는 복잡계. 주어진 상황과 능력으로 할 수 있는 최선의 적응은 단순함과 꾸준함.\n\n  - 파산을 면하는 선에서 여러가지를 해보고 자신에게 맞는 걸 위주로 꾸준히. 그를 위해 단순, 편안, 쾌적함이 필요.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2026|read.2026.articles]]\n  - [[2025|read.2025.articles]]\n  - [[2024|read.2024.articles]]\n  - [[2023|read.2023.articles]]\n  - [[2022|read.2022.articles]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"1r16fyj140hhxusvduuzqwc"},"buildId":"wirstT2ztC8OQsbzKjhvw","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>