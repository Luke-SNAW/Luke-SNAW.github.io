<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Your Nextjs Bundle Will Thank You</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Your Nextjs Bundle Will Thank You"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/9ju4drok0fv1fml7977iyba/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="11/8/2022"/><meta property="article:modified_time" content="11/8/2022"/><meta property="article:tag" content="performance"/><meta property="article:tag" content="divops"/><meta property="article:tag" content="bundler"/><link rel="canonical" href="https://luke-snaw.github.io//notes/9ju4drok0fv1fml7977iyba/"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="your-nextjs-bundle-will-thank-you">Your Nextjs Bundle Will Thank You<a aria-hidden="true" class="anchor-heading icon-link" href="#your-nextjs-bundle-will-thank-you"></a></h1>
<blockquote>
<p><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you">https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you</a></p>
</blockquote>
<h2 id="initial-check">Initial Check<a aria-hidden="true" class="anchor-heading icon-link" href="#initial-check"></a></h2>
<p>I did some checking, ran a couple of Lighthouse reports, and ended up with an average performance score of <strong>35 points</strong> on both mobile and desktop. Effectively they were not wrong, some problems were there. After a quick check of the report, I moved on to another type of testing, launching a production build to check the beautiful report that Next provides us. The result made me <strong>jump out of my chair</strong>.</p>
<h2 id="analyzing-problems"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#analyzing-problems">Analyzing Problems</a><a aria-hidden="true" class="anchor-heading icon-link" href="#analyzing-problems"></a></h2>
<h3 id="js-shared-by-all-files"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#js-shared-by-all-files">JS Shared By All Files</a><a aria-hidden="true" class="anchor-heading icon-link" href="#js-shared-by-all-files"></a></h3>
<h3 id="css-is-not-included-in-the-calculation"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#css-is-not-included-in-the-calculation">CSS is Not Included in the Calculation</a><a aria-hidden="true" class="anchor-heading icon-link" href="#css-is-not-included-in-the-calculation"></a></h3>
<h2 id="the-magic-madness-of-barrel-files">The Magic Madness of Barrel Files<a aria-hidden="true" class="anchor-heading icon-link" href="#the-magic-madness-of-barrel-files"></a></h2>
<p>Just to be clear, what is a Barrel File? Well, do you know when you put all your exports into an index.js file to have easier import paths? This is a Barrel File. (Did you know that the Node.js creator <a href="https://youtu.be/M3BM9TB-8yA?t=883">has regrets about having created it</a>?)</p>
<p>...</p>
<p>If you notice inside the components folder, there is a seemingly harmless file that has never been mentioned so far the index.js:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./auth-form"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./button"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./movie-autocomplete"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./navbar"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./phone-input"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./random-table"</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token operator">*</span></span> <span class="token keyword module">from</span> <span class="token string">"./side-menu"</span>
</code></pre>
<p>Think for a second about what is going on in this file, this file is responsible for exporting all the components within the components folder, to make them usable with a lighter import syntax. I will paste here the differences between the two import versions:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Navbar</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"../components"</span> <span class="token comment">// Version 1</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Navbar</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"../components/navbar"</span> <span class="token comment">// Version 2</span>
</code></pre>
<p>So yes, we save a subdirectory, but what is the consequence then? It will be enough to import even one tiny module from this index.js to cause a massive import of all other components within the page bundle.</p>
<h2 id="why-is-this-happening">Why is this happening?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-is-this-happening"></a></h2>
<p>So far we have discovered and solved the problem of having all pages with a giant bundle composed of unused dependencies, and we saw that the cause of this was an import from an index.js file, now I would like to explain why this thing causes this problem.</p>
<p>Normally, on a production build, JavaScript code undergoes several operations including removing unused modules, this specific phenomenon is called <strong>Tree Shaking</strong>. And you can imagine it this way: there’s a nice tree in your garden, that tree is your app source code, the green, and healthy leaves are the modules that your app uses, instead the brown and almost dead leaves are the unused modules.</p>
<h2 id="the-alternative-solution">The Alternative Solution<a aria-hidden="true" class="anchor-heading icon-link" href="#the-alternative-solution"></a></h2>
<blockquote>
<p>Yes, all is very nice, but isn’t there a way to have the same result by keeping index.js?</p>
</blockquote>
<p>Actually, there is, (most of the time) an alternative solution for you.</p>
<p>As you just read, Terser is doing a nice job, but sometimes it’s not perfect. To make it work better, we can give webpack a nice hint called sideEffects. This value can be put into a package.json and accepts RegEx, Strings, and Boolean as values. <strong>But what exactly a side effect is</strong>?</p>
<p>Well, official documentation can help us:</p>
<blockquote>
<p>A “side effect” is defined as code that performs a special behavior when imported, other than exposing one or more exports. An example of this are polyfills, which affect the global scope and usually do not provide an export.</p>
</blockquote>
<p>For example in our case we don’t use any side effects, so we can set directly false, helping webpack pruning the unused modules:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="a-smart-question">A Smart Question<a aria-hidden="true" class="anchor-heading icon-link" href="#a-smart-question"></a></h3>
<p>Do you remember when we removed the AuthForm and the Navbar component from the signin.js page? We initially solved the problem, but am I mistaken, or was there still an imported dependency present?</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Box</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> “@mui<span class="token operator">/</span>material
</code></pre>
<p>Why did this dependency not continue to cause the problem of the other two? Yet here again a <a href="https://github.com/mui/material-ui/blob/master/packages/mui-material/src/index.js#L51">barrel file</a> is used to export all the components, and well, the answer again can be <a href="https://github.com/mui/material-ui/blob/master/packages/mui-material/package.json#L76">found here</a>. And if you are wondering, <a href="https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/accordion/package.json#L27">ChakraUI</a> is using the same on all the components, and <a href="https://github.com/mantinedev/mantine/blob/master/src/mantine-core/package.json#L10">MantineUI</a> is using it too, even <a href="https://github.com/lodash/lodash/blob/master/package.json#L10">Lodash</a> (in the ESM version) takes advantage of this technique.</p>
<h2 id="common-tips-to-enhance-tree-shaking"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#common-tips-to-enhance-tree-shaking">Common Tips to Enhance Tree Shaking</a><a aria-hidden="true" class="anchor-heading icon-link" href="#common-tips-to-enhance-tree-shaking"></a></h2>
<h3 id="use-tree-shakeable-library"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#use-tree-shakeable-library">Use Tree Shakeable Library</a><a aria-hidden="true" class="anchor-heading icon-link" href="#use-tree-shakeable-library"></a></h3>
<p>Again, it can be a cliché but is very common to see projects with tons of non-tree-shakeable dependencies, how can you know if one of them is tree-shakeable or not? Using tools like <a href="https://bundlephobia.com/">BundlePhobia</a>.</p>
<h3 id="avoid-transpiling-to-commonjs"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#avoid-transpiling-to-commonjs">Avoid Transpiling to CommonJS</a><a aria-hidden="true" class="anchor-heading icon-link" href="#avoid-transpiling-to-commonjs"></a></h3>
<p>You should configure your bundler to leave intact all your ESM instead of transpiling it into CJS, otherwise, the tree-shaking will be much more difficult to be applied from the bundler. You can make this for example with Babel using this piece of code:</p>
<pre class="language-json"><code class="language-json">export default <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>;
</code></pre>
<h3 id="avoid-star-imports"><a href="https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#avoid-star-imports">Avoid Star Imports</a><a aria-hidden="true" class="anchor-heading icon-link" href="#avoid-star-imports"></a></h3>
<p>You should import only the modules you need, avoid importing * from a module, otherwise everything will be included in your code chunk, even if it’s unused!</p>
<hr>
<h2 id="tags">Tags<a aria-hidden="true" class="anchor-heading icon-link" href="#tags"></a></h2>
<ol>
<li><a class="color-tag" style="--tag-color: #04f489;" href="/notes/7hjo94zlze8pcpwotiabncq">performance</a></li>
<li><a class="color-tag" style="--tag-color: #ffffc2;" href="/notes/rxxnmv9rpms3ot9mw99cuxw">divops</a></li>
<li><a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">bundler (Private)</a></li>
</ol></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#initial-check" title="Initial Check">Initial Check</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#analyzing-problems" title="Analyzing Problems">Analyzing Problems</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#js-shared-by-all-files" title="JS Shared By All Files">JS Shared By All Files</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#css-is-not-included-in-the-calculation" title="CSS is Not Included in the Calculation">CSS is Not Included in the Calculation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-magic-madness-of-barrel-files" title="The Magic Madness of Barrel Files">The Magic Madness of Barrel Files</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-is-this-happening" title="Why is this happening?">Why is this happening?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-alternative-solution" title="The Alternative Solution">The Alternative Solution</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#a-smart-question" title="A Smart Question">A Smart Question</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#common-tips-to-enhance-tree-shaking" title="Common Tips to Enhance Tree Shaking">Common Tips to Enhance Tree Shaking</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#use-tree-shakeable-library" title="Use Tree Shakeable Library">Use Tree Shakeable Library</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#avoid-transpiling-to-commonjs" title="Avoid Transpiling to CommonJS">Avoid Transpiling to CommonJS</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#avoid-star-imports" title="Avoid Star Imports">Avoid Star Imports</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"9ju4drok0fv1fml7977iyba","title":"Your Nextjs Bundle Will Thank You","desc":"","updated":1667882410996,"created":1667881389948,"tags":["performance","divops","bundler"],"custom":{},"fname":"dev.javascript.divops.bundler.your-nextjs-bundle-will-thank-you","type":"note","vault":{"fsPath":"vault"},"contentHash":"79f40c70a2d3f01ad36045386163752d","links":[{"type":"frontmatterTag","from":{"fname":"dev.javascript.divops.bundler.your-nextjs-bundle-will-thank-you","id":"9ju4drok0fv1fml7977iyba","vaultName":"vault"},"value":"tags.performance","alias":"performance","xvault":false,"to":{"fname":"tags.performance"}},{"type":"frontmatterTag","from":{"fname":"dev.javascript.divops.bundler.your-nextjs-bundle-will-thank-you","id":"9ju4drok0fv1fml7977iyba","vaultName":"vault"},"value":"tags.divops","alias":"divops","xvault":false,"to":{"fname":"tags.divops"}},{"type":"frontmatterTag","from":{"fname":"dev.javascript.divops.bundler.your-nextjs-bundle-will-thank-you","id":"9ju4drok0fv1fml7977iyba","vaultName":"vault"},"value":"tags.bundler","alias":"bundler","xvault":false,"to":{"fname":"tags.bundler"}}],"anchors":{"initial-check":{"type":"header","text":"Initial Check","value":"initial-check","line":14,"column":0,"depth":2},"analyzing-problems":{"type":"header","text":"Analyzing Problems","value":"analyzing-problems","line":18,"column":0,"depth":2},"js-shared-by-all-files":{"type":"header","text":"JS Shared By All Files","value":"js-shared-by-all-files","line":20,"column":0,"depth":3},"css-is-not-included-in-the-calculation":{"type":"header","text":"CSS is Not Included in the Calculation","value":"css-is-not-included-in-the-calculation","line":22,"column":0,"depth":3},"the-magic-madness-of-barrel-files":{"type":"header","text":"The Magic Madness of Barrel Files","value":"the-magic-madness-of-barrel-files","line":24,"column":0,"depth":2},"why-is-this-happening":{"type":"header","text":"Why is this happening?","value":"why-is-this-happening","line":51,"column":0,"depth":2},"the-alternative-solution":{"type":"header","text":"The Alternative Solution","value":"the-alternative-solution","line":57,"column":0,"depth":2},"a-smart-question":{"type":"header","text":"A Smart Question","value":"a-smart-question","line":77,"column":0,"depth":3},"common-tips-to-enhance-tree-shaking":{"type":"header","text":"Common Tips to Enhance Tree Shaking","value":"common-tips-to-enhance-tree-shaking","line":87,"column":0,"depth":2},"use-tree-shakeable-library":{"type":"header","text":"Use Tree Shakeable Library","value":"use-tree-shakeable-library","line":89,"column":0,"depth":3},"avoid-transpiling-to-commonjs":{"type":"header","text":"Avoid Transpiling to CommonJS","value":"avoid-transpiling-to-commonjs","line":93,"column":0,"depth":3},"avoid-star-imports":{"type":"header","text":"Avoid Star Imports","value":"avoid-star-imports","line":110,"column":0,"depth":3}},"children":[],"parent":"yar2dqqpievcv5p75m5rzhz","data":{}},"body":"\u003ch1 id=\"your-nextjs-bundle-will-thank-you\"\u003eYour Nextjs Bundle Will Thank You\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#your-nextjs-bundle-will-thank-you\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you\"\u003ehttps://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"initial-check\"\u003eInitial Check\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#initial-check\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eI did some checking, ran a couple of Lighthouse reports, and ended up with an average performance score of \u003cstrong\u003e35 points\u003c/strong\u003e on both mobile and desktop. Effectively they were not wrong, some problems were there. After a quick check of the report, I moved on to another type of testing, launching a production build to check the beautiful report that Next provides us. The result made me \u003cstrong\u003ejump out of my chair\u003c/strong\u003e.\u003c/p\u003e\n\u003ch2 id=\"analyzing-problems\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#analyzing-problems\"\u003eAnalyzing Problems\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#analyzing-problems\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"js-shared-by-all-files\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#js-shared-by-all-files\"\u003eJS Shared By All Files\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#js-shared-by-all-files\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch3 id=\"css-is-not-included-in-the-calculation\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#css-is-not-included-in-the-calculation\"\u003eCSS is Not Included in the Calculation\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#css-is-not-included-in-the-calculation\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch2 id=\"the-magic-madness-of-barrel-files\"\u003eThe Magic Madness of Barrel Files\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-magic-madness-of-barrel-files\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eJust to be clear, what is a Barrel File? Well, do you know when you put all your exports into an index.js file to have easier import paths? This is a Barrel File. (Did you know that the Node.js creator \u003ca href=\"https://youtu.be/M3BM9TB-8yA?t=883\"\u003ehas regrets about having created it\u003c/a\u003e?)\u003c/p\u003e\n\u003cp\u003e...\u003c/p\u003e\n\u003cp\u003eIf you notice inside the components folder, there is a seemingly harmless file that has never been mentioned so far the index.js:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./auth-form\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./button\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./movie-autocomplete\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./navbar\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./phone-input\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./random-table\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./side-menu\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThink for a second about what is going on in this file, this file is responsible for exporting all the components within the components folder, to make them usable with a lighter import syntax. I will paste here the differences between the two import versions:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eNavbar\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"../components\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// Version 1\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eNavbar\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"../components/navbar\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// Version 2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo yes, we save a subdirectory, but what is the consequence then? It will be enough to import even one tiny module from this index.js to cause a massive import of all other components within the page bundle.\u003c/p\u003e\n\u003ch2 id=\"why-is-this-happening\"\u003eWhy is this happening?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-is-this-happening\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eSo far we have discovered and solved the problem of having all pages with a giant bundle composed of unused dependencies, and we saw that the cause of this was an import from an index.js file, now I would like to explain why this thing causes this problem.\u003c/p\u003e\n\u003cp\u003eNormally, on a production build, JavaScript code undergoes several operations including removing unused modules, this specific phenomenon is called \u003cstrong\u003eTree Shaking\u003c/strong\u003e. And you can imagine it this way: there’s a nice tree in your garden, that tree is your app source code, the green, and healthy leaves are the modules that your app uses, instead the brown and almost dead leaves are the unused modules.\u003c/p\u003e\n\u003ch2 id=\"the-alternative-solution\"\u003eThe Alternative Solution\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-alternative-solution\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYes, all is very nice, but isn’t there a way to have the same result by keeping index.js?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eActually, there is, (most of the time) an alternative solution for you.\u003c/p\u003e\n\u003cp\u003eAs you just read, Terser is doing a nice job, but sometimes it’s not perfect. To make it work better, we can give webpack a nice hint called sideEffects. This value can be put into a package.json and accepts RegEx, Strings, and Boolean as values. \u003cstrong\u003eBut what exactly a side effect is\u003c/strong\u003e?\u003c/p\u003e\n\u003cp\u003eWell, official documentation can help us:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA “side effect” is defined as code that performs a special behavior when imported, other than exposing one or more exports. An example of this are polyfills, which affect the global scope and usually do not provide an export.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eFor example in our case we don’t use any side effects, so we can set directly false, helping webpack pruning the unused modules:\u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"sideEffects\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"a-smart-question\"\u003eA Smart Question\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#a-smart-question\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eDo you remember when we removed the AuthForm and the Navbar component from the signin.js page? We initially solved the problem, but am I mistaken, or was there still an imported dependency present?\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eBox\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e “@mui\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ematerial\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhy did this dependency not continue to cause the problem of the other two? Yet here again a \u003ca href=\"https://github.com/mui/material-ui/blob/master/packages/mui-material/src/index.js#L51\"\u003ebarrel file\u003c/a\u003e is used to export all the components, and well, the answer again can be \u003ca href=\"https://github.com/mui/material-ui/blob/master/packages/mui-material/package.json#L76\"\u003efound here\u003c/a\u003e. And if you are wondering, \u003ca href=\"https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/accordion/package.json#L27\"\u003eChakraUI\u003c/a\u003e is using the same on all the components, and \u003ca href=\"https://github.com/mantinedev/mantine/blob/master/src/mantine-core/package.json#L10\"\u003eMantineUI\u003c/a\u003e is using it too, even \u003ca href=\"https://github.com/lodash/lodash/blob/master/package.json#L10\"\u003eLodash\u003c/a\u003e (in the ESM version) takes advantage of this technique.\u003c/p\u003e\n\u003ch2 id=\"common-tips-to-enhance-tree-shaking\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#common-tips-to-enhance-tree-shaking\"\u003eCommon Tips to Enhance Tree Shaking\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#common-tips-to-enhance-tree-shaking\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"use-tree-shakeable-library\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#use-tree-shakeable-library\"\u003eUse Tree Shakeable Library\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#use-tree-shakeable-library\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eAgain, it can be a cliché but is very common to see projects with tons of non-tree-shakeable dependencies, how can you know if one of them is tree-shakeable or not? Using tools like \u003ca href=\"https://bundlephobia.com/\"\u003eBundlePhobia\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"avoid-transpiling-to-commonjs\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#avoid-transpiling-to-commonjs\"\u003eAvoid Transpiling to CommonJS\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#avoid-transpiling-to-commonjs\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYou should configure your bundler to leave intact all your ESM instead of transpiling it into CJS, otherwise, the tree-shaking will be much more difficult to be applied from the bundler. You can make this for example with Babel using this piece of code:\u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003eexport default \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  presets\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"@babel/preset-env\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        modules\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"avoid-star-imports\"\u003e\u003ca href=\"https://renatopozzi.me/articles/your-nextjs-bundle-will-thank-you#avoid-star-imports\"\u003eAvoid Star Imports\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#avoid-star-imports\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYou should import only the modules you need, avoid importing * from a module, otherwise everything will be included in your code chunk, even if it’s unused!\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"tags\"\u003eTags\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tags\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca class=\"color-tag\" style=\"--tag-color: #04f489;\" href=\"/notes/7hjo94zlze8pcpwotiabncq\"\u003eperformance\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"color-tag\" style=\"--tag-color: #ffffc2;\" href=\"/notes/rxxnmv9rpms3ot9mw99cuxw\"\u003edivops\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003ebundler (Private)\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"9ju4drok0fv1fml7977iyba"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>