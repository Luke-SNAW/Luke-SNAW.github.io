<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>What Color is Your Function?</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="What Color is Your Function?"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/nuuhzhnxwgugngjcc2qzhjd/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="4/4/2022"/><meta property="article:modified_time" content="4/4/2022"/><link rel="canonical" href="https://luke-snaw.github.io//notes/nuuhzhnxwgugngjcc2qzhjd/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="what-color-is-your-function">What Color is Your Function?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-color-is-your-function"></a></h1>
<p><a href="https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/">https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/</a></p>
<h1 id="a-new-language">A new language<a aria-hidden="true" class="anchor-heading icon-link" href="#a-new-language"></a></h1>
<h1 id="what-color-is-your-function-1">What color is your function?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-color-is-your-function-1"></a></h1>
<p>Except wait. Here’s where our language gets screwy. It has this one peculiar feature:</p>
<h2 id="every-function-has-a-color">Every function has a color.<a aria-hidden="true" class="anchor-heading icon-link" href="#every-function-has-a-color"></a></h2>
<p>Each function—anonymous callback or regular named one—is either red or blue. Instead of a single function keyword, there are two:</p>
<pre><code>blue_function doSomethingAzure() {
// This is a blue function...
}

red_function doSomethingCarnelian() {
// This is a red function...
}
</code></pre>
<p>There are no colorless functions in the language. Want to make a function? Gotta pick a color. Them’s the rules. And, actually, there are a couple more rules you have to follow too:</p>
<h2 id="the-way-you-call-a-function-depends-on-its-color">The way you call a function depends on its color.<a aria-hidden="true" class="anchor-heading icon-link" href="#the-way-you-call-a-function-depends-on-its-color"></a></h2>
<p>Imagine a “blue call” syntax and a “red call” syntax. Something like:</p>
<pre><code>doSomethingAzure()blue;
doSomethingCarnelian()red;
</code></pre>
<p>When calling a function, you need to use the call that corresponds to its color. If you get it wrong—call a red function with <code>blue</code> after the parentheses or vice versa—it does something bad. Dredge up some long-forgotten nightmare from your childhood like a clown with snakes for arms hiding under your bed. That jumps out of your monitor and sucks out your vitreous humour.</p>
<p>Annoying rule, right? Oh, and one more:</p>
<h3 id="you-can-only-call-a-red-function-from-within-another-red-function">You can only call a red function from within another red function.<a aria-hidden="true" class="anchor-heading icon-link" href="#you-can-only-call-a-red-function-from-within-another-red-function"></a></h3>
<p>You can call a blue function from within a red one. This is kosher:</p>
<pre><code>red_function doSomethingCarnelian() {
doSomethingAzure()blue;
}
</code></pre>
<p>But you can’t go the other way. If you try to do this:</p>
<pre><code>blue_function doSomethingAzure() {
doSomethingCarnelian()red;
}
</code></pre>
<p>Well, you’re gonna get a visit from old Spidermouth the Night Clown.</p>
<p>This makes writing higher-order functions like our <code>filter</code>() example trickier. We have to pick a color for it and that affects the colors of the functions we’re allowed to pass to it. The obvious solution is to make <code>filter</code>() red. That way, it can take either red or blue functions and call them. But then we run into the next itchy spot in the hairshirt that is this language:</p>
<h2 id="red-functions-are-more-painful-to-call">Red functions are more painful to call.<a aria-hidden="true" class="anchor-heading icon-link" href="#red-functions-are-more-painful-to-call"></a></h2>
<p>For now, I won’t precisely define “painful”, but just imagine that the programmer has to jump through some kind of annoying hoops every time they call a red function.</p>
<p>What matters is that if you decide to make a function red, everyone using your API will want to spit in your coffee and/or deposit some even less savory fluids in it.</p>
<p>The obvious solution then is to never use red functions. Just make everything blue and you’re back to the sane world where all functions have the same color, which is equivalent to them all having no color, which is equivalent to our language not being entirely stupid.</p>
<p>Alas, the sadistic language designers—and we all know all programming language designers are sadists, don’t we?—jabbed one final thorn in our side:</p>
<h2 id="some-core-library-functions-are-red">Some core library functions are red.<a aria-hidden="true" class="anchor-heading icon-link" href="#some-core-library-functions-are-red"></a></h2>
<h1 id="its-functional-programmings-fault">It’s functional programming’s fault!<a aria-hidden="true" class="anchor-heading icon-link" href="#its-functional-programmings-fault"></a></h1>
<p>You might be thinking that the problem here is we’re trying to use higher-order functions.</p>
<p>If we only call blue functions, make our function blue. Otherwise, make it red. As long as we never make functions that accept functions, we don’t have to worry about trying to be “polymorphic over function color” (“polychromatic”?) or any nonsense like that.</p>
<p>But, alas, higher order functions are just one example. This problem is pervasive any time we want to break our program down into separate functions that get reused.</p>
<p>For example, let’s say we have a nice little blob of code that, I don’t know, implements Dijkstra’s algorithm over a graph representing how much your social network are crushing on each other.</p>
<p>Later, you end up needing to use this same blob of code somewhere else. You do the natural thing and hoist it out into a separate function. You call it from the old place and your new code that uses it. But what color should it be? Obviously, you’ll make it blue if you can, but what if it uses one of those nasty red-only core library functions?</p>
<p>What if the new place you want to call it is blue? You’ll have to turn it red. Then you’ll have to turn the function that calls it red.</p>
<h1 id="a-colorful-allegory">A colorful allegory<a aria-hidden="true" class="anchor-heading icon-link" href="#a-colorful-allegory"></a></h1>
<p>Of course, I’m not really talking about color here, am I? It’s an allegory, a literary trick. The Sneetches isn’t about stars on bellies, it’s about race. By now, you may have an inkling of what color actually represents. If not, here’s the big reveal:</p>
<p><strong>Red functions are asynchronous ones.</strong></p>
<p>...</p>
<h1 id="i-promise-the-future-is-better">I promise the future is better<a aria-hidden="true" class="anchor-heading icon-link" href="#i-promise-the-future-is-better"></a></h1>
<h1 id="im-awaiting-a-solution">I’m awaiting a solution<a aria-hidden="true" class="anchor-heading icon-link" href="#im-awaiting-a-solution"></a></h1>
<h1 id="what-language-isnt-colored">What language isn’t colored?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-language-isnt-colored"></a></h1>
<p>So JS, Dart, C#, and Python have this problem. CoffeeScript and most other languages that compile to JS do too (which is why Dart inherited it). I think even ClojureScript has this issue even though they’ve tried really hard to push against it with their <a href="https://github.com/clojure/core.async">core.async</a> stuff.</p>
<p>Wanna know one that doesn’t? Java. There you go. In their defense, they are actively trying to correct this oversight by moving to futures and async IO. It’s like a race to the bottom.</p>
<p>C# also actually can avoid this problem too. They opted in to having color. Before they added async-await and all of the <code>Task&#x3C;T></code> stuff, you just used regular sync API calls. Three more languages that don’t have this problem: Go, Lua, and Ruby.</p>
<p>Any guess what they have in common?</p>
<p>Threads. Or, more precisely: multiple independent callstacks that can be switched between. It isn’t strictly necessary for them to be operating system threads. Goroutines in Go, coroutines in Lua, and fibers in Ruby are perfectly adequate.</p>
<p>(That’s why C# has that little caveat. You can avoid the pain of async in C# by using threads.)</p>
<h1 id="remembrance-of-operations-past">Remembrance of operations past<a aria-hidden="true" class="anchor-heading icon-link" href="#remembrance-of-operations-past"></a></h1>
<h1 id="awaiting-a-generated-solution">Awaiting a generated solution<a aria-hidden="true" class="anchor-heading icon-link" href="#awaiting-a-generated-solution"></a></h1>
<h1 id="reified-callstacks">Reified callstacks<a aria-hidden="true" class="anchor-heading icon-link" href="#reified-callstacks"></a></h1>
<p>But if you have threads (green- or OS-level), you don’t need to do that. You can just suspend the entire thread and hop straight back to the OS or event loop <em>without having to return from all of those functions.</em></p>
<p>Go is the language that does this most beautifully in my opinion. As soon as you do any IO operation, it just parks that goroutine and resumes any other ones that aren’t blocked on IO.</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#a-new-language" title="A new language">A new language</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-color-is-your-function" title="What color is your function?">What color is your function?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#every-function-has-a-color" title="Every function has a color.">Every function has a color.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-way-you-call-a-function-depends-on-its-color" title="The way you call a function depends on its color.">The way you call a function depends on its color.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#you-can-only-call-a-red-function-from-within-another-red-function" title="You can only call a red function from within another red function.">You can only call a red function from within another red function.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#red-functions-are-more-painful-to-call" title="Red functions are more painful to call.">Red functions are more painful to call.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#some-core-library-functions-are-red" title="Some core library functions are red.">Some core library functions are red.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#its-functional-programmings-fault" title="It’s functional programming’s fault!">It’s functional programming’s fault!</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#a-colorful-allegory" title="A colorful allegory">A colorful allegory</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#i-promise-the-future-is-better" title="I promise the future is better">I promise the future is better</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#im-awaiting-a-solution" title="I’m awaiting a solution">I’m awaiting a solution</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-language-isnt-colored" title="What language isn’t colored?">What language isn’t colored?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#remembrance-of-operations-past" title="Remembrance of operations past">Remembrance of operations past</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#awaiting-a-generated-solution" title="Awaiting a generated solution">Awaiting a generated solution</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#reified-callstacks" title="Reified callstacks">Reified callstacks</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"nuuhzhnxwgugngjcc2qzhjd","title":"What Color is Your Function?","desc":"","updated":1649035073092,"created":1649034460971,"custom":{},"fname":"dev.program-languages.What Color is Your Function","type":"note","vault":{"fsPath":"vault"},"contentHash":"ccd775e8d29dd1fb96ab53d30623fa1d","links":[],"anchors":{"a-new-language":{"type":"header","text":"A new language","value":"a-new-language","line":10,"column":0,"depth":1},"what-color-is-your-function":{"type":"header","text":"What color is your function?","value":"what-color-is-your-function","line":12,"column":0,"depth":1},"every-function-has-a-color":{"type":"header","text":"Every function has a color.","value":"every-function-has-a-color","line":16,"column":0,"depth":2},"the-way-you-call-a-function-depends-on-its-color":{"type":"header","text":"The way you call a function depends on its color.","value":"the-way-you-call-a-function-depends-on-its-color","line":32,"column":0,"depth":2},"you-can-only-call-a-red-function-from-within-another-red-function":{"type":"header","text":"You can only call a red function from within another red function.","value":"you-can-only-call-a-red-function-from-within-another-red-function","line":45,"column":0,"depth":3},"red-functions-are-more-painful-to-call":{"type":"header","text":"Red functions are more painful to call.","value":"red-functions-are-more-painful-to-call","line":67,"column":0,"depth":2},"some-core-library-functions-are-red":{"type":"header","text":"Some core library functions are red.","value":"some-core-library-functions-are-red","line":77,"column":0,"depth":2},"its-functional-programmings-fault":{"type":"header","text":"It’s functional programming’s fault!","value":"its-functional-programmings-fault","line":79,"column":0,"depth":1},"a-colorful-allegory":{"type":"header","text":"A colorful allegory","value":"a-colorful-allegory","line":93,"column":0,"depth":1},"i-promise-the-future-is-better":{"type":"header","text":"I promise the future is better","value":"i-promise-the-future-is-better","line":101,"column":0,"depth":1},"im-awaiting-a-solution":{"type":"header","text":"I’m awaiting a solution","value":"im-awaiting-a-solution","line":103,"column":0,"depth":1},"what-language-isnt-colored":{"type":"header","text":"What language isn’t colored?","value":"what-language-isnt-colored","line":105,"column":0,"depth":1},"remembrance-of-operations-past":{"type":"header","text":"Remembrance of operations past","value":"remembrance-of-operations-past","line":119,"column":0,"depth":1},"awaiting-a-generated-solution":{"type":"header","text":"Awaiting a generated solution","value":"awaiting-a-generated-solution","line":121,"column":0,"depth":1},"reified-callstacks":{"type":"header","text":"Reified callstacks","value":"reified-callstacks","line":123,"column":0,"depth":1}},"children":[],"parent":"cnzc1i8ojequt9lhg3zpkgo","data":{}},"body":"\u003ch1 id=\"what-color-is-your-function\"\u003eWhat Color is Your Function?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-color-is-your-function\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\"\u003ehttps://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"a-new-language\"\u003eA new language\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#a-new-language\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"what-color-is-your-function-1\"\u003eWhat color is your function?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-color-is-your-function-1\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eExcept wait. Here’s where our language gets screwy. It has this one peculiar feature:\u003c/p\u003e\n\u003ch2 id=\"every-function-has-a-color\"\u003eEvery function has a color.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#every-function-has-a-color\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eEach function—anonymous callback or regular named one—is either red or blue. Instead of a single function keyword, there are two:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eblue_function doSomethingAzure() {\n// This is a blue function...\n}\n\nred_function doSomethingCarnelian() {\n// This is a red function...\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere are no colorless functions in the language. Want to make a function? Gotta pick a color. Them’s the rules. And, actually, there are a couple more rules you have to follow too:\u003c/p\u003e\n\u003ch2 id=\"the-way-you-call-a-function-depends-on-its-color\"\u003eThe way you call a function depends on its color.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-way-you-call-a-function-depends-on-its-color\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eImagine a “blue call” syntax and a “red call” syntax. Something like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edoSomethingAzure()blue;\ndoSomethingCarnelian()red;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhen calling a function, you need to use the call that corresponds to its color. If you get it wrong—call a red function with \u003ccode\u003eblue\u003c/code\u003e after the parentheses or vice versa—it does something bad. Dredge up some long-forgotten nightmare from your childhood like a clown with snakes for arms hiding under your bed. That jumps out of your monitor and sucks out your vitreous humour.\u003c/p\u003e\n\u003cp\u003eAnnoying rule, right? Oh, and one more:\u003c/p\u003e\n\u003ch3 id=\"you-can-only-call-a-red-function-from-within-another-red-function\"\u003eYou can only call a red function from within another red function.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#you-can-only-call-a-red-function-from-within-another-red-function\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYou can call a blue function from within a red one. This is kosher:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ered_function doSomethingCarnelian() {\ndoSomethingAzure()blue;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBut you can’t go the other way. If you try to do this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eblue_function doSomethingAzure() {\ndoSomethingCarnelian()red;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWell, you’re gonna get a visit from old Spidermouth the Night Clown.\u003c/p\u003e\n\u003cp\u003eThis makes writing higher-order functions like our \u003ccode\u003efilter\u003c/code\u003e() example trickier. We have to pick a color for it and that affects the colors of the functions we’re allowed to pass to it. The obvious solution is to make \u003ccode\u003efilter\u003c/code\u003e() red. That way, it can take either red or blue functions and call them. But then we run into the next itchy spot in the hairshirt that is this language:\u003c/p\u003e\n\u003ch2 id=\"red-functions-are-more-painful-to-call\"\u003eRed functions are more painful to call.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#red-functions-are-more-painful-to-call\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eFor now, I won’t precisely define “painful”, but just imagine that the programmer has to jump through some kind of annoying hoops every time they call a red function.\u003c/p\u003e\n\u003cp\u003eWhat matters is that if you decide to make a function red, everyone using your API will want to spit in your coffee and/or deposit some even less savory fluids in it.\u003c/p\u003e\n\u003cp\u003eThe obvious solution then is to never use red functions. Just make everything blue and you’re back to the sane world where all functions have the same color, which is equivalent to them all having no color, which is equivalent to our language not being entirely stupid.\u003c/p\u003e\n\u003cp\u003eAlas, the sadistic language designers—and we all know all programming language designers are sadists, don’t we?—jabbed one final thorn in our side:\u003c/p\u003e\n\u003ch2 id=\"some-core-library-functions-are-red\"\u003eSome core library functions are red.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#some-core-library-functions-are-red\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch1 id=\"its-functional-programmings-fault\"\u003eIt’s functional programming’s fault!\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#its-functional-programmings-fault\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eYou might be thinking that the problem here is we’re trying to use higher-order functions.\u003c/p\u003e\n\u003cp\u003eIf we only call blue functions, make our function blue. Otherwise, make it red. As long as we never make functions that accept functions, we don’t have to worry about trying to be “polymorphic over function color” (“polychromatic”?) or any nonsense like that.\u003c/p\u003e\n\u003cp\u003eBut, alas, higher order functions are just one example. This problem is pervasive any time we want to break our program down into separate functions that get reused.\u003c/p\u003e\n\u003cp\u003eFor example, let’s say we have a nice little blob of code that, I don’t know, implements Dijkstra’s algorithm over a graph representing how much your social network are crushing on each other.\u003c/p\u003e\n\u003cp\u003eLater, you end up needing to use this same blob of code somewhere else. You do the natural thing and hoist it out into a separate function. You call it from the old place and your new code that uses it. But what color should it be? Obviously, you’ll make it blue if you can, but what if it uses one of those nasty red-only core library functions?\u003c/p\u003e\n\u003cp\u003eWhat if the new place you want to call it is blue? You’ll have to turn it red. Then you’ll have to turn the function that calls it red.\u003c/p\u003e\n\u003ch1 id=\"a-colorful-allegory\"\u003eA colorful allegory\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#a-colorful-allegory\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eOf course, I’m not really talking about color here, am I? It’s an allegory, a literary trick. The Sneetches isn’t about stars on bellies, it’s about race. By now, you may have an inkling of what color actually represents. If not, here’s the big reveal:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eRed functions are asynchronous ones.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e...\u003c/p\u003e\n\u003ch1 id=\"i-promise-the-future-is-better\"\u003eI promise the future is better\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#i-promise-the-future-is-better\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"im-awaiting-a-solution\"\u003eI’m awaiting a solution\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#im-awaiting-a-solution\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"what-language-isnt-colored\"\u003eWhat language isn’t colored?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-language-isnt-colored\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eSo JS, Dart, C#, and Python have this problem. CoffeeScript and most other languages that compile to JS do too (which is why Dart inherited it). I think even ClojureScript has this issue even though they’ve tried really hard to push against it with their \u003ca href=\"https://github.com/clojure/core.async\"\u003ecore.async\u003c/a\u003e stuff.\u003c/p\u003e\n\u003cp\u003eWanna know one that doesn’t? Java. There you go. In their defense, they are actively trying to correct this oversight by moving to futures and async IO. It’s like a race to the bottom.\u003c/p\u003e\n\u003cp\u003eC# also actually can avoid this problem too. They opted in to having color. Before they added async-await and all of the \u003ccode\u003eTask\u0026#x3C;T\u003e\u003c/code\u003e stuff, you just used regular sync API calls. Three more languages that don’t have this problem: Go, Lua, and Ruby.\u003c/p\u003e\n\u003cp\u003eAny guess what they have in common?\u003c/p\u003e\n\u003cp\u003eThreads. Or, more precisely: multiple independent callstacks that can be switched between. It isn’t strictly necessary for them to be operating system threads. Goroutines in Go, coroutines in Lua, and fibers in Ruby are perfectly adequate.\u003c/p\u003e\n\u003cp\u003e(That’s why C# has that little caveat. You can avoid the pain of async in C# by using threads.)\u003c/p\u003e\n\u003ch1 id=\"remembrance-of-operations-past\"\u003eRemembrance of operations past\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#remembrance-of-operations-past\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"awaiting-a-generated-solution\"\u003eAwaiting a generated solution\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#awaiting-a-generated-solution\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"reified-callstacks\"\u003eReified callstacks\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reified-callstacks\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eBut if you have threads (green- or OS-level), you don’t need to do that. You can just suspend the entire thread and hop straight back to the OS or event loop \u003cem\u003ewithout having to return from all of those functions.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eGo is the language that does this most beautifully in my opinion. As soon as you do any IO operation, it just parks that goroutine and resumes any other ones that aren’t blocked on IO.\u003c/p\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"nuuhzhnxwgugngjcc2qzhjd"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>