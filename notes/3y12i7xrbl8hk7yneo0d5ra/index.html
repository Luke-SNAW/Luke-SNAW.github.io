<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Get All That Network Activity Under Control with Priority Hints</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Get All That Network Activity Under Control with Priority Hints"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/3y12i7xrbl8hk7yneo0d5ra/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="9/21/2023"/><meta property="article:modified_time" content="9/21/2023"/><link rel="canonical" href="https://luke-snaw.github.io//notes/3y12i7xrbl8hk7yneo0d5ra/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_buildManifest.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="get-all-that-network-activity-under-control-with-priority-hints">Get All That Network Activity Under Control with Priority Hints<a aria-hidden="true" class="anchor-heading icon-link" href="#get-all-that-network-activity-under-control-with-priority-hints"></a></h1>
<blockquote>
<p><a href="https://www.macarthur.me/posts/priority-hints">https://www.macarthur.me/posts/priority-hints</a></p>
</blockquote>
<p>The browser is very good at prioritizing resources requests on its own. But it's not always great. Priority hints makes it easy to provide explicit instructions as to how and in what network activity occurs.</p>
<p>Open up the browser's network tab and you'll see a lot of activity. Assets are being downloaded, information's being submitted, events are being logged, and more.</p>
<p>With so much going on, effectively managing the priority of that traffic is pretty critical. Bandwidth contention is real, and some HTTP requests simply don't rank as highly as others when they're all firing at once. For example, if you <em>had</em> to choose, you'd probably prefer someone's payment request successfully complete vs. an analytics request simply indicating they tried. And having your hero image show up as quickly as possible is arguably more important than your logo rendering in the footer of your page.</p>
<p>Fortunately, the browser has a growing collection of tools to help prioritize all this network activity. These "<a href="https://github.com/WICG/priority-hints/blob/main/EXPLAINER.md?ref=alex-macarthur">priority hints</a>" help the browser make fewer assumptions and clearer decisions about which requests to favor over others when resources are limited.</p>
<p>It's a useful suite of tools, and they can make a tangible impact to page performance when leveraged well, including those increasingly important core web vitals. Let's explore a few of them, along with some scenarios in which they're most helpful.</p>
<h2 id="prioritizing-preloaded-assets"><a href="https://www.macarthur.me/posts/priority-hints#prioritizing-preloaded-assets">Prioritizing Preloaded Assets</a><a aria-hidden="true" class="anchor-heading icon-link" href="#prioritizing-preloaded-assets"></a></h2>
<p>Modern browsers have a well-supported means of being told about resources that'll <em>eventually</em> be needed on the current page: <code>&#x3C;link rel="preload" ... /></code>. When placed in the <code>&#x3C;head></code> of the document, the browser is instructed to begin downloading it as soon as possible with "high" priority.</p>
<p>To be fair, the preload scanner in the browser is already <em>really good</em> at this sort of thing (<a href="https://www.macarthur.me/posts/effective-preloading?ref=alex-macarthur">I've previously written</a> about it in a little more depth). For that reason, preloading is best used on <em>late-discovered</em> assets – anything not loaded directly by your HTML. Think: a font file loaded within some CSS, or a background image loaded via an inline <code>style</code> attribute.</p>
<p>Consider a font that's loaded exclusively through a CSS <code>@font-face</code> rule:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Inter Variable"</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"./font.woff2"</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"woff2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>On load, that font gets the lowest download priority, despite it being pretty important for the visual experience of the page.</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-12-highlighted.png">image showing low download priothe font file is given low download priority when loaded just through CSSrity of fonts</a></p>
<p>Now, let's preload that resource:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&#x3C;!-- Other stuff... --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/font.woff2<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>font<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
</code></pre>
<p>It's now far more favored:</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-12.png">the font is given higher download priority after being preloaded</a></p>
<p>But you can get <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement/fetchPriority?ref=alex-macarthur">even more explicit</a> using the <code>fetchpriority</code> directly on the <code>link</code> tag. It'll let you signal relative priority when preloading multiple assets at once.</p>
<p>Here's a contrived scenario in which you'd like to preload two fonts, but give one priority over the other:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./font-1.woff2<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>font<span class="token punctuation">"</span></span> <span class="token attr-name">fetchpriority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>low<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./font-2.woff2<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>font<span class="token punctuation">"</span></span> <span class="token attr-name">fetchpriority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>The resulting network activity reflects these instructions (I included a third, non-preloaded font in there too, just because).</p>
<p><img src="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-14.png"></p>
<h3 id="when-to-use-it"><a href="https://www.macarthur.me/posts/priority-hints#when-to-use-it">When to Use It</a><a aria-hidden="true" class="anchor-heading icon-link" href="#when-to-use-it"></a></h3>
<p>In general, use preloading when an asset isn't loaded by your HTML directly, but it's critical to the experience of the page (fonts, CSS background images, etc.). And include the <code>fetchpriority</code> attribute when preloading several resources of the same type and you're clear about which is most important.</p>
<h2 id="prioritizing-fetch-requests"><a href="https://www.macarthur.me/posts/priority-hints#prioritizing-fetch-requests">Prioritizing <code>fetch()</code> Requests</a><a aria-hidden="true" class="anchor-heading icon-link" href="#prioritizing-fetch-requests"></a></h2>
<p>In my opinion, the Fetch API is one of the most ergonomic offerings of the modern web. And it has some nice features that <code>XMLHttpRequest</code> lacked, like the ability to <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch?ref=alex-macarthur">signal priority</a> on an outgoing request.</p>
<p>The most top-of-mind use case is one I've already mentioned: analytics requests. When bandwidth is slim and multiple requests are in play, the browser will make its own priority decisions. But we as engineers (should) know that your typical analytics requests ought to take a back seat to others more critical to the page's purpose. Modern <code>fetch()</code> makes that easy.</p>
<p>Here's a simple setup with two requests being queued at (virtually) the same time:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8000/pay"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> paymentBody<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8000/log"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> loggingBody<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>By default, the browser will automatically consider them both "high" priority:</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-16.png">both requests will have high priority by default</a></p>
<p>Now, we'll explicitly tell the browser how each request should be prioritized:</p>
<pre class="language-diff"><code class="language-diff">fetch("http://localhost:8000/pay", {
	method: "POST",
	body: paymentBody,
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	priority: "high"
</span></span>});

fetch("http://localhost:8000/log", {
	method: "POST",
	body: loggingBody,
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	priority: "low"
</span></span>});
</code></pre>
<p>This time around, the priorities are different:</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-17.png">one request now has higher priority than the other</a></p>
<h4 id="useful-counterpart-keepalive-true"><a href="https://www.macarthur.me/posts/priority-hints#useful-counterpart-keepalive-true">Useful counterpart: <code>keepalive: true</code></a><a aria-hidden="true" class="anchor-heading icon-link" href="#useful-counterpart-keepalive-true"></a></h4>
<p>A possible concern here is that "low" priority requests may be lost to the void – cancelled if the user navigates away from the page too soon. That's a legitimate issue. Depending on a few factors, either closing the tab or moving onto the next page may cause an important, but <em>relatively</em> low-priority request to be aborted.</p>
<p>Fortunately, <code>fetch()</code> also accepts a <code>keepalive</code> option. When set to <code>true</code>, the browser will carry that request to completion even when the page is terminated. If you'd like to dig into it more, take a gander at <a href="https://css-tricks.com/send-an-http-request-on-page-exit/?ref=alex-macarthur">what I wrote for for CSS-Tricks</a> a while back.</p>
<h3 id="when-to-use-it-1"><a href="https://www.macarthur.me/posts/priority-hints#when-to-use-it-1">When to Use It</a><a aria-hidden="true" class="anchor-heading icon-link" href="#when-to-use-it-1"></a></h3>
<p>Indicate <code>fetch()</code>priority when you know multiple requests are executing concurrently, and it's clear to you which is most important (or which can safely be deprioritized).</p>
<h2 id="prioritizing-img--requests"><a href="https://www.macarthur.me/posts/priority-hints#prioritizing-img-requests">Prioritizing <code>&#x3C;img /></code> Requests</a><a aria-hidden="true" class="anchor-heading icon-link" href="#prioritizing-img--requests"></a></h2>
<p>Without us doing anything special, the browser attempts to do its best at determining the most important images on a page. To illustrate this, I loaded the following images, spaced a good distance apart, so only one would be "above the fold."</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-1.jpeg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token unit">px</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-2.jpeg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token unit">px</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-3.jpeg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>The browser picked up on which was most important, but it took a second. When downloading began, all three were "low" priority. But shortly after, the one above the fold switched to "high."</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/loading-priority.gif">priority for images shifts when loading begins</a></p>
<p>Things became more predictable when I added a <code>fetchpriority</code> attribute to the first image:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-1.jpeg<span class="token punctuation">"</span></span> <span class="token attr-name">fetchpriority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>After that, <code>cat-1.jpeg</code>loaded at the highest priority right out of the gate. While initially head-tilting, it makes sense. The browser is smart at determining resource criticality, but it benefits from clear instructions. If you know an image is important, be explicit about it.</p>
<p>This feature, by the way, pairs very nicely with native image lazy loading, a very well-supported feature these days.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-1.jpeg<span class="token punctuation">"</span></span> <span class="token attr-name">fetchpriority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token unit">px</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-2.jpeg<span class="token punctuation">"</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token unit">px</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./cat-3.jpeg<span class="token punctuation">"</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>With that in place, the browser knows exactly how (and if) to load images, only when appropriate. In my case, it won't even begin the request for off-screen images on initial load. Instead, it'll wait until they're closer to the viewport.</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-18.png">priority for images shifts</a></p>
<h3 id="when-to-use-it-2"><a href="https://www.macarthur.me/posts/priority-hints#when-to-use-it-2">When to Use It</a><a aria-hidden="true" class="anchor-heading icon-link" href="#when-to-use-it-2"></a></h3>
<p>Use an explicit <code>fetchpriority</code> on images when you know they're very important to page experience. Hero images are a great place to start, and it can even have an impact on a page's core web vitals – <a href="https://addyosmani.com/blog/fetch-priority/?ref=alex-macarthur">specifically, LCP</a> (largest contentful paint).</p>
<h2 id="prioritizing-script--tags"><a href="https://www.macarthur.me/posts/priority-hints#prioritizing-script-tags">Prioritizing <code>&#x3C;script /></code> Tags</a><a aria-hidden="true" class="anchor-heading icon-link" href="#prioritizing-script--tags"></a></h2>
<p>Any plain <code>&#x3C;script /></code> with a <code>src</code> attribute on a page will get <code>high</code> priority as it's being fetched, but there's a trade-off: it blocks parsing of the rest of the page until it's loaded and executed. For that reason, the <code>async</code> attribute is helpful. It'll request the script in the background at <code>low</code> priority, and execute as soon as it's ready. Knowing this, the following setup behaves predictably:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/script-async.js<span class="token punctuation">"</span></span> <span class="token attr-name">async</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'async'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/script-sync.js<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'sync'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>The asynchronous script is demoted in priority:</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-22.png">asynchronous script is downloaded with "low" priority</a></p>
<p>And the console confirms that subsequent scripts were allowed to parse and execute as the <code>async</code> script was loading.</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/async-1.gif">script loaded asynchronously</a></p>
<h3 id="non-blocking-but-high-priority-scripts"><a href="https://www.macarthur.me/posts/priority-hints#non-blocking-but-high-priority-scripts">Non-Blocking, but High-Priority Scripts</a><a aria-hidden="true" class="anchor-heading icon-link" href="#non-blocking-but-high-priority-scripts"></a></h3>
<p>Most of the time, that behavior's fine. But sometimes, you might want a script to load both asynchronously <em>and</em> with "high" priority.</p>
<p>A possible scenario is a small SPA mounted in the hero of a landing page. In order to preserve the page's core web vitals, specifically LCP and FID (first input delay, soon to be replaced by <a href="https://developers.google.com/search/blog/2023/05/introducing-inp?ref=alex-macarthur">interaction to next paint</a>), you'll need that script to be highly prioritized (after all, it's responsible for building and powering your application). But at the same time, you don't want it to block the rest of the page from parsing.</p>
<p>So, let's give it a <code>fetchpriority</code>:</p>
<pre class="language-diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &#x3C;script src="/script-async.js" async onload="console.log('async')" fetchpriority="high">&#x3C;/script>
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&#x3C;</span><span class="token line">script src="/script-sync.js" onload="console.log('sync')">&#x3C;/script>
</span><span class="token prefix deleted">&#x3C;</span><span class="token line">script>console.log("inline");&#x3C;/script>
</span></span></code></pre>
<p>And now, it's downloaded with elevated priority, while still not blocking the rest of the page:</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-23.png">asynchronous script downloaded with high priority</a></p>
<p>And the console verifies this. With that higher priority, the async script loads more quickly. In this case, even before the synchronous and inline ones.</p>
<p><a href="https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/prioritized-async.gif">log asynchronous script downloaded</a></p>
<p>While I didn't toy with it specifically here, yes, <code>fetchpriority</code> works with deferred scripts as well.</p>
<h3 id="when-to-use-it-3"><a href="https://www.macarthur.me/posts/priority-hints#when-to-use-it-3">When to Use It</a><a aria-hidden="true" class="anchor-heading icon-link" href="#when-to-use-it-3"></a></h3>
<p>Place <code>fetchpriority</code> on your scripts when you know their priorities up front, and if you suspect the browser won't have enough information to determine on its own. As I mentioned, it's particularly helpful for prioritizing scripts that you'd also like to load in non-blocking, asynchronous way.</p>
<h2 id="to-be-used-intentionally"><a href="https://www.macarthur.me/posts/priority-hints#to-be-used-intentionally">To Be Used Intentionally</a><a aria-hidden="true" class="anchor-heading icon-link" href="#to-be-used-intentionally"></a></h2>
<p>It's easy to become a little overzealous about tools like this, leading to overuse. So, be careful – doing so may come at a cost. As the adage goes: "emphasizing everything = emphasizing nothing." In fact, overuse may actually make it <em>more difficult</em> for the browser to manage against network contention, <em>harming</em> a page's performance.</p>
<p>MDN even makes a point to call it out in some of their <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement/fetchPriority?ref=alex-macarthur">priority hint documentation</a>:</p>
<blockquote>
<p>Use it sparingly for exceptional cases where the browser may not be able to infer the best way to load the resource automatically. Over use can result in degrading performance.</p>
</blockquote>
<p>So, don't feel obligated to reach for these tools just because they exist. Wield them with care.</p>
<h2 id="reviewing-when-to-hint"><a href="https://www.macarthur.me/posts/priority-hints#reviewing-when-to-hint">Reviewing: When to Hint</a><a aria-hidden="true" class="anchor-heading icon-link" href="#reviewing-when-to-hint"></a></h2>
<p>There's a lot here, so let's quickly review some times you might choose to leverage priority hints. They're not exhaustive. Just some good places to start.</p>
<ul>
<li>Hint <strong>preloaded assets</strong> when you want the browser to be aware of multiple late-discovered resources, some of which bring more critical to the page than others.</li>
<li>Hint <strong><code>fetch()</code> requests</strong> that you know are either a crucial part of a user's experience, or can safely be deprioritized to make way for more important ones.</li>
<li>Hint above-the-fold <strong>images</strong> you want to be loaded &#x26; visible as soon as possible.</li>
<li>Hint <strong>scripts</strong> that are key to the function of a page, but you don't want to block the rest of the page (including other assets) from being parsed and downloaded.</li>
</ul>
<h2 id="make-the-browser-guess-less"><a href="https://www.macarthur.me/posts/priority-hints#make-the-browser-guess-less">Make the Browser Guess Less</a><a aria-hidden="true" class="anchor-heading icon-link" href="#make-the-browser-guess-less"></a></h2>
<p>The browser is incredibly smart about figuring out how and when to download the stuff that makes our pages tick. But it's not always <em>great.</em> It doesn't know why a page exists or the intent behind its individual parts. And so occasionally, it could use some extra help.</p>
<p>That's why these priority hints exist: to make instructions clear, and to leave the browser very little chance to get those decisions wrong. Keep them in mind the next time you're digging through your own application's network activity, and when it makes sense, reach for them to help make your page performance just a little more intelligent.</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#prioritizing-preloaded-assets" title="Prioritizing Preloaded Assets">Prioritizing Preloaded Assets</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#when-to-use-it" title="When to Use It">When to Use It</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#prioritizing-fetch-requests" title="Prioritizing fetch() Requests">Prioritizing fetch() Requests</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#useful-counterpart-keepalive-true" title="Useful counterpart: keepalive: true">Useful counterpart: keepalive: true</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#when-to-use-it-1" title="When to Use It">When to Use It</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#prioritizing-img--requests" title="Prioritizing &lt;img /&gt; Requests">Prioritizing &lt;img /&gt; Requests</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#when-to-use-it-2" title="When to Use It">When to Use It</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#prioritizing-script--tags" title="Prioritizing &lt;script /&gt; Tags">Prioritizing &lt;script /&gt; Tags</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#non-blocking-but-high-priority-scripts" title="Non-Blocking, but High-Priority Scripts">Non-Blocking, but High-Priority Scripts</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#when-to-use-it-3" title="When to Use It">When to Use It</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#to-be-used-intentionally" title="To Be Used Intentionally">To Be Used Intentionally</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#reviewing-when-to-hint" title="Reviewing: When to Hint">Reviewing: When to Hint</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#make-the-browser-guess-less" title="Make the Browser Guess Less">Make the Browser Guess Less</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"3y12i7xrbl8hk7yneo0d5ra","title":"Get All That Network Activity Under Control with Priority Hints","desc":"","updated":1695267424965,"created":1695267290514,"custom":{},"fname":"dev.web.performance.priority-hints","type":"note","vault":{"fsPath":"vault"},"contentHash":"c841c88294816348ea9f9d4ca70cd449","links":[],"anchors":{"prioritizing-preloaded-assets":{"type":"header","text":"Prioritizing Preloaded Assets","value":"prioritizing-preloaded-assets","line":20,"column":0,"depth":2},"when-to-use-it":{"type":"header","text":"When to Use It","value":"when-to-use-it","line":65,"column":0,"depth":3},"prioritizing-fetch-requests":{"type":"header","text":"Prioritizing fetch() Requests","value":"prioritizing-fetch-requests","line":69,"column":0,"depth":2},"useful-counterpart-keepalive-true":{"type":"header","text":"Useful counterpart: keepalive: true","value":"useful-counterpart-keepalive-true","line":113,"column":0,"depth":4},"when-to-use-it-1":{"type":"header","text":"When to Use It","value":"when-to-use-it-1","line":119,"column":0,"depth":3},"prioritizing-img--requests":{"type":"header","text":"Prioritizing \u003cimg /\u003e Requests","value":"prioritizing-img--requests","line":123,"column":0,"depth":2},"when-to-use-it-2":{"type":"header","text":"When to Use It","value":"when-to-use-it-2","line":161,"column":0,"depth":3},"prioritizing-script--tags":{"type":"header","text":"Prioritizing \u003cscript /\u003e Tags","value":"prioritizing-script--tags","line":165,"column":0,"depth":2},"non-blocking-but-high-priority-scripts":{"type":"header","text":"Non-Blocking, but High-Priority Scripts","value":"non-blocking-but-high-priority-scripts","line":185,"column":0,"depth":3},"when-to-use-it-3":{"type":"header","text":"When to Use It","value":"when-to-use-it-3","line":209,"column":0,"depth":3},"to-be-used-intentionally":{"type":"header","text":"To Be Used Intentionally","value":"to-be-used-intentionally","line":213,"column":0,"depth":2},"reviewing-when-to-hint":{"type":"header","text":"Reviewing: When to Hint","value":"reviewing-when-to-hint","line":223,"column":0,"depth":2},"make-the-browser-guess-less":{"type":"header","text":"Make the Browser Guess Less","value":"make-the-browser-guess-less","line":232,"column":0,"depth":2}},"children":[],"parent":"pa1bstln0xt54o30z6taebc","data":{}},"body":"\u003ch1 id=\"get-all-that-network-activity-under-control-with-priority-hints\"\u003eGet All That Network Activity Under Control with Priority Hints\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#get-all-that-network-activity-under-control-with-priority-hints\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints\"\u003ehttps://www.macarthur.me/posts/priority-hints\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThe browser is very good at prioritizing resources requests on its own. But it's not always great. Priority hints makes it easy to provide explicit instructions as to how and in what network activity occurs.\u003c/p\u003e\n\u003cp\u003eOpen up the browser's network tab and you'll see a lot of activity. Assets are being downloaded, information's being submitted, events are being logged, and more.\u003c/p\u003e\n\u003cp\u003eWith so much going on, effectively managing the priority of that traffic is pretty critical. Bandwidth contention is real, and some HTTP requests simply don't rank as highly as others when they're all firing at once. For example, if you \u003cem\u003ehad\u003c/em\u003e to choose, you'd probably prefer someone's payment request successfully complete vs. an analytics request simply indicating they tried. And having your hero image show up as quickly as possible is arguably more important than your logo rendering in the footer of your page.\u003c/p\u003e\n\u003cp\u003eFortunately, the browser has a growing collection of tools to help prioritize all this network activity. These \"\u003ca href=\"https://github.com/WICG/priority-hints/blob/main/EXPLAINER.md?ref=alex-macarthur\"\u003epriority hints\u003c/a\u003e\" help the browser make fewer assumptions and clearer decisions about which requests to favor over others when resources are limited.\u003c/p\u003e\n\u003cp\u003eIt's a useful suite of tools, and they can make a tangible impact to page performance when leveraged well, including those increasingly important core web vitals. Let's explore a few of them, along with some scenarios in which they're most helpful.\u003c/p\u003e\n\u003ch2 id=\"prioritizing-preloaded-assets\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#prioritizing-preloaded-assets\"\u003ePrioritizing Preloaded Assets\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prioritizing-preloaded-assets\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eModern browsers have a well-supported means of being told about resources that'll \u003cem\u003eeventually\u003c/em\u003e be needed on the current page: \u003ccode\u003e\u0026#x3C;link rel=\"preload\" ... /\u003e\u003c/code\u003e. When placed in the \u003ccode\u003e\u0026#x3C;head\u003e\u003c/code\u003e of the document, the browser is instructed to begin downloading it as soon as possible with \"high\" priority.\u003c/p\u003e\n\u003cp\u003eTo be fair, the preload scanner in the browser is already \u003cem\u003ereally good\u003c/em\u003e at this sort of thing (\u003ca href=\"https://www.macarthur.me/posts/effective-preloading?ref=alex-macarthur\"\u003eI've previously written\u003c/a\u003e about it in a little more depth). For that reason, preloading is best used on \u003cem\u003elate-discovered\u003c/em\u003e assets – anything not loaded directly by your HTML. Think: a font file loaded within some CSS, or a background image loaded via an inline \u003ccode\u003estyle\u003c/code\u003e attribute.\u003c/p\u003e\n\u003cp\u003eConsider a font that's loaded exclusively through a CSS \u003ccode\u003e@font-face\u003c/code\u003e rule:\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token atrule\"\u003e\u003cspan class=\"token rule\"\u003e@font-face\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003efont-family\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Inter Variable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003esrc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token url\"\u003e\u003cspan class=\"token function\"\u003eurl\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string url\"\u003e\"./font.woff2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eformat\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"woff2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOn load, that font gets the lowest download priority, despite it being pretty important for the visual experience of the page.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-12-highlighted.png\"\u003eimage showing low download priothe font file is given low download priority when loaded just through CSSrity of fonts\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNow, let's preload that resource:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ehead\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e\u0026#x3C;!-- Other stuff... --\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elink\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003erel\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003epreload\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e/font.woff2\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eas\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003efont\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ehead\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt's now far more favored:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-12.png\"\u003ethe font is given higher download priority after being preloaded\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eBut you can get \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement/fetchPriority?ref=alex-macarthur\"\u003eeven more explicit\u003c/a\u003e using the \u003ccode\u003efetchpriority\u003c/code\u003e directly on the \u003ccode\u003elink\u003c/code\u003e tag. It'll let you signal relative priority when preloading multiple assets at once.\u003c/p\u003e\n\u003cp\u003eHere's a contrived scenario in which you'd like to preload two fonts, but give one priority over the other:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elink\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003erel\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003epreload\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./font-1.woff2\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eas\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003efont\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efetchpriority\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003elow\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elink\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003erel\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003epreload\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./font-2.woff2\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eas\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003efont\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efetchpriority\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ehigh\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe resulting network activity reflects these instructions (I included a third, non-preloaded font in there too, just because).\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-14.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"when-to-use-it\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#when-to-use-it\"\u003eWhen to Use It\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#when-to-use-it\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIn general, use preloading when an asset isn't loaded by your HTML directly, but it's critical to the experience of the page (fonts, CSS background images, etc.). And include the \u003ccode\u003efetchpriority\u003c/code\u003e attribute when preloading several resources of the same type and you're clear about which is most important.\u003c/p\u003e\n\u003ch2 id=\"prioritizing-fetch-requests\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#prioritizing-fetch-requests\"\u003ePrioritizing \u003ccode\u003efetch()\u003c/code\u003e Requests\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prioritizing-fetch-requests\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn my opinion, the Fetch API is one of the most ergonomic offerings of the modern web. And it has some nice features that \u003ccode\u003eXMLHttpRequest\u003c/code\u003e lacked, like the ability to \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch?ref=alex-macarthur\"\u003esignal priority\u003c/a\u003e on an outgoing request.\u003c/p\u003e\n\u003cp\u003eThe most top-of-mind use case is one I've already mentioned: analytics requests. When bandwidth is slim and multiple requests are in play, the browser will make its own priority decisions. But we as engineers (should) know that your typical analytics requests ought to take a back seat to others more critical to the page's purpose. Modern \u003ccode\u003efetch()\u003c/code\u003e makes that easy.\u003c/p\u003e\n\u003cp\u003eHere's a simple setup with two requests being queued at (virtually) the same time:\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"http://localhost:8000/pay\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  method\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  body\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e paymentBody\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"http://localhost:8000/log\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  method\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  body\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e loggingBody\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy default, the browser will automatically consider them both \"high\" priority:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-16.png\"\u003eboth requests will have high priority by default\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNow, we'll explicitly tell the browser how each request should be prioritized:\u003c/p\u003e\n\u003cpre class=\"language-diff\"\u003e\u003ccode class=\"language-diff\"\u003efetch(\"http://localhost:8000/pay\", {\n\tmethod: \"POST\",\n\tbody: paymentBody,\n\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e\tpriority: \"high\"\n\u003c/span\u003e\u003c/span\u003e});\n\nfetch(\"http://localhost:8000/log\", {\n\tmethod: \"POST\",\n\tbody: loggingBody,\n\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e\tpriority: \"low\"\n\u003c/span\u003e\u003c/span\u003e});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis time around, the priorities are different:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-17.png\"\u003eone request now has higher priority than the other\u003c/a\u003e\u003c/p\u003e\n\u003ch4 id=\"useful-counterpart-keepalive-true\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#useful-counterpart-keepalive-true\"\u003eUseful counterpart: \u003ccode\u003ekeepalive: true\u003c/code\u003e\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#useful-counterpart-keepalive-true\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eA possible concern here is that \"low\" priority requests may be lost to the void – cancelled if the user navigates away from the page too soon. That's a legitimate issue. Depending on a few factors, either closing the tab or moving onto the next page may cause an important, but \u003cem\u003erelatively\u003c/em\u003e low-priority request to be aborted.\u003c/p\u003e\n\u003cp\u003eFortunately, \u003ccode\u003efetch()\u003c/code\u003e also accepts a \u003ccode\u003ekeepalive\u003c/code\u003e option. When set to \u003ccode\u003etrue\u003c/code\u003e, the browser will carry that request to completion even when the page is terminated. If you'd like to dig into it more, take a gander at \u003ca href=\"https://css-tricks.com/send-an-http-request-on-page-exit/?ref=alex-macarthur\"\u003ewhat I wrote for for CSS-Tricks\u003c/a\u003e a while back.\u003c/p\u003e\n\u003ch3 id=\"when-to-use-it-1\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#when-to-use-it-1\"\u003eWhen to Use It\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#when-to-use-it-1\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIndicate \u003ccode\u003efetch()\u003c/code\u003epriority when you know multiple requests are executing concurrently, and it's clear to you which is most important (or which can safely be deprioritized).\u003c/p\u003e\n\u003ch2 id=\"prioritizing-img--requests\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#prioritizing-img-requests\"\u003ePrioritizing \u003ccode\u003e\u0026#x3C;img /\u003e\u003c/code\u003e Requests\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prioritizing-img--requests\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWithout us doing anything special, the browser attempts to do its best at determining the most important images on a page. To illustrate this, I loaded the following images, spaced a good distance apart, so only one would be \"above the fold.\"\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-1.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value css language-css\"\u003e\u003cspan class=\"token property\"\u003eheight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-2.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value css language-css\"\u003e\u003cspan class=\"token property\"\u003eheight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-3.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe browser picked up on which was most important, but it took a second. When downloading began, all three were \"low\" priority. But shortly after, the one above the fold switched to \"high.\"\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/loading-priority.gif\"\u003epriority for images shifts when loading begins\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThings became more predictable when I added a \u003ccode\u003efetchpriority\u003c/code\u003e attribute to the first image:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-1.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efetchpriority\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ehigh\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter that, \u003ccode\u003ecat-1.jpeg\u003c/code\u003eloaded at the highest priority right out of the gate. While initially head-tilting, it makes sense. The browser is smart at determining resource criticality, but it benefits from clear instructions. If you know an image is important, be explicit about it.\u003c/p\u003e\n\u003cp\u003eThis feature, by the way, pairs very nicely with native image lazy loading, a very well-supported feature these days.\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-1.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efetchpriority\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ehigh\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value css language-css\"\u003e\u003cspan class=\"token property\"\u003eheight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-2.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eloading\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003elazy\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003estyle\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value css language-css\"\u003e\u003cspan class=\"token property\"\u003eheight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e./cat-3.jpeg\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eloading\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003elazy\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWith that in place, the browser knows exactly how (and if) to load images, only when appropriate. In my case, it won't even begin the request for off-screen images on initial load. Instead, it'll wait until they're closer to the viewport.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-18.png\"\u003epriority for images shifts\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"when-to-use-it-2\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#when-to-use-it-2\"\u003eWhen to Use It\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#when-to-use-it-2\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eUse an explicit \u003ccode\u003efetchpriority\u003c/code\u003e on images when you know they're very important to page experience. Hero images are a great place to start, and it can even have an impact on a page's core web vitals – \u003ca href=\"https://addyosmani.com/blog/fetch-priority/?ref=alex-macarthur\"\u003especifically, LCP\u003c/a\u003e (largest contentful paint).\u003c/p\u003e\n\u003ch2 id=\"prioritizing-script--tags\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#prioritizing-script-tags\"\u003ePrioritizing \u003ccode\u003e\u0026#x3C;script /\u003e\u003c/code\u003e Tags\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prioritizing-script--tags\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAny plain \u003ccode\u003e\u0026#x3C;script /\u003e\u003c/code\u003e with a \u003ccode\u003esrc\u003c/code\u003e attribute on a page will get \u003ccode\u003ehigh\u003c/code\u003e priority as it's being fetched, but there's a trade-off: it blocks parsing of the rest of the page until it's loaded and executed. For that reason, the \u003ccode\u003easync\u003c/code\u003e attribute is helpful. It'll request the script in the background at \u003ccode\u003elow\u003c/code\u003e priority, and execute as soon as it's ready. Knowing this, the following setup behaves predictably:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e/script-async.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003easync\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003eonload\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value javascript language-javascript\"\u003e\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'async'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e/script-sync.js\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003eonload\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value javascript language-javascript\"\u003e\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'sync'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003cspan class=\"token language-javascript\"\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"inline\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe asynchronous script is demoted in priority:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-22.png\"\u003easynchronous script is downloaded with \"low\" priority\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAnd the console confirms that subsequent scripts were allowed to parse and execute as the \u003ccode\u003easync\u003c/code\u003e script was loading.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/async-1.gif\"\u003escript loaded asynchronously\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"non-blocking-but-high-priority-scripts\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#non-blocking-but-high-priority-scripts\"\u003eNon-Blocking, but High-Priority Scripts\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#non-blocking-but-high-priority-scripts\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eMost of the time, that behavior's fine. But sometimes, you might want a script to load both asynchronously \u003cem\u003eand\u003c/em\u003e with \"high\" priority.\u003c/p\u003e\n\u003cp\u003eA possible scenario is a small SPA mounted in the hero of a landing page. In order to preserve the page's core web vitals, specifically LCP and FID (first input delay, soon to be replaced by \u003ca href=\"https://developers.google.com/search/blog/2023/05/introducing-inp?ref=alex-macarthur\"\u003einteraction to next paint\u003c/a\u003e), you'll need that script to be highly prioritized (after all, it's responsible for building and powering your application). But at the same time, you don't want it to block the rest of the page from parsing.\u003c/p\u003e\n\u003cp\u003eSo, let's give it a \u003ccode\u003efetchpriority\u003c/code\u003e:\u003c/p\u003e\n\u003cpre class=\"language-diff\"\u003e\u003ccode class=\"language-diff\"\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e \u0026#x3C;script src=\"/script-async.js\" async onload=\"console.log('async')\" fetchpriority=\"high\"\u003e\u0026#x3C;/script\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token deleted-arrow deleted\"\u003e\u003cspan class=\"token prefix deleted\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token line\"\u003escript src=\"/script-sync.js\" onload=\"console.log('sync')\"\u003e\u0026#x3C;/script\u003e\n\u003c/span\u003e\u003cspan class=\"token prefix deleted\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token line\"\u003escript\u003econsole.log(\"inline\");\u0026#x3C;/script\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd now, it's downloaded with elevated priority, while still not blocking the rest of the page:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/image-23.png\"\u003easynchronous script downloaded with high priority\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAnd the console verifies this. With that higher priority, the async script loads more quickly. In this case, even before the synchronous and inline ones.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://picperf.dev/https://cms.macarthur.me/content/images/2023/09/prioritized-async.gif\"\u003elog asynchronous script downloaded\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWhile I didn't toy with it specifically here, yes, \u003ccode\u003efetchpriority\u003c/code\u003e works with deferred scripts as well.\u003c/p\u003e\n\u003ch3 id=\"when-to-use-it-3\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#when-to-use-it-3\"\u003eWhen to Use It\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#when-to-use-it-3\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003ePlace \u003ccode\u003efetchpriority\u003c/code\u003e on your scripts when you know their priorities up front, and if you suspect the browser won't have enough information to determine on its own. As I mentioned, it's particularly helpful for prioritizing scripts that you'd also like to load in non-blocking, asynchronous way.\u003c/p\u003e\n\u003ch2 id=\"to-be-used-intentionally\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#to-be-used-intentionally\"\u003eTo Be Used Intentionally\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#to-be-used-intentionally\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIt's easy to become a little overzealous about tools like this, leading to overuse. So, be careful – doing so may come at a cost. As the adage goes: \"emphasizing everything = emphasizing nothing.\" In fact, overuse may actually make it \u003cem\u003emore difficult\u003c/em\u003e for the browser to manage against network contention, \u003cem\u003eharming\u003c/em\u003e a page's performance.\u003c/p\u003e\n\u003cp\u003eMDN even makes a point to call it out in some of their \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement/fetchPriority?ref=alex-macarthur\"\u003epriority hint documentation\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUse it sparingly for exceptional cases where the browser may not be able to infer the best way to load the resource automatically. Over use can result in degrading performance.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo, don't feel obligated to reach for these tools just because they exist. Wield them with care.\u003c/p\u003e\n\u003ch2 id=\"reviewing-when-to-hint\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#reviewing-when-to-hint\"\u003eReviewing: When to Hint\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reviewing-when-to-hint\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThere's a lot here, so let's quickly review some times you might choose to leverage priority hints. They're not exhaustive. Just some good places to start.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHint \u003cstrong\u003epreloaded assets\u003c/strong\u003e when you want the browser to be aware of multiple late-discovered resources, some of which bring more critical to the page than others.\u003c/li\u003e\n\u003cli\u003eHint \u003cstrong\u003e\u003ccode\u003efetch()\u003c/code\u003e requests\u003c/strong\u003e that you know are either a crucial part of a user's experience, or can safely be deprioritized to make way for more important ones.\u003c/li\u003e\n\u003cli\u003eHint above-the-fold \u003cstrong\u003eimages\u003c/strong\u003e you want to be loaded \u0026#x26; visible as soon as possible.\u003c/li\u003e\n\u003cli\u003eHint \u003cstrong\u003escripts\u003c/strong\u003e that are key to the function of a page, but you don't want to block the rest of the page (including other assets) from being parsed and downloaded.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"make-the-browser-guess-less\"\u003e\u003ca href=\"https://www.macarthur.me/posts/priority-hints#make-the-browser-guess-less\"\u003eMake the Browser Guess Less\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#make-the-browser-guess-less\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe browser is incredibly smart about figuring out how and when to download the stuff that makes our pages tick. But it's not always \u003cem\u003egreat.\u003c/em\u003e It doesn't know why a page exists or the intent behind its individual parts. And so occasionally, it could use some extra help.\u003c/p\u003e\n\u003cp\u003eThat's why these priority hints exist: to make instructions clear, and to leave the browser very little chance to get those decisions wrong. Keep them in mind the next time you're digging through your own application's network activity, and when it makes sense, reach for them to help make your page performance just a little more intelligent.\u003c/p\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1766965759366,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a724de3efd251cf89fe82a5860d9008b","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":43,"column":5,"offset":2710},"end":{"line":43,"column":29,"offset":2734},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2026.articles","alias":"What I read in 2026","position":{"start":{"line":72,"column":3,"offset":4440},"end":{"line":72,"column":45,"offset":4482},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2026.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2025.articles","alias":"2025","position":{"start":{"line":73,"column":5,"offset":4487},"end":{"line":73,"column":32,"offset":4514},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2025.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2024.articles","alias":"2024","position":{"start":{"line":74,"column":5,"offset":4519},"end":{"line":74,"column":32,"offset":4546},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2024.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2023.articles","alias":"2023","position":{"start":{"line":75,"column":5,"offset":4551},"end":{"line":75,"column":32,"offset":4578},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2023.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2022.articles","alias":"2022","position":{"start":{"line":76,"column":5,"offset":4583},"end":{"line":76,"column":32,"offset":4610},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2022.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":82,"column":3,"offset":4746},"end":{"line":82,"column":39,"offset":4782},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":76,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","o7xruzrah5wzqetottecss7","z1zo2mp6ddji5p317i4x9xw","v06c2tjelh341x4resa50fh","0yqesk4rcffwgyuab5x8rfa","sy2vkbtyu671chkvgn1yt8j","ufixpmxoydiccoh59kphrib","alswadkx4wb05y1z9iwfzfv","1daut9dpw70xd0zh5a7j5p4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 현실은 인간의 연산으로 완전히 파악할 수 없는 복잡계. 주어진 상황과 능력으로 할 수 있는 최선의 적응은 단순함과 꾸준함.\n\n  - 파산을 면하는 선에서 여러가지를 해보고 자신에게 맞는 걸 위주로 꾸준히. 그를 위해 단순, 편안, 쾌적함이 필요.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2026|read.2026.articles]]\n  - [[2025|read.2025.articles]]\n  - [[2024|read.2024.articles]]\n  - [[2023|read.2023.articles]]\n  - [[2022|read.2022.articles]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"3y12i7xrbl8hk7yneo0d5ra"},"buildId":"wirstT2ztC8OQsbzKjhvw","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>