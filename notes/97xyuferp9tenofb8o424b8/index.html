<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Pdf Generator</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Pdf Generator"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/97xyuferp9tenofb8o424b8/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="8/25/2023"/><meta property="article:modified_time" content="8/25/2023"/><link rel="canonical" href="https://luke-snaw.github.io//notes/97xyuferp9tenofb8o424b8/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="pdf-generator">Pdf Generator<a aria-hidden="true" class="anchor-heading icon-link" href="#pdf-generator"></a></h1>
<p><a href="https://arc42.org/overview">Arc42</a>와 <a href="https://c4model.com/">C4 model</a>을 참고하여
프로젝트 문서를 작성</p>
<h2 id="goal">Goal<a aria-hidden="true" class="anchor-heading icon-link" href="#goal"></a></h2>
<p>제공되는 웹페이지를 A4 크기의 PDF로 만들어 client에게 제공</p>
<h3 id="requirements-overview">Requirements Overview<a aria-hidden="true" class="anchor-heading icon-link" href="#requirements-overview"></a></h3>
<p>기존에 PDF 생성에 사용하던 <a href="https://pdfcrowd.com/">PDFCrowd</a>를 대체할 도구 제작</p>
<h3 id="quality-goals">Quality Goals<a aria-hidden="true" class="anchor-heading icon-link" href="#quality-goals"></a></h3>
<ol>
<li>PDFCrowd보다 저럼하게 → $276/month 보다 저렴히</li>
<li>PDFCrowd보다 빠르게 PDF 생성 → 20~30초보다 빠르게</li>
<li>PDFCrowd보다 Scalability 좋게 → 동시 생성 가능 개수를 전체 8개보다 많게</li>
<li>생성된 PDF를 S3 저장하여 서비스하고 그대로 파일을 방치하는 프로세스를 개선하여 인프라·관리 비용을 줄일 것</li>
</ol>
<h3 id="stakeholders">Stakeholders<a aria-hidden="true" class="anchor-heading icon-link" href="#stakeholders"></a></h3>
<div class="table-responsive">












<table><thead><tr><th>Name</th><th>Expectations</th></tr></thead><tbody><tr><td>Luke</td><td>Project, AWS Infra 관리</td></tr></tbody></table></div>
<h2 id="constraints">Constraints<a aria-hidden="true" class="anchor-heading icon-link" href="#constraints"></a></h2>
<h3 id="technical-constraints">Technical Constraints<a aria-hidden="true" class="anchor-heading icon-link" href="#technical-constraints"></a></h3>
<div class="table-responsive">












<table><thead><tr><th>Constraint</th><th>Background and / or motivation</th></tr></thead><tbody><tr><td>Web browser로 다운가능</td><td>파트너사나 Report 고객에게 PDF를 제공할 때 가장 접근성이 좋다.</td></tr></tbody></table></div>
<h2 id="context">Context<a aria-hidden="true" class="anchor-heading icon-link" href="#context"></a></h2>
<div class="mermaid">
  C4Context
  title System Context diagram for PDF download

  Person(user, "User", "People that need PDF")
  System_Boundary(WebApp, "Web App") {
    Container(WebPage, "Web Page", "Report, Portal, .com")
    Container(PdfGenerator, "PDF Generator", "AWS Lambda, S3")
  }

  BiRel(user, WebPage, "1. Request to download PDF ⬇️ / 4. Download PDF file ⬆️")
  BiRel(WebPage, PdfGenerator, "2. Request API ➡️ / 3. Redirect to PDF file ⬅️")

  UpdateRelStyle(user, WebPage, $offsetX="-115", $offsetY="-30", $lineColor="blue", $textColor="red")
  UpdateRelStyle(WebPage, PdfGenerator, $offsetX="-85", $offsetY="45")
</div>
<h3 id="user">User<a aria-hidden="true" class="anchor-heading icon-link" href="#user"></a></h3>
<div class="table-responsive">




















<table><thead><tr><th>사용자</th><th>용도</th></tr></thead><tbody><tr><td>Report 고객</td><td>Mybook 다운로드</td></tr><tr><td>파트너사</td><td>Mybook 인쇄</td></tr><tr><td>[.com] 고객</td><td>동의서(미리 생성)</td></tr></tbody></table></div>
<h3 id="build-deployment">Build, Deployment<a aria-hidden="true" class="anchor-heading icon-link" href="#build-deployment"></a></h3>
<p>github action을 통해 nuxt build.</p>
<p>client code는 S3, cloudfront로 배포, server code는 aws lambda로 배포.
(cloudfront는 없어도 될 듯?)</p>
<p>현재 AWS GPJ dev 계정에만 연결되어 있음. 추후 AWS GPK 계정에도 세팅해야 함.</p>
<h3 id="html-page-to-pdf-render">HTML page to PDF render<a aria-hidden="true" class="anchor-heading icon-link" href="#html-page-to-pdf-render"></a></h3>
<p>이 프로젝트에서 생성할 PDF target. 2023년 Q3 현재 back-end에서 제작 중.</p>
<p>추후 front-end에서 담당할 예정</p>
<details>
<summary>예제 URL</summary>
<ul>
<li><del>Sample URL A</del></li>
<li><del>Sample URL B</del>
</li></ul></details>


<h3 id="pdf-file">PDF file<a aria-hidden="true" class="anchor-heading icon-link" href="#pdf-file"></a></h3>
<p>S3에 저장되는 결과물. github action을 통해 하루 단위로 삭제. <a href="#quality-goals">Quality Goals#4</a></p>
<p>github 공식문서에서 언급하듯이 <a href="#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C">cron 신뢰도가 좀 떨어지므로</a> 2번 trigger 걸어놓음.<br>
결과는 slack channel로 message 보내게 해뒀으니 체크하여 대응할 수 있도록 함.</p>
<h2 id="solution-strategy">Solution Strategy<a aria-hidden="true" class="anchor-heading icon-link" href="#solution-strategy"></a></h2>
<div class="table-responsive">





























<table><thead><tr><th>Quality goal</th><th>Solution Approach</th><th>Details</th></tr></thead><tbody><tr><td>$276/month 보다 저렴히</td><td>AWS Lambda 사용</td><td><a href="#lambda-resource-setting">Lambda resource setting</a></td></tr><tr><td>20~30초보다 빠르게 PDF 생성</td><td>AWS Lambda 사용</td><td><a href="#lambda-resource-setting">Lambda resource setting</a></td></tr><tr><td>동시 생성 가능 개수를 전체 8개보다 많게</td><td>AWS Lambda 사용</td><td><a href="#aws-lambda%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0">AWS Lambda를 쓰는 이유</a></td></tr><tr><td>인프라·관리 비용 줄이기</td><td>Github action cron 사용</td><td><a href="#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C-quality-goals4">하루 한 번 S3 dir 삭제</a></td></tr></tbody></table></div>
<h2 id="building-block-view">Building Block View<a aria-hidden="true" class="anchor-heading icon-link" href="#building-block-view"></a></h2>
<h3 id="serverroutes">/server/routes/*<a aria-hidden="true" class="anchor-heading icon-link" href="#serverroutes"></a></h3>
<p>Puppeteer로 지정된 Render URL을 PDF로 생성하여 S3에 저장 후 redirect하는 API</p>
<h3 id="pages">/pages/*<a aria-hidden="true" class="anchor-heading icon-link" href="#pages"></a></h3>
<p><a href="https://github.com/eligrey/FileSaver.js">FileSaver.js</a>, <a href="https://github.com/Stuk/jszip">JSZip</a>를 사용하여 client 단에서 Download를 실행시키는 페이지</p>
<h2 id="runtime-view">Runtime View<a aria-hidden="true" class="anchor-heading icon-link" href="#runtime-view"></a></h2>
<ul>
<li>AWS Lambda에서 Puppeteer + <a href="https://github.com/Sparticuz/chromium#-min-package">headless chromium</a>으로 PDF 생성
<ul>
<li>이미 생성된 PDF가 있다면 생성과정 없이 바로 redirect</li>
</ul>
</li>
<li>PDF는 <a href="#s3%EB%A5%BC-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0">S3에 저장</a> 후, 해당 URL을 redirect
<ul>
<li>내일을 expire day로 잡아 directory로 생성</li>
<li><a href="#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C">하루 한 번 Github action cron으로 directory 삭제</a></li>
</ul>
</li>
<li>redirect 후 단일 PDF <a href="https://github.com/eligrey/FileSaver.js">저장</a> or <a href="#download-multiple-pdf-into-one-zip-file">복수 개의 PDF라면 zip으로 저장</a></li>
</ul>
<h2 id="deployment-view">Deployment View<a aria-hidden="true" class="anchor-heading icon-link" href="#deployment-view"></a></h2>
<h3 id="gpj-dev-계정">GPJ dev 계정<a aria-hidden="true" class="anchor-heading icon-link" href="#gpj-dev-계정"></a></h3>
<div class="table-responsive">




















<table><thead><tr><th>Infrastructure</th><th>Description</th></tr></thead><tbody><tr><td>AWS Lambda</td><td><del>Lambda Function URL</del></td></tr><tr><td>AWS S3 client 배포용</td><td><del>S3 URL</del></td></tr><tr><td>AWS S3 PDF resources</td><td><del>S3 URL</del></td></tr></tbody></table></div>
<h2 id="decision-log">Decision Log<a aria-hidden="true" class="anchor-heading icon-link" href="#decision-log"></a></h2>
<h3 id="client가-아닌-server-generator을-쓰는-이유">Client가 아닌 server generator을 쓰는 이유<a aria-hidden="true" class="anchor-heading icon-link" href="#client가-아닌-server-generator을-쓰는-이유"></a></h3>
<p>client에서 생성할 수 있지만, server에서 생성해서 내려주는게 사용자별 browser 호환성 문제 없다.</p>
<details>
<summary>Client PDF generator tools</summary>
<ul>
<li><a href="https://github.com/parallax/jsPDF">https://github.com/parallax/jsPDF</a></li>
<li><a href="https://github.com/eKoopmans/html2pdf.js">https://github.com/eKoopmans/html2pdf.js</a>
</li></ul></details>


<h3 id="aws-lambda를-쓰는-이유">AWS Lambda를 쓰는 이유<a aria-hidden="true" class="anchor-heading icon-link" href="#aws-lambda를-쓰는-이유"></a></h3>
<p>Scalability 확보를 위해. <a href="#quality-goals">Quality Goals#3</a></p>
<p>복수(30개) pdf 생성 &#x26; 다운로드 테스트해보니 <a href="https://stackoverflow.com/a/985704">browser에서 동시 접속 제한</a>만큼 병렬로 생성 됨 (보통 6개)</p>
<ul>
<li>이전 PDFCrowd는 여러 명이 사용해도 전체 8개 제한이 있지만 Lambda는 그런 제한이 없음</li>
</ul>
<h3 id="lambda-resource-setting">Lambda resource setting<a aria-hidden="true" class="anchor-heading icon-link" href="#lambda-resource-setting"></a></h3>
<h4 id="생성에-걸리는-시간-quality-goals2-관련">생성에 걸리는 시간 <a href="#quality-goals">Quality Goals#2 관련</a><a aria-hidden="true" class="anchor-heading icon-link" href="#생성에-걸리는-시간-quality-goals2-관련"></a></h4>
<p>PDFCrowd의 경우 20~30초</p>
<p>메모리에 따라 CPU 할당도 변경.<br>
Sample PDF(6.5초 rendering) 기준, run Puppeteer + Load HTML + save PDF to S3에 걸리는 시간:</p>
<div class="table-responsive">




















<table><thead><tr><th>할당된 메모리</th><th>생성에 걸리는 시간</th></tr></thead><tbody><tr><td>4096MB</td><td>18초</td></tr><tr><td>2048MB</td><td>21초</td></tr><tr><td>1024MB</td><td>48초</td></tr></tbody></table></div>
<p>CPU를 더 할당해도, lambda cold start와 API response time은 못 줄임.</p>
<h4 id="가격-quality-goals1-충족">가격 <a href="#quality-goals">Quality Goals#1 충족</a><a aria-hidden="true" class="anchor-heading icon-link" href="#가격-quality-goals1-충족"></a></h4>
<p>2기가 기준으로 sample pdf 하나당 $0.0006993가 소모된다. (<a href="https://aws.amazon.com/ko/lambda/pricing/#AWS_Lambda_Pricing">memory cpu 가격</a>만 따졌을 때) 1만 건당 7달러.<br>
2022.08~2023.08의 1년에 약 2만 건. $14 vs $3312(PDFCrowd plan $276/month x 12개월)</p>
<h3 id="s3를-써야-하는-이유">S3를 써야 하는 이유<a aria-hidden="true" class="anchor-heading icon-link" href="#s3를-써야-하는-이유"></a></h3>
<p>lambda에서 직접 다운로드 불가 - <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html#function-configuration-deployment-and-execution">용량 초과(Invocation payload)</a></p>
<h3 id="하루-한-번-s3-directory-삭제-quality-goals4">하루 한 번 S3 directory 삭제 <a href="#quality-goals">Quality Goals#4</a><a aria-hidden="true" class="anchor-heading icon-link" href="#하루-한-번-s3-directory-삭제-quality-goals4"></a></h3>
<p>Github cron issue - <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule">공식 문서</a>에서 schedule time이 부정확하고 누락 가능성도 있다고 언급<br>
-> 새벽에 2번 실행. slack message 확인 후 안됐으면 github에서 직접 실행 가능</p>
<p>github actions나 AWS lambda 시간은 UTC+0 기준.</p>
<h3 id="download-multiple-pdf-into-one-zip-file">Download multiple PDF into one zip file<a aria-hidden="true" class="anchor-heading icon-link" href="#download-multiple-pdf-into-one-zip-file"></a></h3>
<p>파트너사? 사용자가 하나하나 받기 불편하다고 요청</p>
<p><a href="https://github.com/eligrey/FileSaver.js">FileSaver.js</a>, <a href="https://github.com/Stuk/jszip">JSZip</a>, <a href="https://github.com/Stuk/jszip-utils">JSZipUtils</a>으로 browser 단에서 받도록</p>
<ul>
<li><a href="https://stackoverflow.com/a/985704">browser에서 동시 접속 제한</a>만큼 병렬로 생성 됨 (보통 6개)</li>
<li>30개 생성 + pdf download + zip 생성 후 저장에 2분 안 걸림 (227.4MB)</li>
<li><a href="https://github.com/eligrey/FileSaver.js#supported-browsers">chrome에서 2GB 제한</a>. 더 큰 파일은 stream 이용하는 code로 변경해야 함</li>
</ul>
<h2 id="references">References<a aria-hidden="true" class="anchor-heading icon-link" href="#references"></a></h2>
<h3 id="generation-pdf-with-headless-chrome">Generation pdf with headless chrome<a aria-hidden="true" class="anchor-heading icon-link" href="#generation-pdf-with-headless-chrome"></a></h3>
<p>찾는 문서마다 chromium binary가 몇 년 지난 구 버전뿐이라 다른 문서에서 설명하는 docker image로 올려야 하나 고민했는데 계속 찾아보니 최신 binary를 발견</p>
<details>
<summary>참고 URLs</summary>
<ul>
<li><a href="https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#running-puppeteer-on-aws-lambda">Running Puppeteer on AWS Lambda</a>
<ul>
<li><a href="https://github.com/Sparticuz/chromium">https://github.com/Sparticuz/chromium</a></li>
<li><a href="https://github.com/Sparticuz/chromium#-min-package">https://github.com/Sparticuz/chromium#-min-package</a>
<ul>
<li><a href="https://github.com/Sparticuz/chromium/blob/master/examples/remote-min-binary/index.js">https://github.com/Sparticuz/chromium/blob/master/examples/remote-min-binary/index.js</a></li>
</ul>
</li>
<li><a href="https://github.com/Sparticuz/chromium#running-locally--headlessheadful-mode">https://github.com/Sparticuz/chromium#running-locally--headlessheadful-mode</a></li>
</ul>
</li>
<li><a href="https://dev.to/aws-builders/building-a-pdf-generator-using-aws-lambda-4220#the-best-way-out-serverside-generation">https://dev.to/aws-builders/building-a-pdf-generator-using-aws-lambda-4220#the-best-way-out-serverside-generation</a></li>
<li><a href="https://blog.carlosnunez.me/post/scraping-chromium-lambda-nodeless-zerostress/#lessons-learned">Also make sure that you use --no-sandbox, --disable-dev-shm-usage, --disable-gpu, and --single-process.</a></li>
<li><a href="https://wkhtmltopdf.org/downloads.html#stable">https://wkhtmltopdf.org/downloads.html#stable</a> - lambda용 binary가 있어 이것도 괜찮을거 같은데 <code>Qt WebKit rendering engine</code>을 써서 개발 시 귀찮을 듯</li>
<li><a href="https://awstip.com/pdf-generator-by-puppeteer-on-aws-lambda-with-nestjs-and-serverless-framework-669ba22d9fa">Chromium only supports x86_64 architecture inside lambda docker container, not arm64</a></li>
<li><a href="https://github.com/alixaxel/chrome-aws-lambda/wiki/HOWTO:-Local-Development">Local Development</a></li>
<li><a href="https://github.com/Wavelop/download-pdf-aws/blob/main/lambdas/download-pdf.ts">header/footer template</a></li>
<li><a href="https://apitemplate.io/blog/tips-for-generating-pdfs-with-puppeteer/">puppeteer launch option</a></li>
<li><a href="https://github.com/puppeteer/puppeteer/issues/1523"><code>browser.newPage()</code> returns null</a></li>
<li><a href="https://stackoverflow.com/questions/11415665/save-base64-string-as-pdf-at-client-side-with-javascript">save base64 string as pdf at client</a>
</li></ul></details>


<h3 id="etc">Etc<a aria-hidden="true" class="anchor-heading icon-link" href="#etc"></a></h3>
<details>
<summary>그 외 참고했던 URLs</summary>
<ul>
<li><a href="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-printToPDF">https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-printToPDF</a></li>
<li><a href="https://blog.grio.com/2020/08/understanding-pdf-generation-with-headless-chrome.html">https://blog.grio.com/2020/08/understanding-pdf-generation-with-headless-chrome.html</a></li>
<li><a href="https://developer.chrome.com/blog/headless-chrome/">https://developer.chrome.com/blog/headless-chrome/</a></li>
<li><a href="https://github.com/GoogleChrome/chrome-launcher">https://github.com/GoogleChrome/chrome-launcher</a></li>
<li><a href="https://medium.com/compass-true-north/go-service-to-convert-web-pages-to-pdf-using-headless-chrome-5fd9ffbae1af">https://medium.com/compass-true-north/go-service-to-convert-web-pages-to-pdf-using-headless-chrome-5fd9ffbae1af</a></li>
<li><a href="https://dev.to/aromanarguello/using-aws-lambdas-headless-chrome-to-generate-pdf-files-from-html-b4l">https://dev.to/aromanarguello/using-aws-lambdas-headless-chrome-to-generate-pdf-files-from-html-b4l</a></li>
<li><a href="https://github.com/alixaxel/chrome-aws-lambda">https://github.com/alixaxel/chrome-aws-lambda</a></li>
<li><a href="https://github.com/adieuadieu/serverless-chrome">https://github.com/adieuadieu/serverless-chrome</a></li>
<li><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html">Amazon Linux 2</a>
<ul>
<li><a href="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Linux_ARM_Cross-Compile/">https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Linux_ARM_Cross-Compile/</a></li>
</ul>
</li>
<li><a href="https://dev.to/akirautio/generate-a-pdf-in-aws-lambda-with-nodejs-and-puppeteer-2b93">https://dev.to/akirautio/generate-a-pdf-in-aws-lambda-with-nodejs-and-puppeteer-2b93</a>
<blockquote>
<p>And here we have everything to generate PDF in AWS lambda. To my opinion generating the pdf with 1024 MB took something like 4000ms which would mean that total price would be close to 1 euro per 20000 PDF generations after free tier.</p>
<ul>
<li><a href="https://github.com/ARautio/aws-lambda-pdf-generator-puppeteer">https://github.com/ARautio/aws-lambda-pdf-generator-puppeteer</a></li>
<li><a href="https://github.com/RelaxedJS/ReLaXed">https://github.com/RelaxedJS/ReLaXed</a></li>
</ul>
</blockquote>
</li>
<li><a href="https://stackoverflow.com/questions/58629198/base64-to-pdf-export-issue-aws-lambda">https://stackoverflow.com/questions/58629198/base64-to-pdf-export-issue-aws-lambda</a> - API gateway permission</li>
<li><a href="https://aws.amazon.com/ko/blogs/architecture/field-notes-scaling-browser-automation-with-puppeteer-on-aws-lambda-with-container-image-support/">https://aws.amazon.com/ko/blogs/architecture/field-notes-scaling-browser-automation-with-puppeteer-on-aws-lambda-with-container-image-support/</a></li>
<li><a href="https://github.com/serverless/examples/tree/v3/aws-node-puppeteer">https://github.com/serverless/examples/tree/v3/aws-node-puppeteer</a></li>
<li><a href="https://stackoverflow.com/a/74549527/5163033">https://stackoverflow.com/a/74549527/5163033</a> - generate pdf using Blob
</li></ul></details>


<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/6645fjtiqxtko03nuccgjj2">What I struggled 🧗/📣 brag In</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#goal" title="Goal">Goal</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#requirements-overview" title="Requirements Overview">Requirements Overview</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#quality-goals" title="Quality Goals">Quality Goals</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#stakeholders" title="Stakeholders">Stakeholders</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#constraints" title="Constraints">Constraints</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#technical-constraints" title="Technical Constraints">Technical Constraints</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#context" title="Context">Context</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#user" title="User">User</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#build-deployment" title="Build, Deployment">Build, Deployment</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#html-page-to-pdf-render" title="HTML page to PDF render">HTML page to PDF render</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pdf-file" title="PDF file">PDF file</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#solution-strategy" title="Solution Strategy">Solution Strategy</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#building-block-view" title="Building Block View">Building Block View</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#serverroutes" title="/server/routes/*">/server/routes/*</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pages" title="/pages/*">/pages/*</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#runtime-view" title="Runtime View">Runtime View</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#deployment-view" title="Deployment View">Deployment View</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#gpj-dev-계정" title="GPJ dev 계정">GPJ dev 계정</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#decision-log" title="Decision Log">Decision Log</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#client가-아닌-server-generator을-쓰는-이유" title="Client가 아닌 server generator을 쓰는 이유">Client가 아닌 server generator을 쓰는 이유</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#aws-lambda를-쓰는-이유" title="AWS Lambda를 쓰는 이유">AWS Lambda를 쓰는 이유</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#lambda-resource-setting" title="Lambda resource setting">Lambda resource setting</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#생성에-걸리는-시간-quality-goals2-관련" title="생성에 걸리는 시간 Quality Goals#2 관련">생성에 걸리는 시간 Quality Goals#2 관련</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#가격-quality-goals1-충족" title="가격 Quality Goals#1 충족">가격 Quality Goals#1 충족</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#s3를-써야-하는-이유" title="S3를 써야 하는 이유">S3를 써야 하는 이유</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#하루-한-번-s3-directory-삭제-quality-goals4" title="하루 한 번 S3 directory 삭제 Quality Goals#4">하루 한 번 S3 directory 삭제 Quality Goals#4</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#download-multiple-pdf-into-one-zip-file" title="Download multiple PDF into one zip file">Download multiple PDF into one zip file</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#references" title="References">References</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#generation-pdf-with-headless-chrome" title="Generation pdf with headless chrome">Generation pdf with headless chrome</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#etc" title="Etc">Etc</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"97xyuferp9tenofb8o424b8","title":"Pdf Generator","desc":"","updated":1692948140682,"created":1692948041152,"custom":{},"fname":"dev.journal.genoplan.pdf-generator","type":"note","vault":{"fsPath":"vault"},"contentHash":"2bfc026f3e279b804da3ff59434c96bc","links":[{"from":{"fname":"journal.what-i-struggled-brag-in","id":"6645fjtiqxtko03nuccgjj2","vaultName":"vault"},"type":"backlink","position":{"start":{"line":240,"column":4,"offset":6596},"end":{"line":240,"column":56,"offset":6648},"indent":[]},"value":"dev.journal.genoplan.pdf-generator"},{"from":{"fname":"journal.what-i-struggled-brag-in","id":"6645fjtiqxtko03nuccgjj2","vaultName":"vault"},"type":"backlink","position":{"start":{"line":609,"column":8,"offset":21049},"end":{"line":609,"column":60,"offset":21101},"indent":[]},"value":"dev.journal.genoplan.pdf-generator"},{"from":{"fname":"journal.what-i-struggled-brag-in","id":"6645fjtiqxtko03nuccgjj2","vaultName":"vault"},"type":"backlink","position":{"start":{"line":653,"column":5,"offset":22350},"end":{"line":653,"column":57,"offset":22402},"indent":[]},"value":"dev.journal.genoplan.pdf-generator"}],"anchors":{"goal":{"type":"header","text":"Goal","value":"goal","line":11,"column":0,"depth":2},"requirements-overview":{"type":"header","text":"Requirements Overview","value":"requirements-overview","line":15,"column":0,"depth":3},"quality-goals":{"type":"header","text":"Quality Goals","value":"quality-goals","line":19,"column":0,"depth":3},"stakeholders":{"type":"header","text":"Stakeholders","value":"stakeholders","line":26,"column":0,"depth":3},"constraints":{"type":"header","text":"Constraints","value":"constraints","line":32,"column":0,"depth":2},"technical-constraints":{"type":"header","text":"Technical Constraints","value":"technical-constraints","line":34,"column":0,"depth":3},"context":{"type":"header","text":"Context","value":"context","line":40,"column":0,"depth":2},"user":{"type":"header","text":"User","value":"user","line":59,"column":0,"depth":3},"build-deployment":{"type":"header","text":"Build, Deployment","value":"build-deployment","line":67,"column":0,"depth":3},"html-page-to-pdf-render":{"type":"header","text":"HTML page to PDF render","value":"html-page-to-pdf-render","line":76,"column":0,"depth":3},"pdf-file":{"type":"header","text":"PDF file","value":"pdf-file","line":89,"column":0,"depth":3},"solution-strategy":{"type":"header","text":"Solution Strategy","value":"solution-strategy","line":96,"column":0,"depth":2},"building-block-view":{"type":"header","text":"Building Block View","value":"building-block-view","line":105,"column":0,"depth":2},"serverroutes":{"type":"header","text":"/server/routes/*","value":"serverroutes","line":107,"column":0,"depth":3},"pages":{"type":"header","text":"/pages/*","value":"pages","line":111,"column":0,"depth":3},"runtime-view":{"type":"header","text":"Runtime View","value":"runtime-view","line":115,"column":0,"depth":2},"deployment-view":{"type":"header","text":"Deployment View","value":"deployment-view","line":124,"column":0,"depth":2},"gpj-dev-계정":{"type":"header","text":"GPJ dev 계정","value":"gpj-dev-계정","line":126,"column":0,"depth":3},"decision-log":{"type":"header","text":"Decision Log","value":"decision-log","line":134,"column":0,"depth":2},"client가-아닌-server-generator을-쓰는-이유":{"type":"header","text":"Client가 아닌 server generator을 쓰는 이유","value":"client가-아닌-server-generator을-쓰는-이유","line":136,"column":0,"depth":3},"aws-lambda를-쓰는-이유":{"type":"header","text":"AWS Lambda를 쓰는 이유","value":"aws-lambda를-쓰는-이유","line":147,"column":0,"depth":3},"lambda-resource-setting":{"type":"header","text":"Lambda resource setting","value":"lambda-resource-setting","line":155,"column":0,"depth":3},"생성에-걸리는-시간-quality-goals2-관련":{"type":"header","text":"생성에 걸리는 시간 Quality Goals#2 관련","value":"생성에-걸리는-시간-quality-goals2-관련","line":157,"column":0,"depth":4},"가격-quality-goals1-충족":{"type":"header","text":"가격 Quality Goals#1 충족","value":"가격-quality-goals1-충족","line":172,"column":0,"depth":4},"s3를-써야-하는-이유":{"type":"header","text":"S3를 써야 하는 이유","value":"s3를-써야-하는-이유","line":177,"column":0,"depth":3},"하루-한-번-s3-directory-삭제-quality-goals4":{"type":"header","text":"하루 한 번 S3 directory 삭제 Quality Goals#4","value":"하루-한-번-s3-directory-삭제-quality-goals4","line":181,"column":0,"depth":3},"download-multiple-pdf-into-one-zip-file":{"type":"header","text":"Download multiple PDF into one zip file","value":"download-multiple-pdf-into-one-zip-file","line":188,"column":0,"depth":3},"references":{"type":"header","text":"References","value":"references","line":198,"column":0,"depth":2},"generation-pdf-with-headless-chrome":{"type":"header","text":"Generation pdf with headless chrome","value":"generation-pdf-with-headless-chrome","line":200,"column":0,"depth":3},"etc":{"type":"header","text":"Etc","value":"etc","line":223,"column":0,"depth":3}},"children":[],"parent":"djdvoLLYDZe9TkgbPbnIt","data":{}},"body":"\u003ch1 id=\"pdf-generator\"\u003ePdf Generator\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#pdf-generator\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://arc42.org/overview\"\u003eArc42\u003c/a\u003e와 \u003ca href=\"https://c4model.com/\"\u003eC4 model\u003c/a\u003e을 참고하여\n프로젝트 문서를 작성\u003c/p\u003e\n\u003ch2 id=\"goal\"\u003eGoal\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#goal\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e제공되는 웹페이지를 A4 크기의 PDF로 만들어 client에게 제공\u003c/p\u003e\n\u003ch3 id=\"requirements-overview\"\u003eRequirements Overview\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#requirements-overview\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e기존에 PDF 생성에 사용하던 \u003ca href=\"https://pdfcrowd.com/\"\u003ePDFCrowd\u003c/a\u003e를 대체할 도구 제작\u003c/p\u003e\n\u003ch3 id=\"quality-goals\"\u003eQuality Goals\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#quality-goals\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003ePDFCrowd보다 저럼하게 → $276/month 보다 저렴히\u003c/li\u003e\n\u003cli\u003ePDFCrowd보다 빠르게 PDF 생성 → 20~30초보다 빠르게\u003c/li\u003e\n\u003cli\u003ePDFCrowd보다 Scalability 좋게 → 동시 생성 가능 개수를 전체 8개보다 많게\u003c/li\u003e\n\u003cli\u003e생성된 PDF를 S3 저장하여 서비스하고 그대로 파일을 방치하는 프로세스를 개선하여 인프라·관리 비용을 줄일 것\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"stakeholders\"\u003eStakeholders\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#stakeholders\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eName\u003c/th\u003e\u003cth\u003eExpectations\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eLuke\u003c/td\u003e\u003ctd\u003eProject, AWS Infra 관리\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003ch2 id=\"constraints\"\u003eConstraints\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#constraints\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"technical-constraints\"\u003eTechnical Constraints\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#technical-constraints\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eConstraint\u003c/th\u003e\u003cth\u003eBackground and / or motivation\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eWeb browser로 다운가능\u003c/td\u003e\u003ctd\u003e파트너사나 Report 고객에게 PDF를 제공할 때 가장 접근성이 좋다.\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003ch2 id=\"context\"\u003eContext\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#context\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"mermaid\"\u003e\n  C4Context\n  title System Context diagram for PDF download\n\n  Person(user, \"User\", \"People that need PDF\")\n  System_Boundary(WebApp, \"Web App\") {\n    Container(WebPage, \"Web Page\", \"Report, Portal, .com\")\n    Container(PdfGenerator, \"PDF Generator\", \"AWS Lambda, S3\")\n  }\n\n  BiRel(user, WebPage, \"1. Request to download PDF ⬇️ / 4. Download PDF file ⬆️\")\n  BiRel(WebPage, PdfGenerator, \"2. Request API ➡️ / 3. Redirect to PDF file ⬅️\")\n\n  UpdateRelStyle(user, WebPage, $offsetX=\"-115\", $offsetY=\"-30\", $lineColor=\"blue\", $textColor=\"red\")\n  UpdateRelStyle(WebPage, PdfGenerator, $offsetX=\"-85\", $offsetY=\"45\")\n\u003c/div\u003e\n\u003ch3 id=\"user\"\u003eUser\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#user\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e사용자\u003c/th\u003e\u003cth\u003e용도\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eReport 고객\u003c/td\u003e\u003ctd\u003eMybook 다운로드\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e파트너사\u003c/td\u003e\u003ctd\u003eMybook 인쇄\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e[.com] 고객\u003c/td\u003e\u003ctd\u003e동의서(미리 생성)\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003ch3 id=\"build-deployment\"\u003eBuild, Deployment\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#build-deployment\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003egithub action을 통해 nuxt build.\u003c/p\u003e\n\u003cp\u003eclient code는 S3, cloudfront로 배포, server code는 aws lambda로 배포.\n(cloudfront는 없어도 될 듯?)\u003c/p\u003e\n\u003cp\u003e현재 AWS GPJ dev 계정에만 연결되어 있음. 추후 AWS GPK 계정에도 세팅해야 함.\u003c/p\u003e\n\u003ch3 id=\"html-page-to-pdf-render\"\u003eHTML page to PDF render\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#html-page-to-pdf-render\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e이 프로젝트에서 생성할 PDF target. 2023년 Q3 현재 back-end에서 제작 중.\u003c/p\u003e\n\u003cp\u003e추후 front-end에서 담당할 예정\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003e예제 URL\u003c/summary\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cdel\u003eSample URL A\u003c/del\u003e\u003c/li\u003e\n\u003cli\u003e\u003cdel\u003eSample URL B\u003c/del\u003e\n\u003c/li\u003e\u003c/ul\u003e\u003c/details\u003e\n\n\n\u003ch3 id=\"pdf-file\"\u003ePDF file\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#pdf-file\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eS3에 저장되는 결과물. github action을 통해 하루 단위로 삭제. \u003ca href=\"#quality-goals\"\u003eQuality Goals#4\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003egithub 공식문서에서 언급하듯이 \u003ca href=\"#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C\"\u003ecron 신뢰도가 좀 떨어지므로\u003c/a\u003e 2번 trigger 걸어놓음.\u003cbr\u003e\n결과는 slack channel로 message 보내게 해뒀으니 체크하여 대응할 수 있도록 함.\u003c/p\u003e\n\u003ch2 id=\"solution-strategy\"\u003eSolution Strategy\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#solution-strategy\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eQuality goal\u003c/th\u003e\u003cth\u003eSolution Approach\u003c/th\u003e\u003cth\u003eDetails\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e$276/month 보다 저렴히\u003c/td\u003e\u003ctd\u003eAWS Lambda 사용\u003c/td\u003e\u003ctd\u003e\u003ca href=\"#lambda-resource-setting\"\u003eLambda resource setting\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e20~30초보다 빠르게 PDF 생성\u003c/td\u003e\u003ctd\u003eAWS Lambda 사용\u003c/td\u003e\u003ctd\u003e\u003ca href=\"#lambda-resource-setting\"\u003eLambda resource setting\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e동시 생성 가능 개수를 전체 8개보다 많게\u003c/td\u003e\u003ctd\u003eAWS Lambda 사용\u003c/td\u003e\u003ctd\u003e\u003ca href=\"#aws-lambda%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\"\u003eAWS Lambda를 쓰는 이유\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e인프라·관리 비용 줄이기\u003c/td\u003e\u003ctd\u003eGithub action cron 사용\u003c/td\u003e\u003ctd\u003e\u003ca href=\"#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C-quality-goals4\"\u003e하루 한 번 S3 dir 삭제\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003ch2 id=\"building-block-view\"\u003eBuilding Block View\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#building-block-view\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"serverroutes\"\u003e/server/routes/*\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#serverroutes\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003ePuppeteer로 지정된 Render URL을 PDF로 생성하여 S3에 저장 후 redirect하는 API\u003c/p\u003e\n\u003ch3 id=\"pages\"\u003e/pages/*\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#pages\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/eligrey/FileSaver.js\"\u003eFileSaver.js\u003c/a\u003e, \u003ca href=\"https://github.com/Stuk/jszip\"\u003eJSZip\u003c/a\u003e를 사용하여 client 단에서 Download를 실행시키는 페이지\u003c/p\u003e\n\u003ch2 id=\"runtime-view\"\u003eRuntime View\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#runtime-view\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAWS Lambda에서 Puppeteer + \u003ca href=\"https://github.com/Sparticuz/chromium#-min-package\"\u003eheadless chromium\u003c/a\u003e으로 PDF 생성\n\u003cul\u003e\n\u003cli\u003e이미 생성된 PDF가 있다면 생성과정 없이 바로 redirect\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePDF는 \u003ca href=\"#s3%EB%A5%BC-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\"\u003eS3에 저장\u003c/a\u003e 후, 해당 URL을 redirect\n\u003cul\u003e\n\u003cli\u003e내일을 expire day로 잡아 directory로 생성\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%ED%95%98%EB%A3%A8-%ED%95%9C-%EB%B2%88-s3-directory-%EC%82%AD%EC%A0%9C\"\u003e하루 한 번 Github action cron으로 directory 삭제\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eredirect 후 단일 PDF \u003ca href=\"https://github.com/eligrey/FileSaver.js\"\u003e저장\u003c/a\u003e or \u003ca href=\"#download-multiple-pdf-into-one-zip-file\"\u003e복수 개의 PDF라면 zip으로 저장\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"deployment-view\"\u003eDeployment View\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#deployment-view\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"gpj-dev-계정\"\u003eGPJ dev 계정\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#gpj-dev-계정\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eInfrastructure\u003c/th\u003e\u003cth\u003eDescription\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eAWS Lambda\u003c/td\u003e\u003ctd\u003e\u003cdel\u003eLambda Function URL\u003c/del\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eAWS S3 client 배포용\u003c/td\u003e\u003ctd\u003e\u003cdel\u003eS3 URL\u003c/del\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eAWS S3 PDF resources\u003c/td\u003e\u003ctd\u003e\u003cdel\u003eS3 URL\u003c/del\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003ch2 id=\"decision-log\"\u003eDecision Log\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#decision-log\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"client가-아닌-server-generator을-쓰는-이유\"\u003eClient가 아닌 server generator을 쓰는 이유\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#client가-아닌-server-generator을-쓰는-이유\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eclient에서 생성할 수 있지만, server에서 생성해서 내려주는게 사용자별 browser 호환성 문제 없다.\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003eClient PDF generator tools\u003c/summary\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/parallax/jsPDF\"\u003ehttps://github.com/parallax/jsPDF\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/eKoopmans/html2pdf.js\"\u003ehttps://github.com/eKoopmans/html2pdf.js\u003c/a\u003e\n\u003c/li\u003e\u003c/ul\u003e\u003c/details\u003e\n\n\n\u003ch3 id=\"aws-lambda를-쓰는-이유\"\u003eAWS Lambda를 쓰는 이유\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#aws-lambda를-쓰는-이유\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eScalability 확보를 위해. \u003ca href=\"#quality-goals\"\u003eQuality Goals#3\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e복수(30개) pdf 생성 \u0026#x26; 다운로드 테스트해보니 \u003ca href=\"https://stackoverflow.com/a/985704\"\u003ebrowser에서 동시 접속 제한\u003c/a\u003e만큼 병렬로 생성 됨 (보통 6개)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e이전 PDFCrowd는 여러 명이 사용해도 전체 8개 제한이 있지만 Lambda는 그런 제한이 없음\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"lambda-resource-setting\"\u003eLambda resource setting\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#lambda-resource-setting\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch4 id=\"생성에-걸리는-시간-quality-goals2-관련\"\u003e생성에 걸리는 시간 \u003ca href=\"#quality-goals\"\u003eQuality Goals#2 관련\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#생성에-걸리는-시간-quality-goals2-관련\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003ePDFCrowd의 경우 20~30초\u003c/p\u003e\n\u003cp\u003e메모리에 따라 CPU 할당도 변경.\u003cbr\u003e\nSample PDF(6.5초 rendering) 기준, run Puppeteer + Load HTML + save PDF to S3에 걸리는 시간:\u003c/p\u003e\n\u003cdiv class=\"table-responsive\"\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e할당된 메모리\u003c/th\u003e\u003cth\u003e생성에 걸리는 시간\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e4096MB\u003c/td\u003e\u003ctd\u003e18초\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2048MB\u003c/td\u003e\u003ctd\u003e21초\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e1024MB\u003c/td\u003e\u003ctd\u003e48초\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/div\u003e\n\u003cp\u003eCPU를 더 할당해도, lambda cold start와 API response time은 못 줄임.\u003c/p\u003e\n\u003ch4 id=\"가격-quality-goals1-충족\"\u003e가격 \u003ca href=\"#quality-goals\"\u003eQuality Goals#1 충족\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#가격-quality-goals1-충족\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e2기가 기준으로 sample pdf 하나당 $0.0006993가 소모된다. (\u003ca href=\"https://aws.amazon.com/ko/lambda/pricing/#AWS_Lambda_Pricing\"\u003ememory cpu 가격\u003c/a\u003e만 따졌을 때) 1만 건당 7달러.\u003cbr\u003e\n2022.08~2023.08의 1년에 약 2만 건. $14 vs $3312(PDFCrowd plan $276/month x 12개월)\u003c/p\u003e\n\u003ch3 id=\"s3를-써야-하는-이유\"\u003eS3를 써야 하는 이유\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#s3를-써야-하는-이유\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003elambda에서 직접 다운로드 불가 - \u003ca href=\"https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html#function-configuration-deployment-and-execution\"\u003e용량 초과(Invocation payload)\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"하루-한-번-s3-directory-삭제-quality-goals4\"\u003e하루 한 번 S3 directory 삭제 \u003ca href=\"#quality-goals\"\u003eQuality Goals#4\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#하루-한-번-s3-directory-삭제-quality-goals4\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eGithub cron issue - \u003ca href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule\"\u003e공식 문서\u003c/a\u003e에서 schedule time이 부정확하고 누락 가능성도 있다고 언급\u003cbr\u003e\n-\u003e 새벽에 2번 실행. slack message 확인 후 안됐으면 github에서 직접 실행 가능\u003c/p\u003e\n\u003cp\u003egithub actions나 AWS lambda 시간은 UTC+0 기준.\u003c/p\u003e\n\u003ch3 id=\"download-multiple-pdf-into-one-zip-file\"\u003eDownload multiple PDF into one zip file\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#download-multiple-pdf-into-one-zip-file\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e파트너사? 사용자가 하나하나 받기 불편하다고 요청\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/eligrey/FileSaver.js\"\u003eFileSaver.js\u003c/a\u003e, \u003ca href=\"https://github.com/Stuk/jszip\"\u003eJSZip\u003c/a\u003e, \u003ca href=\"https://github.com/Stuk/jszip-utils\"\u003eJSZipUtils\u003c/a\u003e으로 browser 단에서 받도록\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/a/985704\"\u003ebrowser에서 동시 접속 제한\u003c/a\u003e만큼 병렬로 생성 됨 (보통 6개)\u003c/li\u003e\n\u003cli\u003e30개 생성 + pdf download + zip 생성 후 저장에 2분 안 걸림 (227.4MB)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/eligrey/FileSaver.js#supported-browsers\"\u003echrome에서 2GB 제한\u003c/a\u003e. 더 큰 파일은 stream 이용하는 code로 변경해야 함\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"references\"\u003eReferences\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#references\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"generation-pdf-with-headless-chrome\"\u003eGeneration pdf with headless chrome\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#generation-pdf-with-headless-chrome\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e찾는 문서마다 chromium binary가 몇 년 지난 구 버전뿐이라 다른 문서에서 설명하는 docker image로 올려야 하나 고민했는데 계속 찾아보니 최신 binary를 발견\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003e참고 URLs\u003c/summary\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#running-puppeteer-on-aws-lambda\"\u003eRunning Puppeteer on AWS Lambda\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Sparticuz/chromium\"\u003ehttps://github.com/Sparticuz/chromium\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Sparticuz/chromium#-min-package\"\u003ehttps://github.com/Sparticuz/chromium#-min-package\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Sparticuz/chromium/blob/master/examples/remote-min-binary/index.js\"\u003ehttps://github.com/Sparticuz/chromium/blob/master/examples/remote-min-binary/index.js\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Sparticuz/chromium#running-locally--headlessheadful-mode\"\u003ehttps://github.com/Sparticuz/chromium#running-locally--headlessheadful-mode\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/aws-builders/building-a-pdf-generator-using-aws-lambda-4220#the-best-way-out-serverside-generation\"\u003ehttps://dev.to/aws-builders/building-a-pdf-generator-using-aws-lambda-4220#the-best-way-out-serverside-generation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://blog.carlosnunez.me/post/scraping-chromium-lambda-nodeless-zerostress/#lessons-learned\"\u003eAlso make sure that you use --no-sandbox, --disable-dev-shm-usage, --disable-gpu, and --single-process.\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://wkhtmltopdf.org/downloads.html#stable\"\u003ehttps://wkhtmltopdf.org/downloads.html#stable\u003c/a\u003e - lambda용 binary가 있어 이것도 괜찮을거 같은데 \u003ccode\u003eQt WebKit rendering engine\u003c/code\u003e을 써서 개발 시 귀찮을 듯\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://awstip.com/pdf-generator-by-puppeteer-on-aws-lambda-with-nestjs-and-serverless-framework-669ba22d9fa\"\u003eChromium only supports x86_64 architecture inside lambda docker container, not arm64\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/alixaxel/chrome-aws-lambda/wiki/HOWTO:-Local-Development\"\u003eLocal Development\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Wavelop/download-pdf-aws/blob/main/lambdas/download-pdf.ts\"\u003eheader/footer template\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://apitemplate.io/blog/tips-for-generating-pdfs-with-puppeteer/\"\u003epuppeteer launch option\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/puppeteer/puppeteer/issues/1523\"\u003e\u003ccode\u003ebrowser.newPage()\u003c/code\u003e returns null\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/11415665/save-base64-string-as-pdf-at-client-side-with-javascript\"\u003esave base64 string as pdf at client\u003c/a\u003e\n\u003c/li\u003e\u003c/ul\u003e\u003c/details\u003e\n\n\n\u003ch3 id=\"etc\"\u003eEtc\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#etc\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cdetails\u003e\n\u003csummary\u003e그 외 참고했던 URLs\u003c/summary\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-printToPDF\"\u003ehttps://chromedevtools.github.io/devtools-protocol/tot/Page/#method-printToPDF\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://blog.grio.com/2020/08/understanding-pdf-generation-with-headless-chrome.html\"\u003ehttps://blog.grio.com/2020/08/understanding-pdf-generation-with-headless-chrome.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developer.chrome.com/blog/headless-chrome/\"\u003ehttps://developer.chrome.com/blog/headless-chrome/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/GoogleChrome/chrome-launcher\"\u003ehttps://github.com/GoogleChrome/chrome-launcher\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/compass-true-north/go-service-to-convert-web-pages-to-pdf-using-headless-chrome-5fd9ffbae1af\"\u003ehttps://medium.com/compass-true-north/go-service-to-convert-web-pages-to-pdf-using-headless-chrome-5fd9ffbae1af\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/aromanarguello/using-aws-lambdas-headless-chrome-to-generate-pdf-files-from-html-b4l\"\u003ehttps://dev.to/aromanarguello/using-aws-lambdas-headless-chrome-to-generate-pdf-files-from-html-b4l\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/alixaxel/chrome-aws-lambda\"\u003ehttps://github.com/alixaxel/chrome-aws-lambda\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/adieuadieu/serverless-chrome\"\u003ehttps://github.com/adieuadieu/serverless-chrome\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html\"\u003eAmazon Linux 2\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Linux_ARM_Cross-Compile/\"\u003ehttps://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Linux_ARM_Cross-Compile/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/akirautio/generate-a-pdf-in-aws-lambda-with-nodejs-and-puppeteer-2b93\"\u003ehttps://dev.to/akirautio/generate-a-pdf-in-aws-lambda-with-nodejs-and-puppeteer-2b93\u003c/a\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAnd here we have everything to generate PDF in AWS lambda. To my opinion generating the pdf with 1024 MB took something like 4000ms which would mean that total price would be close to 1 euro per 20000 PDF generations after free tier.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ARautio/aws-lambda-pdf-generator-puppeteer\"\u003ehttps://github.com/ARautio/aws-lambda-pdf-generator-puppeteer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/RelaxedJS/ReLaXed\"\u003ehttps://github.com/RelaxedJS/ReLaXed\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/58629198/base64-to-pdf-export-issue-aws-lambda\"\u003ehttps://stackoverflow.com/questions/58629198/base64-to-pdf-export-issue-aws-lambda\u003c/a\u003e - API gateway permission\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/ko/blogs/architecture/field-notes-scaling-browser-automation-with-puppeteer-on-aws-lambda-with-container-image-support/\"\u003ehttps://aws.amazon.com/ko/blogs/architecture/field-notes-scaling-browser-automation-with-puppeteer-on-aws-lambda-with-container-image-support/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/serverless/examples/tree/v3/aws-node-puppeteer\"\u003ehttps://github.com/serverless/examples/tree/v3/aws-node-puppeteer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/a/74549527/5163033\"\u003ehttps://stackoverflow.com/a/74549527/5163033\u003c/a\u003e - generate pdf using Blob\n\u003c/li\u003e\u003c/ul\u003e\u003c/details\u003e\n\n\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/6645fjtiqxtko03nuccgjj2\"\u003eWhat I struggled 🧗/📣 brag In\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"97xyuferp9tenofb8o424b8"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>