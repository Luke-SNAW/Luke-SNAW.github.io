<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Using :has() as a CSS Parent Selector and much more</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Using :has() as a CSS Parent Selector and much more"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/8w5mxswu48wwne2lisingsc/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="8/29/2022"/><meta property="article:modified_time" content="8/29/2022"/><link rel="canonical" href="https://luke-snaw.github.io//notes/8w5mxswu48wwne2lisingsc/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_buildManifest.js" defer=""></script><script src="/_next/static/wirstT2ztC8OQsbzKjhvw/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="using-has-as-a-css-parent-selector-and-much-more">Using :has() as a CSS Parent Selector and much more<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-as-a-css-parent-selector-and-much-more"></a></h1>
<blockquote>
<p><a href="https://webkit.org/blog/13096/css-has-pseudo-class/">https://webkit.org/blog/13096/css-has-pseudo-class/</a></p>
</blockquote>
<p>Over the last <a href="https://lists.w3.org/Archives/Public/www-style/2002May/0037.html">twenty years</a>, the CSS Working Group discussed the possibility many, many times. The need was clear and well understood. Defining syntax was a doable task. But figuring out how a browser engine could handle potentially very complex circular patterns, and get through the calculations fast enough seemed impossible. Early versions of a parent selector were drafted for CSS3, only to be deferred. Finally, the <code>:has()</code> pseudo-class was officially defined in <a href="https://www.w3.org/TR/selectors-4/#relational">CSS Selectors level 4</a>. But having a web standard alone didn’t make <code>:has()</code> a reality. We still needed a browser team to figure out the very real performance challenge. In the meantime, computers continued to get more powerful and faster year after year.</p>
<p>In 2021, <a href="https://www.igalia.com/">Igalia</a> started advocating for <code>:has()</code> among browser engineering teams, <a href="https://bkardell.com/blog/canihas.html">prototyping</a> their ideas and <a href="https://github.com/Igalia/explainers/tree/main/css/has">documenting</a> their findings regarding performance. The renewed attention on <code>:has()</code> caught the attention of engineers who work on WebKit at Apple. We started implementing the pseudo-class, thinking through possibilities for the needed performance enhancements to make this work. We debated whether to start with a faster version with a very limited and narrow scope of what it could do, and then try to remove those limits if possible… or to start with something that had no limits, and only apply restrictions as required. We went for it, and implemented the more powerful version. We developed a number of novel <code>:has</code>-specific caching and filtering optimizations, and leveraged the existing advanced optimization strategies of our CSS engine. And our approach worked, proving that after a two decade wait, it is finally possible to implement such a selector with <a href="https://twitter.com/anttikoivisto/status/1473251189181591554">fantastic performance</a>, even in the presence of large DOM trees and large numbers of <code>:has()</code> selectors.</p>
<h2 id="the-basics-of-how-to-use-has-as-a-parent-selector">The basics of how to use :has() as a parent selector<a aria-hidden="true" class="anchor-heading icon-link" href="#the-basics-of-how-to-use-has-as-a-parent-selector"></a></h2>
<pre class="language-css"><code class="language-css"><span class="token selector">figure<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">252</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token unit">px</span> solid <span class="token color">white</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">rem</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And I use a Selector Feature Query to hide a reminder about browser support whenever the current browser supports <code>:has()</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token selector-function-argument selector"><span class="token pseudo-class">:has</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span></span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">small</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>@supports selector()</code> at-rule is itself <a href="https://caniuse.com/mdn-css_at-rules_supports_selector">very well supported</a>. It can be incredibly useful anytime you want to use a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Conditional_Rules/Using_Feature_Queries">feature query</a> to test for browser support of a particular selector.</p>
<p>And finally, in this first demo, I also write a complex selector using the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not"><code>:not() pseudo-class</code></a>. I want to apply <code>display: flex</code> to the figure — but only if an image is the sole content. Flexbox makes the image stretch to fill all available space.</p>
<p>I use a selector to target any <code>figure</code> that does <em>not</em> have any element that is <em>not</em> an image. If the <code>figure</code> has a <code>figcaption</code>, <code>pre</code>, <code>p</code>, or an <code>h1</code> — or any element at all besides <code>img</code> — then the selector doesn’t apply.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">figure<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:not</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>:has()</code> is a powerful thing.</p>
<h2 id="using-has-with-the-child-combinator">Using :has() with the child combinator<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-with-the-child-combinator"></a></h2>
<p>First, a quick review of the difference between the <a href="https://www.w3.org/TR/selectors-4/#descendant-combinators">descendant combinator</a> and the <a href="https://www.w3.org/TR/selectors-4/#child-combinators">child combinator</a> (<code>></code>).</p>
<pre class="language-css"><code class="language-css"><span class="token selector">a<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-css"><code class="language-css"><span class="token selector">a<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">></span> img<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The first selects any <code>a</code> element with an <code>img</code> inside — any place in the HTML structure. While the second selects an element only if the <code>img</code> is a direct child of the <code>a</code>.</p>
<h2 id="using-has-with-sibling-combinators">Using :has() with sibling combinators<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-with-sibling-combinators"></a></h2>
<p>Let’s review the two selectors with sibling relationships. There’s the <a href="https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators">next-sibling combinator</a> (<code>+</code>) and the <a href="https://www.w3.org/TR/selectors-4/#general-sibling-combinators">subsequent-sibling combinator</a> (<code>~</code>).</p>
<p>The next-sibling combinator (<code>+</code>) selects only the paragraphs that come <em>directly</em> after an <code>h2</code> element.</p>
<pre class="language-css"><code class="language-css">h2 <span class="token operator">+</span> p
</code></pre>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span><span class="token punctuation">></span></span>Headline<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Paragraph that is selected by `h2 + p`, because it's directly after `h2`.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</code></pre>
<p>The subsequent-sibling combinator (<code>~</code>) selects all paragraphs that come after an <code>h2</code> element. They must be siblings, but there can be any number of other HTML elements in between.</p>
<pre class="language-css"><code class="language-css">h2 ~ p
</code></pre>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span><span class="token punctuation">></span></span>Headline<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span>Something else<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Paragraph that is selected by `h2 ~ p`.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is also selected.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</code></pre>
<p>Note that both <code>h2 + p</code> and <code>h2 ~ p</code> select the paragraph elements, and not the <code>h2</code> headlines. Like other selectors (think of <code>a img</code>), it’s the last element listed that is targeted by the selector. But what if we want to target the <code>h2</code>? We can use sibling combinators with <code>:has().</code></p>
<p>How often have you wanted to adjust the margins on a headline based on the element following it? Now it’s easy. This code allows us to select any <code>h2</code> with a <code>p</code> immediately after it.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h2<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> p<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Amazing.</p>
<p>What if we want to do this for all six headline elements, without writing out six copies of the selector. We can use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is"><code>:is</code></a> to simplify our code.</p>
<pre class="language-css"><code class="language-css"><span class="token selector"><span class="token pseudo-class">:is</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">)</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> p<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Or what if we want to write this code for more elements than just paragrapahs? Let’s eliminate the bottom margin of all headlines whenever they are followed by paragraphs, captions, code examples and lists.</p>
<pre class="language-css"><code class="language-css"><span class="token selector"><span class="token pseudo-class">:is</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">)</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> <span class="token pseudo-class">:is</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> figcaption<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> dl<span class="token punctuation">,</span> ul<span class="token punctuation">,</span> ol<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Combining <code>:has()</code> with <a href="https://www.w3.org/TR/selectors-4/#descendant-combinators">descendant combinators</a>, <a href="https://www.w3.org/TR/selectors-4/#child-combinators">child combinators</a> (<code>></code>), <a href="https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators">next-sibling combinators</a> (<code>+</code>), and <a href="https://www.w3.org/TR/selectors-4/#general-sibling-combinators">subsequent-sibling combinators</a> (<code>~</code>) opens up a world of possibilities. But oh, this is <em>still</em> just the beginning.</p>
<h2 id="styling-form-states-without-js">Styling form states without JS<a aria-hidden="true" class="anchor-heading icon-link" href="#styling-form-states-without-js"></a></h2>
<p>There are a lot of fantastic <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes">pseudo-classes</a> that can be used inside has:(). In fact, it revolutionizes what pseudo-classes can do. Previously, pseudo-classes were only used for styling an element based on a special state — or styling one of its children. Now, pseudo-classes can be used to capture state, without JavaScript, and style anything in the DOM based on that state.</p>
<p>Form input fields provide a powerful way to capture such a state. Form-specific pseudo-classes include <code>:autofill</code>, <code>:enabled</code>, <code>:disabled</code>, <code>:read-only</code>, <code>:read-write</code>, <code>:placeholder-shown</code>, <code>:default</code>, <code>:checked</code>, <code>:indeterminate</code>, <code>:valid</code>, <code>:invalid</code>, <code>:in-range</code>, <code>:out-of-range</code>, <code>:required</code> and <code>:optional</code>.</p>
<p>Let’s solve one of the use cases I described in the introduction — the long-standing need to style a form label based on the state of the input field. Let’s start with a basic form.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>form</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Name<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>site<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Website<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>site<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>form</span><span class="token punctuation">></span></span>
</code></pre>
<p>I’d like to apply a background to the whole form whenever one of the fields is in focus.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color">antiquewhite</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now I could have used <code>form:focus-within</code> instead, but it would behave like <code>form:has(:focus)</code>. The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus"><code>:focus</code></a> pseudo-class always applies CSS whenever a field is in focus. The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible"><code>:focus-visible</code></a> pseudo-class provides a reliable way to style a focus indicator only when the browser would draw one natively, using the same <a href="https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/">complex heuristics the browser uses</a> to determine whether or not to apply a focus-ring.</p>
<p>Now, let’s imagine I want to style the other fields, the ones <em>not</em> in focus — changing their label text color and the input border color. Before <code>:has()</code>, this required JavaScript. Now we can use this CSS.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span> div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span><span class="token punctuation">)</span> label</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">peru</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span> div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span><span class="token punctuation">)</span> input</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">peru</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>What does that selector say? If one of the controls inside this form has focus, and the input element for this particular form control does not have focus, then change the color of this label’s text to <code>peru</code>. And change the border of the input field to be <code>2px solid peru</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">input<span class="token pseudo-class">:invalid</span></span> <span class="token punctuation">{</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token unit">px</span> solid <span class="token color">red</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now with <code>:has()</code>, we can turn the label text red as well:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:invalid</span><span class="token punctuation">)</span> label</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You can see the result by typing something in the website or email field that’s not a fully-formed URL or email address. Both are invalid, and so both will trigger a red border and red label, with an “X”.</p>
<h2 id="and-more">And more<a aria-hidden="true" class="anchor-heading icon-link" href="#and-more"></a></h2>
<p>Looking through other <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes">pseudo-classes</a>, there are so many that can be combined with <code>:has()</code>. Imagine the possibilities with <code>:nth-child</code>, <code>:nth-last-child</code>, <code>:first-child</code>, <code>:last-child</code>, <code>:only-child</code>, <code>:nth-of-type</code>, <code>:nth-last-of-type</code>, <code>:first-of-type</code>, <code>:last-of-type</code>, <code>:only-of-type</code>. The brand new <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:modal"><code>:modal</code></a> pseudo-class is triggered when a <code>dialog</code> is in the open state. With <code>:has(:modal)</code> you can style anything in the DOM based on whether the <code>dialog</code> is open or closed.</p>
<p>However, not every pseudo-class is currently supported inside <code>:has()</code> in every browser, so do try out your code in multiple browsers. Currently the dynamic media pseudo-classes don’t work — like <code>:playing</code>, <code>:paused</code>, <code>:muted</code>, etc. They very well may work in the future, so if you are reading this in the future, test them out! Also, form invalidation support is currently missing in certain specific situations, so dynamic state changes to those pseudo-classes may not update with <code>:has()</code>.</p>
<p>Safari 16 will add support for <code>:has(:target)</code> opening up interesting possibilities for writing code that looks at the current URL for a fragment that matches the ID of a specific element. For example, if a user clicks on a table of contents at the top of a document, and jumps down to the section of the page matching that link, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:target"><code>:target</code></a> provides a way to style that content uniquely, based on the fact the user clicked the link to get there. And <code>:has()</code> opens up what such styling can do.</p>
<p>Something to note — the CSS Working Group <a href="https://github.com/w3c/csswg-drafts/issues/7463">resolved</a> to disallow all existing pseudo-elements inside of <code>:has()</code>. For example, <code>article:has(p::first-line)</code> and <code>ol:has(li::marker)</code> won’t work. Same with <code>::before</code> and <code>::after.</code></p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-basics-of-how-to-use-has-as-a-parent-selector" title="The basics of how to use :has() as a parent selector">The basics of how to use :has() as a parent selector</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-has-with-the-child-combinator" title="Using :has() with the child combinator">Using :has() with the child combinator</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#using-has-with-sibling-combinators" title="Using :has() with sibling combinators">Using :has() with sibling combinators</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#styling-form-states-without-js" title="Styling form states without JS">Styling form states without JS</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#and-more" title="And more">And more</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"8w5mxswu48wwne2lisingsc","title":"Using :has() as a CSS Parent Selector and much more","desc":"","updated":1661748214738,"created":1661745381272,"custom":{},"fname":"dev.CSS.selectors.Using has as a CSS Parent Selector and much more","type":"note","vault":{"fsPath":"vault"},"contentHash":"bc8785efcbcc82215d9107c68b6b998e","links":[],"anchors":{"the-basics-of-how-to-use-has-as-a-parent-selector":{"type":"header","text":"The basics of how to use :has() as a parent selector","value":"the-basics-of-how-to-use-has-as-a-parent-selector","line":14,"column":0,"depth":2},"using-has-with-the-child-combinator":{"type":"header","text":"Using :has() with the child combinator","value":"using-has-with-the-child-combinator","line":48,"column":0,"depth":2},"using-has-with-sibling-combinators":{"type":"header","text":"Using :has() with sibling combinators","value":"using-has-with-sibling-combinators","line":66,"column":0,"depth":2},"styling-form-states-without-js":{"type":"header","text":"Styling form states without JS","value":"styling-form-states-without-js","line":124,"column":0,"depth":2},"and-more":{"type":"header","text":"And more","value":"and-more","line":189,"column":0,"depth":2}},"children":[],"parent":"6vthnx3xkbl08o896k872yz","data":{}},"body":"\u003ch1 id=\"using-has-as-a-css-parent-selector-and-much-more\"\u003eUsing :has() as a CSS Parent Selector and much more\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-as-a-css-parent-selector-and-much-more\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://webkit.org/blog/13096/css-has-pseudo-class/\"\u003ehttps://webkit.org/blog/13096/css-has-pseudo-class/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eOver the last \u003ca href=\"https://lists.w3.org/Archives/Public/www-style/2002May/0037.html\"\u003etwenty years\u003c/a\u003e, the CSS Working Group discussed the possibility many, many times. The need was clear and well understood. Defining syntax was a doable task. But figuring out how a browser engine could handle potentially very complex circular patterns, and get through the calculations fast enough seemed impossible. Early versions of a parent selector were drafted for CSS3, only to be deferred. Finally, the \u003ccode\u003e:has()\u003c/code\u003e pseudo-class was officially defined in \u003ca href=\"https://www.w3.org/TR/selectors-4/#relational\"\u003eCSS Selectors level 4\u003c/a\u003e. But having a web standard alone didn’t make \u003ccode\u003e:has()\u003c/code\u003e a reality. We still needed a browser team to figure out the very real performance challenge. In the meantime, computers continued to get more powerful and faster year after year.\u003c/p\u003e\n\u003cp\u003eIn 2021, \u003ca href=\"https://www.igalia.com/\"\u003eIgalia\u003c/a\u003e started advocating for \u003ccode\u003e:has()\u003c/code\u003e among browser engineering teams, \u003ca href=\"https://bkardell.com/blog/canihas.html\"\u003eprototyping\u003c/a\u003e their ideas and \u003ca href=\"https://github.com/Igalia/explainers/tree/main/css/has\"\u003edocumenting\u003c/a\u003e their findings regarding performance. The renewed attention on \u003ccode\u003e:has()\u003c/code\u003e caught the attention of engineers who work on WebKit at Apple. We started implementing the pseudo-class, thinking through possibilities for the needed performance enhancements to make this work. We debated whether to start with a faster version with a very limited and narrow scope of what it could do, and then try to remove those limits if possible… or to start with something that had no limits, and only apply restrictions as required. We went for it, and implemented the more powerful version. We developed a number of novel \u003ccode\u003e:has\u003c/code\u003e-specific caching and filtering optimizations, and leveraged the existing advanced optimization strategies of our CSS engine. And our approach worked, proving that after a two decade wait, it is finally possible to implement such a selector with \u003ca href=\"https://twitter.com/anttikoivisto/status/1473251189181591554\"\u003efantastic performance\u003c/a\u003e, even in the presence of large DOM trees and large numbers of \u003ccode\u003e:has()\u003c/code\u003e selectors.\u003c/p\u003e\n\u003ch2 id=\"the-basics-of-how-to-use-has-as-a-parent-selector\"\u003eThe basics of how to use :has() as a parent selector\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-basics-of-how-to-use-has-as-a-parent-selector\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003efigure\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epre\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ebackground\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token color\"\u003e\u003cspan class=\"token function\"\u003ergb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e252\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e232\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e255\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eborder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e solid \u003cspan class=\"token color\"\u003ewhite\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003epadding\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token unit\"\u003erem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd I use a Selector Feature Query to hide a reminder about browser support whenever the current browser supports \u003ccode\u003e:has()\u003c/code\u003e.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token atrule\"\u003e\u003cspan class=\"token rule\"\u003e@supports\u003c/span\u003e \u003cspan class=\"token function\"\u003eselector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token selector-function-argument selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003esmall\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003e@supports selector()\u003c/code\u003e at-rule is itself \u003ca href=\"https://caniuse.com/mdn-css_at-rules_supports_selector\"\u003every well supported\u003c/a\u003e. It can be incredibly useful anytime you want to use a \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Conditional_Rules/Using_Feature_Queries\"\u003efeature query\u003c/a\u003e to test for browser support of a particular selector.\u003c/p\u003e\n\u003cp\u003eAnd finally, in this first demo, I also write a complex selector using the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:not\"\u003e\u003ccode\u003e:not() pseudo-class\u003c/code\u003e\u003c/a\u003e. I want to apply \u003ccode\u003edisplay: flex\u003c/code\u003e to the figure — but only if an image is the sole content. Flexbox makes the image stretch to fill all available space.\u003c/p\u003e\n\u003cp\u003eI use a selector to target any \u003ccode\u003efigure\u003c/code\u003e that does \u003cem\u003enot\u003c/em\u003e have any element that is \u003cem\u003enot\u003c/em\u003e an image. If the \u003ccode\u003efigure\u003c/code\u003e has a \u003ccode\u003efigcaption\u003c/code\u003e, \u003ccode\u003epre\u003c/code\u003e, \u003ccode\u003ep\u003c/code\u003e, or an \u003ccode\u003eh1\u003c/code\u003e — or any element at all besides \u003ccode\u003eimg\u003c/code\u003e — then the selector doesn’t apply.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003efigure\u003cspan class=\"token pseudo-class\"\u003e:not\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:not\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e flex\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e:has()\u003c/code\u003e is a powerful thing.\u003c/p\u003e\n\u003ch2 id=\"using-has-with-the-child-combinator\"\u003eUsing :has() with the child combinator\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-with-the-child-combinator\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eFirst, a quick review of the difference between the \u003ca href=\"https://www.w3.org/TR/selectors-4/#descendant-combinators\"\u003edescendant combinator\u003c/a\u003e and the \u003ca href=\"https://www.w3.org/TR/selectors-4/#child-combinators\"\u003echild combinator\u003c/a\u003e (\u003ccode\u003e\u003e\u003c/code\u003e).\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003ea\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  ...\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003ea\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token combinator\"\u003e\u003e\u003c/span\u003e img\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  ...\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe first selects any \u003ccode\u003ea\u003c/code\u003e element with an \u003ccode\u003eimg\u003c/code\u003e inside — any place in the HTML structure. While the second selects an element only if the \u003ccode\u003eimg\u003c/code\u003e is a direct child of the \u003ccode\u003ea\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"using-has-with-sibling-combinators\"\u003eUsing :has() with sibling combinators\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-with-sibling-combinators\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eLet’s review the two selectors with sibling relationships. There’s the \u003ca href=\"https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators\"\u003enext-sibling combinator\u003c/a\u003e (\u003ccode\u003e+\u003c/code\u003e) and the \u003ca href=\"https://www.w3.org/TR/selectors-4/#general-sibling-combinators\"\u003esubsequent-sibling combinator\u003c/a\u003e (\u003ccode\u003e~\u003c/code\u003e).\u003c/p\u003e\n\u003cp\u003eThe next-sibling combinator (\u003ccode\u003e+\u003c/code\u003e) selects only the paragraphs that come \u003cem\u003edirectly\u003c/em\u003e after an \u003ccode\u003eh2\u003c/code\u003e element.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003eh2 \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e p\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eHeadline\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eParagraph that is selected by `h2 + p`, because it's directly after `h2`.\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe subsequent-sibling combinator (\u003ccode\u003e~\u003c/code\u003e) selects all paragraphs that come after an \u003ccode\u003eh2\u003c/code\u003e element. They must be siblings, but there can be any number of other HTML elements in between.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003eh2 ~ p\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eHeadline\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eSomething else\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eParagraph that is selected by `h2 ~ p`.\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eThis paragraph is also selected.\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote that both \u003ccode\u003eh2 + p\u003c/code\u003e and \u003ccode\u003eh2 ~ p\u003c/code\u003e select the paragraph elements, and not the \u003ccode\u003eh2\u003c/code\u003e headlines. Like other selectors (think of \u003ccode\u003ea img\u003c/code\u003e), it’s the last element listed that is targeted by the selector. But what if we want to target the \u003ccode\u003eh2\u003c/code\u003e? We can use sibling combinators with \u003ccode\u003e:has().\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eHow often have you wanted to adjust the margins on a headline based on the element following it? Now it’s easy. This code allows us to select any \u003ccode\u003eh2\u003c/code\u003e with a \u003ccode\u003ep\u003c/code\u003e immediately after it.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003eh2\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token combinator\"\u003e+\u003c/span\u003e p\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003emargin-bottom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAmazing.\u003c/p\u003e\n\u003cp\u003eWhat if we want to do this for all six headline elements, without writing out six copies of the selector. We can use \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:is\"\u003e\u003ccode\u003e:is\u003c/code\u003e\u003c/a\u003e to simplify our code.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:is\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eh1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h2\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h3\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h4\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h5\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h6\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token combinator\"\u003e+\u003c/span\u003e p\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003emargin-bottom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr what if we want to write this code for more elements than just paragrapahs? Let’s eliminate the bottom margin of all headlines whenever they are followed by paragraphs, captions, code examples and lists.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:is\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eh1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h2\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h3\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h4\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h5\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h6\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token combinator\"\u003e+\u003c/span\u003e \u003cspan class=\"token pseudo-class\"\u003e:is\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ep\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e figcaption\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e pre\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e dl\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ul\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003emargin-bottom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCombining \u003ccode\u003e:has()\u003c/code\u003e with \u003ca href=\"https://www.w3.org/TR/selectors-4/#descendant-combinators\"\u003edescendant combinators\u003c/a\u003e, \u003ca href=\"https://www.w3.org/TR/selectors-4/#child-combinators\"\u003echild combinators\u003c/a\u003e (\u003ccode\u003e\u003e\u003c/code\u003e), \u003ca href=\"https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators\"\u003enext-sibling combinators\u003c/a\u003e (\u003ccode\u003e+\u003c/code\u003e), and \u003ca href=\"https://www.w3.org/TR/selectors-4/#general-sibling-combinators\"\u003esubsequent-sibling combinators\u003c/a\u003e (\u003ccode\u003e~\u003c/code\u003e) opens up a world of possibilities. But oh, this is \u003cem\u003estill\u003c/em\u003e just the beginning.\u003c/p\u003e\n\u003ch2 id=\"styling-form-states-without-js\"\u003eStyling form states without JS\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#styling-form-states-without-js\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThere are a lot of fantastic \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\"\u003epseudo-classes\u003c/a\u003e that can be used inside has:(). In fact, it revolutionizes what pseudo-classes can do. Previously, pseudo-classes were only used for styling an element based on a special state — or styling one of its children. Now, pseudo-classes can be used to capture state, without JavaScript, and style anything in the DOM based on that state.\u003c/p\u003e\n\u003cp\u003eForm input fields provide a powerful way to capture such a state. Form-specific pseudo-classes include \u003ccode\u003e:autofill\u003c/code\u003e, \u003ccode\u003e:enabled\u003c/code\u003e, \u003ccode\u003e:disabled\u003c/code\u003e, \u003ccode\u003e:read-only\u003c/code\u003e, \u003ccode\u003e:read-write\u003c/code\u003e, \u003ccode\u003e:placeholder-shown\u003c/code\u003e, \u003ccode\u003e:default\u003c/code\u003e, \u003ccode\u003e:checked\u003c/code\u003e, \u003ccode\u003e:indeterminate\u003c/code\u003e, \u003ccode\u003e:valid\u003c/code\u003e, \u003ccode\u003e:invalid\u003c/code\u003e, \u003ccode\u003e:in-range\u003c/code\u003e, \u003ccode\u003e:out-of-range\u003c/code\u003e, \u003ccode\u003e:required\u003c/code\u003e and \u003ccode\u003e:optional\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eLet’s solve one of the use cases I described in the introduction — the long-standing need to style a form label based on the state of the input field. Let’s start with a basic form.\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eform\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eName\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003etext\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esite\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eWebsite\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eurl\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esite\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eemail\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eEmail\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eemail\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eemail\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eform\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI’d like to apply a background to the whole form whenever one of the fields is in focus.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003eform\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:focus-visible\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ebackground\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token color\"\u003eantiquewhite\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow I could have used \u003ccode\u003eform:focus-within\u003c/code\u003e instead, but it would behave like \u003ccode\u003eform:has(:focus)\u003c/code\u003e. The \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:focus\"\u003e\u003ccode\u003e:focus\u003c/code\u003e\u003c/a\u003e pseudo-class always applies CSS whenever a field is in focus. The \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible\"\u003e\u003ccode\u003e:focus-visible\u003c/code\u003e\u003c/a\u003e pseudo-class provides a reliable way to style a focus indicator only when the browser would draw one natively, using the same \u003ca href=\"https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/\"\u003ecomplex heuristics the browser uses\u003c/a\u003e to determine whether or not to apply a focus-ring.\u003c/p\u003e\n\u003cp\u003eNow, let’s imagine I want to style the other fields, the ones \u003cem\u003enot\u003c/em\u003e in focus — changing their label text color and the input border color. Before \u003ccode\u003e:has()\u003c/code\u003e, this required JavaScript. Now we can use this CSS.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003eform\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:focus-visible\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e div\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einput\u003cspan class=\"token pseudo-class\"\u003e:not\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:focus-visible\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e label\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ecolor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token color\"\u003eperu\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token selector\"\u003eform\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:focus-visible\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e div\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einput\u003cspan class=\"token pseudo-class\"\u003e:not\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:focus-visible\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e input\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eborder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e solid \u003cspan class=\"token color\"\u003eperu\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat does that selector say? If one of the controls inside this form has focus, and the input element for this particular form control does not have focus, then change the color of this label’s text to \u003ccode\u003eperu\u003c/code\u003e. And change the border of the input field to be \u003ccode\u003e2px solid peru\u003c/code\u003e.\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003einput\u003cspan class=\"token pseudo-class\"\u003e:invalid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eoutline\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e solid \u003cspan class=\"token color\"\u003ered\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eborder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token unit\"\u003epx\u003c/span\u003e solid \u003cspan class=\"token color\"\u003ered\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow with \u003ccode\u003e:has()\u003c/code\u003e, we can turn the label text red as well:\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003ediv\u003cspan class=\"token pseudo-class\"\u003e:has\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einput\u003cspan class=\"token pseudo-class\"\u003e:invalid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e label\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ecolor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token color\"\u003ered\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can see the result by typing something in the website or email field that’s not a fully-formed URL or email address. Both are invalid, and so both will trigger a red border and red label, with an “X”.\u003c/p\u003e\n\u003ch2 id=\"and-more\"\u003eAnd more\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#and-more\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eLooking through other \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\"\u003epseudo-classes\u003c/a\u003e, there are so many that can be combined with \u003ccode\u003e:has()\u003c/code\u003e. Imagine the possibilities with \u003ccode\u003e:nth-child\u003c/code\u003e, \u003ccode\u003e:nth-last-child\u003c/code\u003e, \u003ccode\u003e:first-child\u003c/code\u003e, \u003ccode\u003e:last-child\u003c/code\u003e, \u003ccode\u003e:only-child\u003c/code\u003e, \u003ccode\u003e:nth-of-type\u003c/code\u003e, \u003ccode\u003e:nth-last-of-type\u003c/code\u003e, \u003ccode\u003e:first-of-type\u003c/code\u003e, \u003ccode\u003e:last-of-type\u003c/code\u003e, \u003ccode\u003e:only-of-type\u003c/code\u003e. The brand new \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:modal\"\u003e\u003ccode\u003e:modal\u003c/code\u003e\u003c/a\u003e pseudo-class is triggered when a \u003ccode\u003edialog\u003c/code\u003e is in the open state. With \u003ccode\u003e:has(:modal)\u003c/code\u003e you can style anything in the DOM based on whether the \u003ccode\u003edialog\u003c/code\u003e is open or closed.\u003c/p\u003e\n\u003cp\u003eHowever, not every pseudo-class is currently supported inside \u003ccode\u003e:has()\u003c/code\u003e in every browser, so do try out your code in multiple browsers. Currently the dynamic media pseudo-classes don’t work — like \u003ccode\u003e:playing\u003c/code\u003e, \u003ccode\u003e:paused\u003c/code\u003e, \u003ccode\u003e:muted\u003c/code\u003e, etc. They very well may work in the future, so if you are reading this in the future, test them out! Also, form invalidation support is currently missing in certain specific situations, so dynamic state changes to those pseudo-classes may not update with \u003ccode\u003e:has()\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eSafari 16 will add support for \u003ccode\u003e:has(:target)\u003c/code\u003e opening up interesting possibilities for writing code that looks at the current URL for a fragment that matches the ID of a specific element. For example, if a user clicks on a table of contents at the top of a document, and jumps down to the section of the page matching that link, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:target\"\u003e\u003ccode\u003e:target\u003c/code\u003e\u003c/a\u003e provides a way to style that content uniquely, based on the fact the user clicked the link to get there. And \u003ccode\u003e:has()\u003c/code\u003e opens up what such styling can do.\u003c/p\u003e\n\u003cp\u003eSomething to note — the CSS Working Group \u003ca href=\"https://github.com/w3c/csswg-drafts/issues/7463\"\u003eresolved\u003c/a\u003e to disallow all existing pseudo-elements inside of \u003ccode\u003e:has()\u003c/code\u003e. For example, \u003ccode\u003earticle:has(p::first-line)\u003c/code\u003e and \u003ccode\u003eol:has(li::marker)\u003c/code\u003e won’t work. Same with \u003ccode\u003e::before\u003c/code\u003e and \u003ccode\u003e::after.\u003c/code\u003e\u003c/p\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1766965759366,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a724de3efd251cf89fe82a5860d9008b","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":43,"column":5,"offset":2710},"end":{"line":43,"column":29,"offset":2734},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2026.articles","alias":"What I read in 2026","position":{"start":{"line":72,"column":3,"offset":4440},"end":{"line":72,"column":45,"offset":4482},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2026.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2025.articles","alias":"2025","position":{"start":{"line":73,"column":5,"offset":4487},"end":{"line":73,"column":32,"offset":4514},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2025.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2024.articles","alias":"2024","position":{"start":{"line":74,"column":5,"offset":4519},"end":{"line":74,"column":32,"offset":4546},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2024.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2023.articles","alias":"2023","position":{"start":{"line":75,"column":5,"offset":4551},"end":{"line":75,"column":32,"offset":4578},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2023.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"read.2022.articles","alias":"2022","position":{"start":{"line":76,"column":5,"offset":4583},"end":{"line":76,"column":32,"offset":4610},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"read.2022.articles"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":82,"column":3,"offset":4746},"end":{"line":82,"column":39,"offset":4782},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":76,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","o7xruzrah5wzqetottecss7","z1zo2mp6ddji5p317i4x9xw","v06c2tjelh341x4resa50fh","0yqesk4rcffwgyuab5x8rfa","sy2vkbtyu671chkvgn1yt8j","ufixpmxoydiccoh59kphrib","alswadkx4wb05y1z9iwfzfv","1daut9dpw70xd0zh5a7j5p4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 현실은 인간의 연산으로 완전히 파악할 수 없는 복잡계. 주어진 상황과 능력으로 할 수 있는 최선의 적응은 단순함과 꾸준함.\n\n  - 파산을 면하는 선에서 여러가지를 해보고 자신에게 맞는 걸 위주로 꾸준히. 그를 위해 단순, 편안, 쾌적함이 필요.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2026|read.2026.articles]]\n  - [[2025|read.2025.articles]]\n  - [[2024|read.2024.articles]]\n  - [[2023|read.2023.articles]]\n  - [[2022|read.2022.articles]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"8w5mxswu48wwne2lisingsc"},"buildId":"wirstT2ztC8OQsbzKjhvw","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>