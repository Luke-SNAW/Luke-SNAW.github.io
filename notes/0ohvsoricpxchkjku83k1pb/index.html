<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Exploring Declarative Shadow DOM</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Exploring Declarative Shadow DOM"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://luke-snaw.github.io//notes/0ohvsoricpxchkjku83k1pb/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="11/27/2022"/><meta property="article:modified_time" content="11/27/2022"/><link rel="canonical" href="https://luke-snaw.github.io//notes/0ohvsoricpxchkjku83k1pb/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d8e0603730b15a3.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_buildManifest.js" defer=""></script><script src="/_next/static/vOE8u-mg___OsOsz4tjEg/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="exploring-declarative-shadow-dom">Exploring Declarative Shadow DOM<a aria-hidden="true" class="anchor-heading icon-link" href="#exploring-declarative-shadow-dom"></a></h1>
<blockquote>
<p><a href="https://www.wiktorwisniewski.dev/blog/exploring-declarative-shadow-dom">https://www.wiktorwisniewski.dev/blog/exploring-declarative-shadow-dom</a></p>
</blockquote>
<p>Shadow DOM is part of Web Component feature, that allows to completely isolate separate DOM tree (shadow tree) and its CSS from the rest of the document. The benefit of that is performance because we are running code that is closer to the native API rather than framework abstraction layer. The second benefit is portability of the given component across multiple projects - even these that use frameworks like React / Angular / Vue under the hood. Side note: it's not supported out of the box. Check <a href="https://custom-elements-everywhere.com/">Custom Elements Everywhere</a> for more details. Simply write once, reuse everywhere or safely distribute your component to third party pages, without worrying about speed.</p>
<p>Here's the most basic example:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> specialDiv <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">"shadow-element"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> shadow <span class="token operator">=</span> specialDiv<span class="token punctuation">.</span><span class="token method function property-access">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">"open"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> divElement <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>

divElement<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">"Paragraph contents"</span>

shadow<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>divElement<span class="token punctuation">)</span>
</code></pre>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shadow-element<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<p>will become:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shadow-element<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  #shadow-root (open)
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Paragraph contents<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<h2 id="pitfalls">Pitfalls<a aria-hidden="true" class="anchor-heading icon-link" href="#pitfalls"></a></h2>
<p>There are drawbacks that one needs to keep in mind when planning the use of web components:</p>
<ul>
<li>Doesn't work in JavaScript-less environments. JS is mandatory even if your component's logic doesn't require it.</li>
<li>Web Components usually are deferred, which means they will be causing Content Layout Shift</li>
<li>Rendering ShadowDOM on server is not possible because there are no declarative primitives for it*</li>
</ul>
<p>I want to emphasize here that the lack of support for server environments is a big issue. If you are a front-end developer you are probably aware of the (well justified) hype around Server Side Rendering. If you can't use your component on the server, the natural choice is to go with react-like components and not worry about limited use cases. What's the benefit of using components if you can use it only in some projects?</p>
<h2 id="why-web-components-do-not-work-well-in-server-environment">Why Web Components do not work well in server environment?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-web-components-do-not-work-well-in-server-environment"></a></h2>
<p>Quick explanation on what is Server Side Rendering:</p>
<p><em>On each request server is "rendering" HTML and serves it to a client with minimal JavaScript necessery for given document (based on that request). Well in fact it just prepares HTML string. On website load hydration happens and the page is fully interactive (lot's of buzzwords for good old-school style webdev).</em></p>
<p>Now, the problem is, shadow root is highly dependent on browser environment and javascript initialization. We can't use <code>.attachShadow({mode: 'open' })</code> on the server and we can't write shadowDom declaritively as HTML string. For some APIs you just need a browser. In theory you could spin up a browser instance for build purposes but this strategy has plenty of downsides.</p>
<h2 id="declarative-shadowdom-to-the-rescue">Declarative ShadowDOM to the rescue!<a aria-hidden="true" class="anchor-heading icon-link" href="#declarative-shadowdom-to-the-rescue"></a></h2>
<p>It's a game changer not only because it challenges all server environment related problems. Declarative Shadow DOM addresses CLS issue as well and finally - we can benefit from ShadowDOM encapsulation without writing a single line of JavaScript. This is what I have used for my experiments:</p>
<p>🚀 Click Me<a href="https://gist.github.com/wisniewski94/d28c1e8905c44b8b131c3bc472891e55">Source code at GitHub Gist</a></p>
<p>The above example is quite easy to accomplish. The overall idea is to have a confetti button that stands as alternative to regular button element. I did not focus on forms and a11y this time as this article tries to aim for DSD only.</p>
<h3 id="html-markup">HTML Markup<a aria-hidden="true" class="anchor-heading icon-link" href="#html-markup"></a></h3>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>confetti-button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span> <span class="token attr-name">shadowroot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>open<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
      ...<span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>slot</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confetti<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>canvas</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
  🚀 Click Me
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>confetti-button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">class</span> <span class="token class-name">ConfettiButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
  <span class="token punctuation">}</span>

  customElements<span class="token punctuation">.</span><span class="token method function property-access">define</span><span class="token punctuation">(</span><span class="token string">'confetti-button'</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ConfettiButton</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>Here we have a <code>confetti-button</code> custom element that wraps a template with shadowroot="open". That template is transfered into shadow dom when HTML parser finds it. We also have a canvas element that is used to draw confetti particles. The canvas element is positioned absolutely and covers the button element but using some css magic you can click through it. This way, the button element feels to be on top of the canvas element.</p>
<p>Button can be disabled as well by adding "disabled" property to it:</p>
<p>🚀 Click Me</p>
<h3 id="styling-custom-elements">Styling custom elements<a aria-hidden="true" class="anchor-heading icon-link" href="#styling-custom-elements"></a></h3>
<p>Just a brief example of most interesting parts:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
<span class="token selector"><span class="token pseudo-class">:host</span><span class="token punctuation">(</span><span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token attribute"><span class="token punctuation">[</span><span class="token attr-name">disabled</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> button<span class="token pseudo-class">:hover</span></span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
<span class="token selector"><span class="token pseudo-class">:host</span><span class="token punctuation">(</span><span class="token pseudo-class">:active</span><span class="token punctuation">)</span> button<span class="token pseudo-class">:active</span><span class="token punctuation">,</span> <span class="token pseudo-class">:host</span><span class="token punctuation">(</span><span class="token attribute"><span class="token punctuation">[</span><span class="token attr-name">disabled</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> button</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>

<span class="token selector"><span class="token pseudo-class">:host</span><span class="token punctuation">(</span><span class="token attribute"><span class="token punctuation">[</span><span class="token attr-name">disabled</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> button</span> <span class="token punctuation">{</span>
  ...
  <span class="token property">cursor</span><span class="token punctuation">:</span> not-allowed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">canvas</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">-50</span><span class="token unit">%</span><span class="token punctuation">,</span> <span class="token number">-50</span><span class="token unit">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Template contains style tag with css that is used to style the button element. Note that I am placing large style tag inside web component on purpose. If I included it as a separate file, on slow connection I would risk getting FOUC or CLS. For more advanced styling that could be not the best approach as it comes at cost of larger HTML file, which takes more time to load.</p>
<p>The rule that I find the most interesting is <code>pointer-events: none;</code> because it makes clicking through canvas possible. Also you might notice that I'm using <code>:host([disabled])</code> selector instead of <code>:host(:disabled)</code>. The second one didn't work.</p>
<h3 id="js-in-dsd---interesting-parts">JS in DSD - interesting parts<a aria-hidden="true" class="anchor-heading icon-link" href="#js-in-dsd---interesting-parts"></a></h3>
<p>What's more important are gotchas that eventually you might encounter when working with Custom Elements. There are plenty of them but in terms of DSD, the one that took me quite a while to get over was accessing the shadowRoot. The "bug" that I was struggling with was trying to query shadowRoot inside constructor call:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ConfettiButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// DON'T DO THIS, shadowRoot probably is not available yet</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">button</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">shadowRoot</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>At the point of writing this component I was dead sure that you can do such things in constructor. If you can attach shadowRoot then why not access it, if it was created by DOM parser already, right? Well turns out this is not how it works. The constructor should be used to set up initial state, default values, event listeners and possibly a shadow root. What I have tried to accomplish here was fundamentally wrong and should be deferred to connectedCallback method according to <a href="https://html.spec.whatwg.org/#custom-element-conformance">Custom Elements Comformance</a>.</p>
<p>Another good point to make is that this custom element depends on its contents (template) so if you do:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> myElement <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">"confetti-button"</span><span class="token punctuation">)</span>
myElement<span class="token punctuation">.</span><span class="token method function property-access">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">"open"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span>myElement<span class="token punctuation">)</span>
</code></pre>
<p>Then you will get an error because we are not using template that this custom element needs. It violates the rule of not using dependent elements. You won't be able to <strong>imperatively</strong> create a custom element that way. We could argue, that if you want to use regular element many times, you simply define it multiple times, but you might get a feeling that with element of this size and complexity we are heading in wrong direction. There is a way to store the element for the later use:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chunk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>confetti-button</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>confetti-button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">.</span><span class="token method function property-access">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>What if you can't use a template? This is where getInnerHTML() method comes in handy. It works similarly to innerHTML property but it returns a string that contains template with open shadowRoot</p>
<h2 id="maybe-you-dont-need-declarative-shadow-dom-at-all">Maybe you don't need Declarative Shadow DOM at all?<a aria-hidden="true" class="anchor-heading icon-link" href="#maybe-you-dont-need-declarative-shadow-dom-at-all"></a></h2>
<p>This is a great feature to use and understand but maybe it's not a must-have solution for you right now. Personally I consider it an interesting feature - a subset of great technologies yet to come. Questions and things to consider are:</p>
<ol>
<li>Is your custom component visible above the fold?</li>
<li>If the nature of your component is interactive (e.g. datepicker) then SEO shouldn't be a concern.</li>
<li>For a small websites and high connection speeds the FOUC &#x26; CLS issue is not as visible as it is in slow devices and large projects.</li>
<li>You can still have a fallback in the light dom. That should work if component doesn't consume too much CSS.</li>
</ol>
<p>Declarative Shadow DOM is available since Chrome 90 and Edge 91 (both running on Chromium so it counts as one). The great news is <a href="https://github.com/WebKit/WebKit/pull/4693">Safari is prototyping.</a> Assuming Mozilla is interested in declarative solutions, it means we are closer to get DSD on all major browsers 👀...</p>
<p>WebComponents are improving over time thus solving current issues and bringing the perspective of landing newer frameworks and applications. There are already great frameworks built on top of WebComponents that will benefit from this implementation as well (e.g. StencilJS, Lit). Declarative Shadow DOM will finally solve the issue of Server Side Rendering and Web Components. It's one more step towards better specification!</p>
<p>References:</p>
<ol>
<li><a href="https://html.spec.whatwg.org/#custom-element-conformance">https://html.spec.whatwg.org/#custom-element-conformance</a></li>
<li><a href="https://github.com/whatwg/dom/issues/831">https://github.com/whatwg/dom/issues/831</a></li>
<li><a href="https://github.com/mfreed7/declarative-shadow-dom/blob/master/README.md">https://github.com/mfreed7/declarative-shadow-dom/blob/master/README.md</a></li>
<li><a href="https://web.dev/declarative-shadow-dom/">https://web.dev/declarative-shadow-dom/</a></li>
</ol></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pitfalls" title="Pitfalls">Pitfalls</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-web-components-do-not-work-well-in-server-environment" title="Why Web Components do not work well in server environment?">Why Web Components do not work well in server environment?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#declarative-shadowdom-to-the-rescue" title="Declarative ShadowDOM to the rescue!">Declarative ShadowDOM to the rescue!</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#html-markup" title="HTML Markup">HTML Markup</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#styling-custom-elements" title="Styling custom elements">Styling custom elements</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#js-in-dsd---interesting-parts" title="JS in DSD - interesting parts">JS in DSD - interesting parts</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#maybe-you-dont-need-declarative-shadow-dom-at-all" title="Maybe you don&#x27;t need Declarative Shadow DOM at all?">Maybe you don&#x27;t need Declarative Shadow DOM at all?</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"0ohvsoricpxchkjku83k1pb","title":"Exploring Declarative Shadow DOM","desc":"","updated":1669533912340,"created":1669533763271,"custom":{},"fname":"dev.web.exploring-declarative-shadow-dom","type":"note","vault":{"fsPath":"vault"},"contentHash":"3e9c879268c750b4d0ba84323de5f957","links":[],"anchors":{"pitfalls":{"type":"header","text":"Pitfalls","value":"pitfalls","line":37,"column":0,"depth":2},"why-web-components-do-not-work-well-in-server-environment":{"type":"header","text":"Why Web Components do not work well in server environment?","value":"why-web-components-do-not-work-well-in-server-environment","line":47,"column":0,"depth":2},"declarative-shadowdom-to-the-rescue":{"type":"header","text":"Declarative ShadowDOM to the rescue!","value":"declarative-shadowdom-to-the-rescue","line":55,"column":0,"depth":2},"html-markup":{"type":"header","text":"HTML Markup","value":"html-markup","line":63,"column":0,"depth":3},"styling-custom-elements":{"type":"header","text":"Styling custom elements","value":"styling-custom-elements","line":93,"column":0,"depth":3},"js-in-dsd---interesting-parts":{"type":"header","text":"JS in DSD - interesting parts","value":"js-in-dsd---interesting-parts","line":120,"column":0,"depth":3},"maybe-you-dont-need-declarative-shadow-dom-at-all":{"type":"header","text":"Maybe you don't need Declarative Shadow DOM at all?","value":"maybe-you-dont-need-declarative-shadow-dom-at-all","line":159,"column":0,"depth":2}},"children":[],"parent":"e2owgssw5t9oo46vsvwsu3f","data":{}},"body":"\u003ch1 id=\"exploring-declarative-shadow-dom\"\u003eExploring Declarative Shadow DOM\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#exploring-declarative-shadow-dom\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.wiktorwisniewski.dev/blog/exploring-declarative-shadow-dom\"\u003ehttps://www.wiktorwisniewski.dev/blog/exploring-declarative-shadow-dom\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eShadow DOM is part of Web Component feature, that allows to completely isolate separate DOM tree (shadow tree) and its CSS from the rest of the document. The benefit of that is performance because we are running code that is closer to the native API rather than framework abstraction layer. The second benefit is portability of the given component across multiple projects - even these that use frameworks like React / Angular / Vue under the hood. Side note: it's not supported out of the box. Check \u003ca href=\"https://custom-elements-everywhere.com/\"\u003eCustom Elements Everywhere\u003c/a\u003e for more details. Simply write once, reuse everywhere or safely distribute your component to third party pages, without worrying about speed.\u003c/p\u003e\n\u003cp\u003eHere's the most basic example:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e specialDiv \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"shadow-element\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e shadow \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e specialDiv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eattachShadow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e mode\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"open\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e divElement \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"p\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\ndivElement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einnerHTML\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Paragraph contents\"\u003c/span\u003e\n\nshadow\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eappendChild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edivElement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eshadow-element\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewill become:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eshadow-element\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  #shadow-root (open)\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eParagraph contents\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"pitfalls\"\u003ePitfalls\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#pitfalls\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThere are drawbacks that one needs to keep in mind when planning the use of web components:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDoesn't work in JavaScript-less environments. JS is mandatory even if your component's logic doesn't require it.\u003c/li\u003e\n\u003cli\u003eWeb Components usually are deferred, which means they will be causing Content Layout Shift\u003c/li\u003e\n\u003cli\u003eRendering ShadowDOM on server is not possible because there are no declarative primitives for it*\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI want to emphasize here that the lack of support for server environments is a big issue. If you are a front-end developer you are probably aware of the (well justified) hype around Server Side Rendering. If you can't use your component on the server, the natural choice is to go with react-like components and not worry about limited use cases. What's the benefit of using components if you can use it only in some projects?\u003c/p\u003e\n\u003ch2 id=\"why-web-components-do-not-work-well-in-server-environment\"\u003eWhy Web Components do not work well in server environment?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-web-components-do-not-work-well-in-server-environment\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eQuick explanation on what is Server Side Rendering:\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eOn each request server is \"rendering\" HTML and serves it to a client with minimal JavaScript necessery for given document (based on that request). Well in fact it just prepares HTML string. On website load hydration happens and the page is fully interactive (lot's of buzzwords for good old-school style webdev).\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNow, the problem is, shadow root is highly dependent on browser environment and javascript initialization. We can't use \u003ccode\u003e.attachShadow({mode: 'open' })\u003c/code\u003e on the server and we can't write shadowDom declaritively as HTML string. For some APIs you just need a browser. In theory you could spin up a browser instance for build purposes but this strategy has plenty of downsides.\u003c/p\u003e\n\u003ch2 id=\"declarative-shadowdom-to-the-rescue\"\u003eDeclarative ShadowDOM to the rescue!\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#declarative-shadowdom-to-the-rescue\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIt's a game changer not only because it challenges all server environment related problems. Declarative Shadow DOM addresses CLS issue as well and finally - we can benefit from ShadowDOM encapsulation without writing a single line of JavaScript. This is what I have used for my experiments:\u003c/p\u003e\n\u003cp\u003e🚀 Click Me\u003ca href=\"https://gist.github.com/wisniewski94/d28c1e8905c44b8b131c3bc472891e55\"\u003eSource code at GitHub Gist\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe above example is quite easy to accomplish. The overall idea is to have a confetti button that stands as alternative to regular button element. I did not focus on forms and a11y this time as this article tries to aim for DSD only.\u003c/p\u003e\n\u003ch3 id=\"html-markup\"\u003eHTML Markup\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#html-markup\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003econfetti-button\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003etemplate\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eshadowroot\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eopen\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003estyle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token style\"\u003e\u003cspan class=\"token language-css\"\u003e\n      ...\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003estyle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ebutton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n      \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eslot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eslot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ebutton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ecanvas\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003econfetti\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ecanvas\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003etemplate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  🚀 Click Me\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003econfetti-button\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003cspan class=\"token language-javascript\"\u003e\n  \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConfettiButton\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHTMLElement\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  customElements\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edefine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'confetti-button'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eConfettiButton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we have a \u003ccode\u003econfetti-button\u003c/code\u003e custom element that wraps a template with shadowroot=\"open\". That template is transfered into shadow dom when HTML parser finds it. We also have a canvas element that is used to draw confetti particles. The canvas element is positioned absolutely and covers the button element but using some css magic you can click through it. This way, the button element feels to be on top of the canvas element.\u003c/p\u003e\n\u003cp\u003eButton can be disabled as well by adding \"disabled\" property to it:\u003c/p\u003e\n\u003cp\u003e🚀 Click Me\u003c/p\u003e\n\u003ch3 id=\"styling-custom-elements\"\u003eStyling custom elements\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#styling-custom-elements\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eJust a brief example of most interesting parts:\u003c/p\u003e\n\u003cpre class=\"language-css\"\u003e\u003ccode class=\"language-css\"\u003e\u003cspan class=\"token selector\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ... \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:not\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003edisabled\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e button\u003cspan class=\"token pseudo-class\"\u003e:hover\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ... \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:active\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e button\u003cspan class=\"token pseudo-class\"\u003e:active\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token pseudo-class\"\u003e:host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003edisabled\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e button\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ... \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token pseudo-class\"\u003e:host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003edisabled\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e button\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  ...\n  \u003cspan class=\"token property\"\u003ecursor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e not-allowed\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003ecanvas\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eposition\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e absolute\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003etop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e50\u003c/span\u003e\u003cspan class=\"token unit\"\u003e%\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eleft\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e50\u003c/span\u003e\u003cspan class=\"token unit\"\u003e%\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003etransform\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003etranslate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e-50\u003c/span\u003e\u003cspan class=\"token unit\"\u003e%\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e-50\u003c/span\u003e\u003cspan class=\"token unit\"\u003e%\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003epointer-events\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTemplate contains style tag with css that is used to style the button element. Note that I am placing large style tag inside web component on purpose. If I included it as a separate file, on slow connection I would risk getting FOUC or CLS. For more advanced styling that could be not the best approach as it comes at cost of larger HTML file, which takes more time to load.\u003c/p\u003e\n\u003cp\u003eThe rule that I find the most interesting is \u003ccode\u003epointer-events: none;\u003c/code\u003e because it makes clicking through canvas possible. Also you might notice that I'm using \u003ccode\u003e:host([disabled])\u003c/code\u003e selector instead of \u003ccode\u003e:host(:disabled)\u003c/code\u003e. The second one didn't work.\u003c/p\u003e\n\u003ch3 id=\"js-in-dsd---interesting-parts\"\u003eJS in DSD - interesting parts\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#js-in-dsd---interesting-parts\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWhat's more important are gotchas that eventually you might encounter when working with Custom Elements. There are plenty of them but in terms of DSD, the one that took me quite a while to get over was accessing the shadowRoot. The \"bug\" that I was struggling with was trying to query shadowRoot inside constructor call:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConfettiButton\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHTMLElement\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003econstructor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003esuper\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// DON'T DO THIS, shadowRoot probably is not available yet\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eshadowRoot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003equerySelector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'button'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAt the point of writing this component I was dead sure that you can do such things in constructor. If you can attach shadowRoot then why not access it, if it was created by DOM parser already, right? Well turns out this is not how it works. The constructor should be used to set up initial state, default values, event listeners and possibly a shadow root. What I have tried to accomplish here was fundamentally wrong and should be deferred to connectedCallback method according to \u003ca href=\"https://html.spec.whatwg.org/#custom-element-conformance\"\u003eCustom Elements Comformance\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eAnother good point to make is that this custom element depends on its contents (template) so if you do:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e myElement \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"confetti-button\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nmyElement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eattachShadow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e mode\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"open\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emyElement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen you will get an error because we are not using template that this custom element needs. It violates the rule of not using dependent elements. You won't be able to \u003cstrong\u003eimperatively\u003c/strong\u003e create a custom element that way. We could argue, that if you want to use regular element many times, you simply define it multiple times, but you might get a feeling that with element of this size and complexity we are heading in wrong direction. There is a way to store the element for the later use:\u003c/p\u003e\n\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003etemplate\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003echunk\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003econfetti-button\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e...\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003econfetti-button\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003etemplate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token script\"\u003e\u003cspan class=\"token language-javascript\"\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eappendChild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003echunk\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecloneNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat if you can't use a template? This is where getInnerHTML() method comes in handy. It works similarly to innerHTML property but it returns a string that contains template with open shadowRoot\u003c/p\u003e\n\u003ch2 id=\"maybe-you-dont-need-declarative-shadow-dom-at-all\"\u003eMaybe you don't need Declarative Shadow DOM at all?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#maybe-you-dont-need-declarative-shadow-dom-at-all\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThis is a great feature to use and understand but maybe it's not a must-have solution for you right now. Personally I consider it an interesting feature - a subset of great technologies yet to come. Questions and things to consider are:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIs your custom component visible above the fold?\u003c/li\u003e\n\u003cli\u003eIf the nature of your component is interactive (e.g. datepicker) then SEO shouldn't be a concern.\u003c/li\u003e\n\u003cli\u003eFor a small websites and high connection speeds the FOUC \u0026#x26; CLS issue is not as visible as it is in slow devices and large projects.\u003c/li\u003e\n\u003cli\u003eYou can still have a fallback in the light dom. That should work if component doesn't consume too much CSS.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eDeclarative Shadow DOM is available since Chrome 90 and Edge 91 (both running on Chromium so it counts as one). The great news is \u003ca href=\"https://github.com/WebKit/WebKit/pull/4693\"\u003eSafari is prototyping.\u003c/a\u003e Assuming Mozilla is interested in declarative solutions, it means we are closer to get DSD on all major browsers 👀...\u003c/p\u003e\n\u003cp\u003eWebComponents are improving over time thus solving current issues and bringing the perspective of landing newer frameworks and applications. There are already great frameworks built on top of WebComponents that will benefit from this implementation as well (e.g. StencilJS, Lit). Declarative Shadow DOM will finally solve the issue of Server Side Rendering and Web Components. It's one more step towards better specification!\u003c/p\u003e\n\u003cp\u003eReferences:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://html.spec.whatwg.org/#custom-element-conformance\"\u003ehttps://html.spec.whatwg.org/#custom-element-conformance\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/whatwg/dom/issues/831\"\u003ehttps://github.com/whatwg/dom/issues/831\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/mfreed7/declarative-shadow-dom/blob/master/README.md\"\u003ehttps://github.com/mfreed7/declarative-shadow-dom/blob/master/README.md\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://web.dev/declarative-shadow-dom/\"\u003ehttps://web.dev/declarative-shadow-dom/\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -\u003e 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -\u003e easy fun -\u003e art -\u003e profit?\n\n\u003e I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n\u003e We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n\u003e Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n\u003e [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n\u003e\n\u003e Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n\u003e Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n\u003e A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n\u003e “Motivation often comes after starting, not before. Action produces momentum.”\n\u003e [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n\u003e\n\u003e - James Clear\n\n\u003e Focus is more about **not** keeping busy when you need to wait for something.  \n\u003e Eat the boredom for a minute.\n\u003e\n\u003e - [[life-tips#wodenokoto]]\n\n\u003e [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n\u003e\n\u003e - https://www.ntnu.edu/cerg/advice\n\u003e - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n\u003e [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n\u003e\n\u003e - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n\u003e 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n\u003e\n\u003e 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n\u003e\n\u003e - 막막한 독서. 시로군. P.10~13\n\n\u003e I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n\u003e My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n\u003e Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"0ohvsoricpxchkjku83k1pb"},"buildId":"vOE8u-mg___OsOsz4tjEg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>