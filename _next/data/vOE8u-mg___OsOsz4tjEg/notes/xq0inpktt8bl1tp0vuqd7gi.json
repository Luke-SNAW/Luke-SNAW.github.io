{"pageProps":{"note":{"id":"xq0inpktt8bl1tp0vuqd7gi","title":"How Does Dan Abramov Optimize beta.reactjs.org After Be Complained about Website Speed?","desc":"","updated":1655855318894,"created":1655855263863,"custom":{},"fname":"dev.web.performance.How Does Dan Abramov Optimize beta site After Be Complained about Website Speed","type":"note","vault":{"fsPath":"vault"},"contentHash":"91334ec9e4618ea09322f75f9d0ce95a","links":[],"anchors":{"react-docs-beta":{"type":"header","text":"React Docs Beta","value":"react-docs-beta","line":16,"column":0,"depth":2},"we-are-rewriting-the-react-documentation-with-a-few-differences-all-explanations-are-written-using-hooks-rather-than":{"type":"header","text":"We are rewriting the React documentation with a few differences: All explanations are written using Hooks rather than‚Ä¶","value":"we-are-rewriting-the-react-documentation-with-a-few-differences-all-explanations-are-written-using-hooks-rather-than","line":18,"column":0,"depth":3},"website-optimization":{"type":"header","text":"Website Optimization","value":"website-optimization","line":44,"column":0,"depth":1},"only-import-code-you-truly-need":{"type":"header","text":"Only import code you truly need","value":"only-import-code-you-truly-need","line":53,"column":0,"depth":2},"build-for-modern-browsers":{"type":"header","text":"Build for modern browsers","value":"build-for-modern-browsers","line":61,"column":0,"depth":2},"lazy-loading-of-non-essential-resources":{"type":"header","text":"Lazy loading of non-essential resources","value":"lazy-loading-of-non-essential-resources","line":77,"column":0,"depth":2},"result":{"type":"header","text":"Result","value":"result","line":85,"column":0,"depth":1}},"children":[],"parent":"pa1bstln0xt54o30z6taebc","data":{}},"body":"<h1 id=\"how-does-dan-abramov-optimize-betareactjsorg-after-be-complained-about-website-speed\">How Does Dan Abramov Optimize beta.reactjs.org After Be Complained about Website Speed?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-does-dan-abramov-optimize-betareactjsorg-after-be-complained-about-website-speed\"></a></h1>\n<p>An interesting thing happened in the open-source community a few days ago, it was about React maintainer Dan Abramov and Vue creator Evan You.</p>\n<p>With the official release of React18, the React team has also created a new documentation website.</p>\n<p>[</p>\n<h2 id=\"react-docs-beta\">React Docs Beta<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#react-docs-beta\"></a></h2>\n<h3 id=\"we-are-rewriting-the-react-documentation-with-a-few-differences-all-explanations-are-written-using-hooks-rather-than\">We are rewriting the React documentation with a few differences: All explanations are written using Hooks rather than‚Ä¶<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#we-are-rewriting-the-react-documentation-with-a-few-differences-all-explanations-are-written-using-hooks-rather-than\"></a></h3>\n<p>beta.reactjs.org</p>\n<p>](<a href=\"https://beta.reactjs.org/\">https://beta.reactjs.org/</a>)</p>\n<p>Then there are users who say that the user experience of the new website is great:</p>\n<p>But Evan You expressed a different opinion. After performing performance tests, Evan believes that Vue‚Äôs official website performs better than React.</p>\n<p><img src=\"https://miro.medium.com/max/946/1*54qqOPTYoXnoVmOIHyEuWQ.jpeg\"></p>\n<p><img src=\"https://miro.medium.com/max/946/1*9GNaZxVxu598RiVhVfPq9Q.jpeg\"></p>\n<p>‚ÜêReact vs Vue‚Üí</p>\n<p>Then Dan responded: it is only a beta website.</p>\n<p>Well, although Dan didn‚Äôt refute much in his mouth, he showed his importance to this matter with practical actions. After all, this is a question from Evan üòè üòè. React and Vue has been vying for the honor of being the best front-end framework for years.</p>\n<p>In the next 3 days, Dan submitted many commits in a row and optimized the new website from various aspects.</p>\n<p><img src=\"https://miro.medium.com/max/700/1*O9sN6c5nAgMnxRMoW6LiWg.png\"></p>\n<p>Here let us learn how to improve the performance of a website from Dan‚Äôs commits.</p>\n<h1 id=\"website-optimization\">Website Optimization<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#website-optimization\"></a></h1>\n<p>There are two main aspects of Dan‚Äôs optimization:</p>\n<ul>\n<li>In the compilation, reduce the size of the packaged code.</li>\n<li>In the runtime, lazy-load if the code is not necessary for the First Contentful Paint(FCP).</li>\n</ul>\n<blockquote>\n<p>The First Contentful Paint (FCP) metric measures the time from when the page starts loading to when any part of the page‚Äôs content is rendered on the screen. For this metric, ‚Äúcontent‚Äù refers to text, images (including background images), <code>&#x3C;svg></code> elements, or non-white <code>&#x3C;canvas></code> elements.</p>\n</blockquote>\n<h2 id=\"only-import-code-you-truly-need\">Only import code you truly need<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#only-import-code-you-truly-need\"></a></h2>\n<p>The previous code would import a file called <code>utils</code>. But not every function in <code>utils</code> will be used in the FCP, so Dan decided to split this file into different files and import them as needed, which can reduce the size of the bundle file.</p>\n<p><img src=\"https://miro.medium.com/max/700/1*7rn6x_u83IjlT4CU7pqutA.png\"></p>\n<p><img src=\"https://miro.medium.com/max/700/1*JYu2SgDq9oIvodJRAIdhdQ.png\"></p>\n<h2 id=\"build-for-modern-browsers\">Build for modern browsers<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#build-for-modern-browsers\"></a></h2>\n<p>This website uses the Nextjs framework under the hood, which is not optimized for modern browsers by default.</p>\n<p>And we know that in order to be compatible with old browsers, frameworks such as Nextjs will perform a lot of polyfills, which will increase the size of the packaged files.</p>\n<p>The audience of React‚Äôs documentation is all front-end developers, and they basically don‚Äôt use old browsers. So we can let Nextjs turn on optimizations for modern browsers.</p>\n<p>Dan enabled this feature with this configuration:</p>\n<p><img src=\"https://miro.medium.com/max/700/1*Kenb9o7TRGZ8sKPKBY8hAA.png\"></p>\n<p>legacyBrowsers: false,</p>\n<p>browsersListForSwc: true,</p>\n<h2 id=\"lazy-loading-of-non-essential-resources\">Lazy loading of non-essential resources<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#lazy-loading-of-non-essential-resources\"></a></h2>\n<p>The new documentation embeds a lot of code examples from <code>codesandboxes</code> that rely on the <code>CodeMirror linter</code>, but this is not essential for FCP.</p>\n<p>So Dan lazy-loads this part of the resource:</p>\n<p><img src=\"https://miro.medium.com/max/700/1*8zuPNErMLhnB8AK9iugRQg.png\"></p>\n<h1 id=\"result\">Result<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#result\"></a></h1>\n<p>After these optimizations, beta.reactjs.org is faster.</p>\n<p><img src=\"https://miro.medium.com/max/1990/1*DlxFSpojYN-TwFjeXAPYbQ.jpeg\"></p>\n<p><img src=\"https://miro.medium.com/max/2016/1*bFCIJDknxch9YkDYrxI7MA.jpeg\"></p>\n<p>‚ÜêReact vs Vue‚Üí</p>","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there üëã. I'm a Front-end developer.\n\n---\n\n- Îã®ÏàúÌï®Í≥º Íæ∏Ï§ÄÌï®ÏùÄ Í∞ÄÏû• Ïâ¨Ïö∞Î©¥ÏÑúÎèÑ ÏßÄÌÇ§Í∏∞ Ïñ¥Î†§Ïö¥ ÏõêÏπô.\n\n- ü•± -> ü§îüí°üå± - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -> easy fun -> art -> profit?\n\n> I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n> We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n> Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n> [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n>\n> Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n> Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n> A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n> ‚ÄúMotivation often comes after starting, not before. Action produces momentum.‚Äù\n> [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n>\n> - James Clear\n\n> Focus is more about **not** keeping busy when you need to wait for something.  \n> Eat the boredom for a minute.\n>\n> - [[life-tips#wodenokoto]]\n\n> [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n>\n> - https://www.ntnu.edu/cerg/advice\n> - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n> [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n>\n> - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n> ÎèÑÎ¨¥ÏßÄ ÏùΩÌûàÏßÄ ÏïäÎäî Ï±Ö ÏïûÏóêÏÑú ÎÇ¥Í∞Ä ÌÉùÌïú Î∞©Î≤ïÏùÄ ÌéºÏ≥êÏßÑ ÌéòÏù¥ÏßÄ ÏïûÏóêÏÑú Î©çÎïåÎ¶¨Í∏∞Ïù¥Îã§. Îã§Î•¥Í≤å ÌëúÌòÑÌïòÎ©¥ Ïù¥Î†áÎã§. ÌéºÏ≥êÏßÑ Îëê ÌéòÏù¥ÏßÄ ÏïûÏóêÏÑú Ïò§Îûò Î®∏Î¨ºÍ∏∞.\n>\n> Ï±ÖÏùÑ ÌéºÏ≥êÎÜìÎäî Í≤ÉÏúºÎ°ú Ï∂©Î∂ÑÌïòÎã§. ÏùΩÏßÄ Î™ªÌï¥ÎèÑ Ï¢ãÎã§. Îß§Ïùº Ï†ïÌï¥ÏßÑ ÏßÑÎèÑÎ•º ÎÇòÍ∞ÄÏïº ÌïòÎäî ÌïôÍµê ÏàòÏóÖÏù¥ ÏïÑÎãàÎãàÍπå. ÌïòÏßÄÎßå ÏùΩÏßÄ ÏïäÏïÑÎèÑ Í¥úÏ∞ÆÎã§Í≥† Ìï¥ÏÑú ÌéºÏ≥êÎëêÏßÄÏ°∞Ï∞® ÏïäÏúºÎ©¥ Í≥§ÎûÄÌïòÎã§. Í∞ÄÎä•Ìïú Ìïú ÏûêÏ£º Ï±ÖÏùÑ ÌéºÏ≥êÎëêÎèÑÎ°ù ÌïòÏûê. Ï†ÑÌòÄ ÏùΩÏßÄ ÏïäÍ≥† Î©çÌïòÎãà Î∞îÎùºÎ≥¥Í≥† ÏûàÎã§Í∞Ä Îã§Ïãú ÎçÆÍ≤å ÎêòÎçîÎùºÎèÑ\n>\n> - ÎßâÎßâÌïú ÎèÖÏÑú. ÏãúÎ°úÍµ∞. P.10~13\n\n> I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n> My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n> Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- üìù [Gists](https://gist.github.com/Luke-SNAW)\n- üìú [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}