{"pageProps":{"note":{"id":"nuuhzhnxwgugngjcc2qzhjd","title":"What Color is Your Function?","desc":"","updated":1649035073092,"created":1649034460971,"custom":{},"fname":"dev.program-languages.What Color is Your Function","type":"note","vault":{"fsPath":"vault"},"contentHash":"ccd775e8d29dd1fb96ab53d30623fa1d","links":[],"anchors":{"a-new-language":{"type":"header","text":"A new language","value":"a-new-language","line":10,"column":0,"depth":1},"what-color-is-your-function":{"type":"header","text":"What color is your function?","value":"what-color-is-your-function","line":12,"column":0,"depth":1},"every-function-has-a-color":{"type":"header","text":"Every function has a color.","value":"every-function-has-a-color","line":16,"column":0,"depth":2},"the-way-you-call-a-function-depends-on-its-color":{"type":"header","text":"The way you call a function depends on its color.","value":"the-way-you-call-a-function-depends-on-its-color","line":32,"column":0,"depth":2},"you-can-only-call-a-red-function-from-within-another-red-function":{"type":"header","text":"You can only call a red function from within another red function.","value":"you-can-only-call-a-red-function-from-within-another-red-function","line":45,"column":0,"depth":3},"red-functions-are-more-painful-to-call":{"type":"header","text":"Red functions are more painful to call.","value":"red-functions-are-more-painful-to-call","line":67,"column":0,"depth":2},"some-core-library-functions-are-red":{"type":"header","text":"Some core library functions are red.","value":"some-core-library-functions-are-red","line":77,"column":0,"depth":2},"its-functional-programmings-fault":{"type":"header","text":"It’s functional programming’s fault!","value":"its-functional-programmings-fault","line":79,"column":0,"depth":1},"a-colorful-allegory":{"type":"header","text":"A colorful allegory","value":"a-colorful-allegory","line":93,"column":0,"depth":1},"i-promise-the-future-is-better":{"type":"header","text":"I promise the future is better","value":"i-promise-the-future-is-better","line":101,"column":0,"depth":1},"im-awaiting-a-solution":{"type":"header","text":"I’m awaiting a solution","value":"im-awaiting-a-solution","line":103,"column":0,"depth":1},"what-language-isnt-colored":{"type":"header","text":"What language isn’t colored?","value":"what-language-isnt-colored","line":105,"column":0,"depth":1},"remembrance-of-operations-past":{"type":"header","text":"Remembrance of operations past","value":"remembrance-of-operations-past","line":119,"column":0,"depth":1},"awaiting-a-generated-solution":{"type":"header","text":"Awaiting a generated solution","value":"awaiting-a-generated-solution","line":121,"column":0,"depth":1},"reified-callstacks":{"type":"header","text":"Reified callstacks","value":"reified-callstacks","line":123,"column":0,"depth":1}},"children":[],"parent":"cnzc1i8ojequt9lhg3zpkgo","data":{}},"body":"<h1 id=\"what-color-is-your-function\">What Color is Your Function?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-color-is-your-function\"></a></h1>\n<p><a href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\">https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/</a></p>\n<h1 id=\"a-new-language\">A new language<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#a-new-language\"></a></h1>\n<h1 id=\"what-color-is-your-function-1\">What color is your function?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-color-is-your-function-1\"></a></h1>\n<p>Except wait. Here’s where our language gets screwy. It has this one peculiar feature:</p>\n<h2 id=\"every-function-has-a-color\">Every function has a color.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#every-function-has-a-color\"></a></h2>\n<p>Each function—anonymous callback or regular named one—is either red or blue. Instead of a single function keyword, there are two:</p>\n<pre><code>blue_function doSomethingAzure() {\n// This is a blue function...\n}\n\nred_function doSomethingCarnelian() {\n// This is a red function...\n}\n</code></pre>\n<p>There are no colorless functions in the language. Want to make a function? Gotta pick a color. Them’s the rules. And, actually, there are a couple more rules you have to follow too:</p>\n<h2 id=\"the-way-you-call-a-function-depends-on-its-color\">The way you call a function depends on its color.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-way-you-call-a-function-depends-on-its-color\"></a></h2>\n<p>Imagine a “blue call” syntax and a “red call” syntax. Something like:</p>\n<pre><code>doSomethingAzure()blue;\ndoSomethingCarnelian()red;\n</code></pre>\n<p>When calling a function, you need to use the call that corresponds to its color. If you get it wrong—call a red function with <code>blue</code> after the parentheses or vice versa—it does something bad. Dredge up some long-forgotten nightmare from your childhood like a clown with snakes for arms hiding under your bed. That jumps out of your monitor and sucks out your vitreous humour.</p>\n<p>Annoying rule, right? Oh, and one more:</p>\n<h3 id=\"you-can-only-call-a-red-function-from-within-another-red-function\">You can only call a red function from within another red function.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#you-can-only-call-a-red-function-from-within-another-red-function\"></a></h3>\n<p>You can call a blue function from within a red one. This is kosher:</p>\n<pre><code>red_function doSomethingCarnelian() {\ndoSomethingAzure()blue;\n}\n</code></pre>\n<p>But you can’t go the other way. If you try to do this:</p>\n<pre><code>blue_function doSomethingAzure() {\ndoSomethingCarnelian()red;\n}\n</code></pre>\n<p>Well, you’re gonna get a visit from old Spidermouth the Night Clown.</p>\n<p>This makes writing higher-order functions like our <code>filter</code>() example trickier. We have to pick a color for it and that affects the colors of the functions we’re allowed to pass to it. The obvious solution is to make <code>filter</code>() red. That way, it can take either red or blue functions and call them. But then we run into the next itchy spot in the hairshirt that is this language:</p>\n<h2 id=\"red-functions-are-more-painful-to-call\">Red functions are more painful to call.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#red-functions-are-more-painful-to-call\"></a></h2>\n<p>For now, I won’t precisely define “painful”, but just imagine that the programmer has to jump through some kind of annoying hoops every time they call a red function.</p>\n<p>What matters is that if you decide to make a function red, everyone using your API will want to spit in your coffee and/or deposit some even less savory fluids in it.</p>\n<p>The obvious solution then is to never use red functions. Just make everything blue and you’re back to the sane world where all functions have the same color, which is equivalent to them all having no color, which is equivalent to our language not being entirely stupid.</p>\n<p>Alas, the sadistic language designers—and we all know all programming language designers are sadists, don’t we?—jabbed one final thorn in our side:</p>\n<h2 id=\"some-core-library-functions-are-red\">Some core library functions are red.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#some-core-library-functions-are-red\"></a></h2>\n<h1 id=\"its-functional-programmings-fault\">It’s functional programming’s fault!<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#its-functional-programmings-fault\"></a></h1>\n<p>You might be thinking that the problem here is we’re trying to use higher-order functions.</p>\n<p>If we only call blue functions, make our function blue. Otherwise, make it red. As long as we never make functions that accept functions, we don’t have to worry about trying to be “polymorphic over function color” (“polychromatic”?) or any nonsense like that.</p>\n<p>But, alas, higher order functions are just one example. This problem is pervasive any time we want to break our program down into separate functions that get reused.</p>\n<p>For example, let’s say we have a nice little blob of code that, I don’t know, implements Dijkstra’s algorithm over a graph representing how much your social network are crushing on each other.</p>\n<p>Later, you end up needing to use this same blob of code somewhere else. You do the natural thing and hoist it out into a separate function. You call it from the old place and your new code that uses it. But what color should it be? Obviously, you’ll make it blue if you can, but what if it uses one of those nasty red-only core library functions?</p>\n<p>What if the new place you want to call it is blue? You’ll have to turn it red. Then you’ll have to turn the function that calls it red.</p>\n<h1 id=\"a-colorful-allegory\">A colorful allegory<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#a-colorful-allegory\"></a></h1>\n<p>Of course, I’m not really talking about color here, am I? It’s an allegory, a literary trick. The Sneetches isn’t about stars on bellies, it’s about race. By now, you may have an inkling of what color actually represents. If not, here’s the big reveal:</p>\n<p><strong>Red functions are asynchronous ones.</strong></p>\n<p>...</p>\n<h1 id=\"i-promise-the-future-is-better\">I promise the future is better<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#i-promise-the-future-is-better\"></a></h1>\n<h1 id=\"im-awaiting-a-solution\">I’m awaiting a solution<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#im-awaiting-a-solution\"></a></h1>\n<h1 id=\"what-language-isnt-colored\">What language isn’t colored?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-language-isnt-colored\"></a></h1>\n<p>So JS, Dart, C#, and Python have this problem. CoffeeScript and most other languages that compile to JS do too (which is why Dart inherited it). I think even ClojureScript has this issue even though they’ve tried really hard to push against it with their <a href=\"https://github.com/clojure/core.async\">core.async</a> stuff.</p>\n<p>Wanna know one that doesn’t? Java. There you go. In their defense, they are actively trying to correct this oversight by moving to futures and async IO. It’s like a race to the bottom.</p>\n<p>C# also actually can avoid this problem too. They opted in to having color. Before they added async-await and all of the <code>Task&#x3C;T></code> stuff, you just used regular sync API calls. Three more languages that don’t have this problem: Go, Lua, and Ruby.</p>\n<p>Any guess what they have in common?</p>\n<p>Threads. Or, more precisely: multiple independent callstacks that can be switched between. It isn’t strictly necessary for them to be operating system threads. Goroutines in Go, coroutines in Lua, and fibers in Ruby are perfectly adequate.</p>\n<p>(That’s why C# has that little caveat. You can avoid the pain of async in C# by using threads.)</p>\n<h1 id=\"remembrance-of-operations-past\">Remembrance of operations past<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#remembrance-of-operations-past\"></a></h1>\n<h1 id=\"awaiting-a-generated-solution\">Awaiting a generated solution<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#awaiting-a-generated-solution\"></a></h1>\n<h1 id=\"reified-callstacks\">Reified callstacks<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reified-callstacks\"></a></h1>\n<p>But if you have threads (green- or OS-level), you don’t need to do that. You can just suspend the entire thread and hop straight back to the OS or event loop <em>without having to return from all of those functions.</em></p>\n<p>Go is the language that does this most beautifully in my opinion. As soon as you do any IO operation, it just parks that goroutine and resumes any other ones that aren’t blocked on IO.</p>","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -> 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -> easy fun -> art -> profit?\n\n> I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n> We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n> Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n> [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n>\n> Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n> Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n> A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n> “Motivation often comes after starting, not before. Action produces momentum.”\n> [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n>\n> - James Clear\n\n> Focus is more about **not** keeping busy when you need to wait for something.  \n> Eat the boredom for a minute.\n>\n> - [[life-tips#wodenokoto]]\n\n> [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n>\n> - https://www.ntnu.edu/cerg/advice\n> - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n> [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n>\n> - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n> 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n>\n> 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n>\n> - 막막한 독서. 시로군. P.10~13\n\n> I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n> My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n> Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}