{"pageProps":{"note":{"id":"8w5mxswu48wwne2lisingsc","title":"Using :has() as a CSS Parent Selector and much more","desc":"","updated":1661748214738,"created":1661745381272,"custom":{},"fname":"dev.CSS.selectors.Using has as a CSS Parent Selector and much more","type":"note","vault":{"fsPath":"vault"},"contentHash":"bc8785efcbcc82215d9107c68b6b998e","links":[],"anchors":{"the-basics-of-how-to-use-has-as-a-parent-selector":{"type":"header","text":"The basics of how to use :has() as a parent selector","value":"the-basics-of-how-to-use-has-as-a-parent-selector","line":14,"column":0,"depth":2},"using-has-with-the-child-combinator":{"type":"header","text":"Using :has() with the child combinator","value":"using-has-with-the-child-combinator","line":48,"column":0,"depth":2},"using-has-with-sibling-combinators":{"type":"header","text":"Using :has() with sibling combinators","value":"using-has-with-sibling-combinators","line":66,"column":0,"depth":2},"styling-form-states-without-js":{"type":"header","text":"Styling form states without JS","value":"styling-form-states-without-js","line":124,"column":0,"depth":2},"and-more":{"type":"header","text":"And more","value":"and-more","line":189,"column":0,"depth":2}},"children":[],"parent":"y20bq777m2hbjiupa8h6kyn","data":{}},"body":"<h1 id=\"using-has-as-a-css-parent-selector-and-much-more\">Using :has() as a CSS Parent Selector and much more<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-as-a-css-parent-selector-and-much-more\"></a></h1>\n<blockquote>\n<p><a href=\"https://webkit.org/blog/13096/css-has-pseudo-class/\">https://webkit.org/blog/13096/css-has-pseudo-class/</a></p>\n</blockquote>\n<p>Over the last <a href=\"https://lists.w3.org/Archives/Public/www-style/2002May/0037.html\">twenty years</a>, the CSS Working Group discussed the possibility many, many times. The need was clear and well understood. Defining syntax was a doable task. But figuring out how a browser engine could handle potentially very complex circular patterns, and get through the calculations fast enough seemed impossible. Early versions of a parent selector were drafted for CSS3, only to be deferred. Finally, the <code>:has()</code> pseudo-class was officially defined in <a href=\"https://www.w3.org/TR/selectors-4/#relational\">CSS Selectors level 4</a>. But having a web standard alone didn’t make <code>:has()</code> a reality. We still needed a browser team to figure out the very real performance challenge. In the meantime, computers continued to get more powerful and faster year after year.</p>\n<p>In 2021, <a href=\"https://www.igalia.com/\">Igalia</a> started advocating for <code>:has()</code> among browser engineering teams, <a href=\"https://bkardell.com/blog/canihas.html\">prototyping</a> their ideas and <a href=\"https://github.com/Igalia/explainers/tree/main/css/has\">documenting</a> their findings regarding performance. The renewed attention on <code>:has()</code> caught the attention of engineers who work on WebKit at Apple. We started implementing the pseudo-class, thinking through possibilities for the needed performance enhancements to make this work. We debated whether to start with a faster version with a very limited and narrow scope of what it could do, and then try to remove those limits if possible… or to start with something that had no limits, and only apply restrictions as required. We went for it, and implemented the more powerful version. We developed a number of novel <code>:has</code>-specific caching and filtering optimizations, and leveraged the existing advanced optimization strategies of our CSS engine. And our approach worked, proving that after a two decade wait, it is finally possible to implement such a selector with <a href=\"https://twitter.com/anttikoivisto/status/1473251189181591554\">fantastic performance</a>, even in the presence of large DOM trees and large numbers of <code>:has()</code> selectors.</p>\n<h2 id=\"the-basics-of-how-to-use-has-as-a-parent-selector\">The basics of how to use :has() as a parent selector<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-basics-of-how-to-use-has-as-a-parent-selector\"></a></h2>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">figure<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>pre<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token color\"><span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span><span class=\"token number\">252</span><span class=\"token punctuation\">,</span> <span class=\"token number\">232</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token unit\">px</span> solid <span class=\"token color\">white</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token unit\">rem</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>And I use a Selector Feature Query to hide a reminder about browser support whenever the current browser supports <code>:has()</code>.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@supports</span> <span class=\"token function\">selector</span><span class=\"token punctuation\">(</span><span class=\"token selector-function-argument selector\"><span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">small</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>The <code>@supports selector()</code> at-rule is itself <a href=\"https://caniuse.com/mdn-css_at-rules_supports_selector\">very well supported</a>. It can be incredibly useful anytime you want to use a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Conditional_Rules/Using_Feature_Queries\">feature query</a> to test for browser support of a particular selector.</p>\n<p>And finally, in this first demo, I also write a complex selector using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:not\"><code>:not() pseudo-class</code></a>. I want to apply <code>display: flex</code> to the figure — but only if an image is the sole content. Flexbox makes the image stretch to fill all available space.</p>\n<p>I use a selector to target any <code>figure</code> that does <em>not</em> have any element that is <em>not</em> an image. If the <code>figure</code> has a <code>figcaption</code>, <code>pre</code>, <code>p</code>, or an <code>h1</code> — or any element at all besides <code>img</code> — then the selector doesn’t apply.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">figure<span class=\"token pseudo-class\">:not</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:not</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><code>:has()</code> is a powerful thing.</p>\n<h2 id=\"using-has-with-the-child-combinator\">Using :has() with the child combinator<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-with-the-child-combinator\"></a></h2>\n<p>First, a quick review of the difference between the <a href=\"https://www.w3.org/TR/selectors-4/#descendant-combinators\">descendant combinator</a> and the <a href=\"https://www.w3.org/TR/selectors-4/#child-combinators\">child combinator</a> (<code>></code>).</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">a<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  ...<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">a<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token combinator\">></span> img<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  ...<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>The first selects any <code>a</code> element with an <code>img</code> inside — any place in the HTML structure. While the second selects an element only if the <code>img</code> is a direct child of the <code>a</code>.</p>\n<h2 id=\"using-has-with-sibling-combinators\">Using :has() with sibling combinators<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-has-with-sibling-combinators\"></a></h2>\n<p>Let’s review the two selectors with sibling relationships. There’s the <a href=\"https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators\">next-sibling combinator</a> (<code>+</code>) and the <a href=\"https://www.w3.org/TR/selectors-4/#general-sibling-combinators\">subsequent-sibling combinator</a> (<code>~</code>).</p>\n<p>The next-sibling combinator (<code>+</code>) selects only the paragraphs that come <em>directly</em> after an <code>h2</code> element.</p>\n<pre class=\"language-css\"><code class=\"language-css\">h2 <span class=\"token operator\">+</span> p\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>h2</span><span class=\"token punctuation\">></span></span>Headline<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>h2</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span><span class=\"token punctuation\">></span></span>Paragraph that is selected by `h2 + p`, because it's directly after `h2`.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>The subsequent-sibling combinator (<code>~</code>) selects all paragraphs that come after an <code>h2</code> element. They must be siblings, but there can be any number of other HTML elements in between.</p>\n<pre class=\"language-css\"><code class=\"language-css\">h2 ~ p\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>h2</span><span class=\"token punctuation\">></span></span>Headline<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>h2</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>h3</span><span class=\"token punctuation\">></span></span>Something else<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>h3</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span><span class=\"token punctuation\">></span></span>Paragraph that is selected by `h2 ~ p`.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span><span class=\"token punctuation\">></span></span>This paragraph is also selected.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>Note that both <code>h2 + p</code> and <code>h2 ~ p</code> select the paragraph elements, and not the <code>h2</code> headlines. Like other selectors (think of <code>a img</code>), it’s the last element listed that is targeted by the selector. But what if we want to target the <code>h2</code>? We can use sibling combinators with <code>:has().</code></p>\n<p>How often have you wanted to adjust the margins on a headline based on the element following it? Now it’s easy. This code allows us to select any <code>h2</code> with a <code>p</code> immediately after it.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h2<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token combinator\">+</span> p<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Amazing.</p>\n<p>What if we want to do this for all six headline elements, without writing out six copies of the selector. We can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:is\"><code>:is</code></a> to simplify our code.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:is</span><span class=\"token punctuation\">(</span>h1<span class=\"token punctuation\">,</span> h2<span class=\"token punctuation\">,</span> h3<span class=\"token punctuation\">,</span> h4<span class=\"token punctuation\">,</span> h5<span class=\"token punctuation\">,</span> h6<span class=\"token punctuation\">)</span><span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token combinator\">+</span> p<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Or what if we want to write this code for more elements than just paragrapahs? Let’s eliminate the bottom margin of all headlines whenever they are followed by paragraphs, captions, code examples and lists.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:is</span><span class=\"token punctuation\">(</span>h1<span class=\"token punctuation\">,</span> h2<span class=\"token punctuation\">,</span> h3<span class=\"token punctuation\">,</span> h4<span class=\"token punctuation\">,</span> h5<span class=\"token punctuation\">,</span> h6<span class=\"token punctuation\">)</span><span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token combinator\">+</span> <span class=\"token pseudo-class\">:is</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> figcaption<span class=\"token punctuation\">,</span> pre<span class=\"token punctuation\">,</span> dl<span class=\"token punctuation\">,</span> ul<span class=\"token punctuation\">,</span> ol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Combining <code>:has()</code> with <a href=\"https://www.w3.org/TR/selectors-4/#descendant-combinators\">descendant combinators</a>, <a href=\"https://www.w3.org/TR/selectors-4/#child-combinators\">child combinators</a> (<code>></code>), <a href=\"https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators\">next-sibling combinators</a> (<code>+</code>), and <a href=\"https://www.w3.org/TR/selectors-4/#general-sibling-combinators\">subsequent-sibling combinators</a> (<code>~</code>) opens up a world of possibilities. But oh, this is <em>still</em> just the beginning.</p>\n<h2 id=\"styling-form-states-without-js\">Styling form states without JS<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#styling-form-states-without-js\"></a></h2>\n<p>There are a lot of fantastic <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\">pseudo-classes</a> that can be used inside has:(). In fact, it revolutionizes what pseudo-classes can do. Previously, pseudo-classes were only used for styling an element based on a special state — or styling one of its children. Now, pseudo-classes can be used to capture state, without JavaScript, and style anything in the DOM based on that state.</p>\n<p>Form input fields provide a powerful way to capture such a state. Form-specific pseudo-classes include <code>:autofill</code>, <code>:enabled</code>, <code>:disabled</code>, <code>:read-only</code>, <code>:read-write</code>, <code>:placeholder-shown</code>, <code>:default</code>, <code>:checked</code>, <code>:indeterminate</code>, <code>:valid</code>, <code>:invalid</code>, <code>:in-range</code>, <code>:out-of-range</code>, <code>:required</code> and <code>:optional</code>.</p>\n<p>Let’s solve one of the use cases I described in the introduction — the long-standing need to style a form label based on the state of the input field. Let’s start with a basic form.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Website<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Email<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>form</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>I’d like to apply a background to the whole form whenever one of the fields is in focus.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">form<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:focus-visible</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token color\">antiquewhite</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Now I could have used <code>form:focus-within</code> instead, but it would behave like <code>form:has(:focus)</code>. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:focus\"><code>:focus</code></a> pseudo-class always applies CSS whenever a field is in focus. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible\"><code>:focus-visible</code></a> pseudo-class provides a reliable way to style a focus indicator only when the browser would draw one natively, using the same <a href=\"https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/\">complex heuristics the browser uses</a> to determine whether or not to apply a focus-ring.</p>\n<p>Now, let’s imagine I want to style the other fields, the ones <em>not</em> in focus — changing their label text color and the input border color. Before <code>:has()</code>, this required JavaScript. Now we can use this CSS.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">form<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:focus-visible</span><span class=\"token punctuation\">)</span> div<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>input<span class=\"token pseudo-class\">:not</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:focus-visible</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> label</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token color\">peru</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">form<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:focus-visible</span><span class=\"token punctuation\">)</span> div<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>input<span class=\"token pseudo-class\">:not</span><span class=\"token punctuation\">(</span><span class=\"token pseudo-class\">:focus-visible</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> input</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">peru</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>What does that selector say? If one of the controls inside this form has focus, and the input element for this particular form control does not have focus, then change the color of this label’s text to <code>peru</code>. And change the border of the input field to be <code>2px solid peru</code>.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">input<span class=\"token pseudo-class\">:invalid</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">outline</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token unit\">px</span> solid <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Now with <code>:has()</code>, we can turn the label text red as well:</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">div<span class=\"token pseudo-class\">:has</span><span class=\"token punctuation\">(</span>input<span class=\"token pseudo-class\">:invalid</span><span class=\"token punctuation\">)</span> label</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>You can see the result by typing something in the website or email field that’s not a fully-formed URL or email address. Both are invalid, and so both will trigger a red border and red label, with an “X”.</p>\n<h2 id=\"and-more\">And more<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#and-more\"></a></h2>\n<p>Looking through other <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\">pseudo-classes</a>, there are so many that can be combined with <code>:has()</code>. Imagine the possibilities with <code>:nth-child</code>, <code>:nth-last-child</code>, <code>:first-child</code>, <code>:last-child</code>, <code>:only-child</code>, <code>:nth-of-type</code>, <code>:nth-last-of-type</code>, <code>:first-of-type</code>, <code>:last-of-type</code>, <code>:only-of-type</code>. The brand new <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:modal\"><code>:modal</code></a> pseudo-class is triggered when a <code>dialog</code> is in the open state. With <code>:has(:modal)</code> you can style anything in the DOM based on whether the <code>dialog</code> is open or closed.</p>\n<p>However, not every pseudo-class is currently supported inside <code>:has()</code> in every browser, so do try out your code in multiple browsers. Currently the dynamic media pseudo-classes don’t work — like <code>:playing</code>, <code>:paused</code>, <code>:muted</code>, etc. They very well may work in the future, so if you are reading this in the future, test them out! Also, form invalidation support is currently missing in certain specific situations, so dynamic state changes to those pseudo-classes may not update with <code>:has()</code>.</p>\n<p>Safari 16 will add support for <code>:has(:target)</code> opening up interesting possibilities for writing code that looks at the current URL for a fragment that matches the ID of a specific element. For example, if a user clicks on a table of contents at the top of a document, and jumps down to the section of the page matching that link, <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:target\"><code>:target</code></a> provides a way to style that content uniquely, based on the fact the user clicked the link to get there. And <code>:has()</code> opens up what such styling can do.</p>\n<p>Something to note — the CSS Working Group <a href=\"https://github.com/w3c/csswg-drafts/issues/7463\">resolved</a> to disallow all existing pseudo-elements inside of <code>:has()</code>. For example, <code>article:has(p::first-line)</code> and <code>ol:has(li::marker)</code> won’t work. Same with <code>::before</code> and <code>::after.</code></p>","noteIndex":{"id":"Iy0MoL0KnL55Br3AfTS2C","title":"Luke","desc":"","updated":1761796791487,"created":1644449449778,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"4e745570ca97988a0362cb939b760952","links":[{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"life-tips","position":{"start":{"line":41,"column":5,"offset":2603},"end":{"line":41,"column":29,"offset":2627},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"life-tips","anchorHeader":"wodenokoto"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2025","alias":"What I read in 2025","position":{"start":{"line":70,"column":3,"offset":4333},"end":{"line":70,"column":54,"offset":4384},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2025"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2024","alias":"2024","position":{"start":{"line":71,"column":5,"offset":4389},"end":{"line":71,"column":41,"offset":4425},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2024"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2023","alias":"2023","position":{"start":{"line":72,"column":5,"offset":4430},"end":{"line":72,"column":41,"offset":4466},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2023"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-read-in.2022","alias":"2022","position":{"start":{"line":73,"column":5,"offset":4471},"end":{"line":73,"column":41,"offset":4507},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-read-in.2022"}},{"type":"wiki","from":{"fname":"root","id":"Iy0MoL0KnL55Br3AfTS2C","vaultName":"vault"},"value":"journal.what-i-struggled-brag-in","position":{"start":{"line":79,"column":3,"offset":4643},"end":{"line":79,"column":39,"offset":4679},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"journal.what-i-struggled-brag-in"}}],"anchors":{"what-i-read-in-past":{"type":"header","text":"What I read in past","value":"what-i-read-in-past","line":74,"column":0,"depth":2}},"children":["zd4mq442jike0pr0wba1u3m","6hzeqsofq67gdk88flxlkhp","778ijii93yu5uwnrwmn5zi4","g1fngdjl25nes6fs3lip602","ZbdkdApFqLdks4Moq92R9","uoc5hhki3o4py15cesddu8q","9qf7j06jtdkm6rnx9ymvwb0","5zn10cvj7ajy2gh2is5nqmg","4qo9ma0z0yu1czns6pxl7y5","ok0e729ho7o09xetujkxc0m","GR5x8HnNFEN6fU2UBSEIK","yirtnlj8q24yutcf3ss1xqy","eq0wc6t7wl2wv221yb68ro4","7x2fnv4j6gxts08qk0jguny","ettkt3iClONnxpbGwBVLl","7l4knev6v613tbuoskvmbdg","hvh5bud6yp7dc89tuh95tr9","4fvoqrplw0cweo554usbjos","f8qsfql0a9v8thpeo82udfa","1swsbrhqi9jk41v9eodyi5q","SQqYupi6EFddTerBA8RRD","hjNeNc1F2JUh0lTWanH4h","qf0l4wbrc9jgooyzexmbq5v","uur1lkol353z9vfeqb3n5bv","cd9n1czq3ursgkby985wkmm","k1sr43vwnfqztwc0s43pkcf","wfde75rhdvq2yfa2zy2q6rv","rjcmdv60jokmbw6zoq8u2ef","ujapvww8o6v3kpmlhtryq4k","pkwewou9d5e8ystswn1j2b4"],"parent":null,"data":{},"body":"\nHi there 👋. I'm a Front-end developer.\n\n---\n\n- 단순함과 꾸준함은 가장 쉬우면서도 지키기 어려운 원칙.\n\n- 🥱 -> 🤔💡🌱 - [On The Death of Daydreaming](https://www.afterbabel.com/p/on-the-death-of-daydreaming)\n  - boredom -> easy fun -> art -> profit?\n\n> I've often described my motivation for building software to others using imagery: I like to go find a secluded beach, build a large, magnificent sand castle, and then walk away. Will anyone notice? Probably not. Will the waves eventually destroy it? Yep. Did I still get immense satisfaction? Absolutely. - [aliasxneo](https://news.ycombinator.com/item?id=41497113)\n\n> We love to see the process, not just the result. The imperfections in your work can be beautiful if they show your struggle for perfection, not a lack of care. - [ralphammer](https://ralphammer.com/is-perfection-boring/)\n\n> Simplicity, even if it sacrifices some ideal functionality has better survival characteristics than the-right-thing. - [The Rise of Worse is Better](https://www.dreamsongs.com/RiseOfWorseIsBetter.html)\n\n> [Roberto Blake was talking about making 100 crappy videos](https://www.youtube.com/watch?v=OnUBaQ1Sp_E) to get better over time. Putting in the reps and improving a little bit each time.\n>\n> Putting in the work without expecting any external reward at first (eg views, followers, likes, etc) will pay off in the long run. - [100 Scrappy Things](https://www.florin-pop.com/blog/100-scrappy-things/)\n\n> Make the difficult habitual, the habitual easy, and the easy beautiful. - [Constantin S. Stanislavski](https://www.goodreads.com/quotes/7102271-make-the-difficult-habitual-the-habitual-easy-and-the-easy)\n\n> A good match is a **structured** dance, where players aim to **score** while they are following well-defined **rules**. This **freedom within a structure** is what makes it fun. - [ralphammer](https://ralphammer.com/how-to-get-started/)\n\n- [Pivot Points](https://longform.asmartbear.com/pivot-points/)\n\n  - non-judgmental aspects of personality that can be strengths in some contexts and weaknesses in others\n  - Pivot Points are fixed in the short term\n\n- [Hedged Bets](https://longform.asmartbear.com/predict-the-future/#hedged-bets)\n  - trading slightly less maximum upside for predictable, net-positive outcomes.\n\n> “Motivation often comes after starting, not before. Action produces momentum.”\n> [When you start a new habit, it should take less than two minutes to do.](https://jamesclear.com/how-to-stop-procrastinating)\n>\n> - James Clear\n\n> Focus is more about **not** keeping busy when you need to wait for something.  \n> Eat the boredom for a minute.\n>\n> - [[life-tips#wodenokoto]]\n\n> [4 minutes run hard enough to push heart rate to 90%, 3 minutes recover, repeat 4 times](https://news.ycombinator.com/item?id=34213181)\n>\n> - https://www.ntnu.edu/cerg/advice\n> - [Get running with Couch to 5K](https://www.nhs.uk/live-well/exercise/running-and-aerobic-exercises/get-running-with-couch-to-5k/)\n\n> [recommended routine - bodyweightfitness](https://www.reddit.com/r/bodyweightfitness/wiki/kb/recommended_routine/) - I Don't Have This Much Time!\n>\n> - Don't workout at all (saves anywhere from 20 to 60 minutes, but really, really, really, really, really, really, really, really, really not recommended)\n\n> 도무지 읽히지 않는 책 앞에서 내가 택한 방법은 펼쳐진 페이지 앞에서 멍때리기이다. 다르게 표현하면 이렇다. 펼쳐진 두 페이지 앞에서 오래 머물기.\n>\n> 책을 펼쳐놓는 것으로 충분하다. 읽지 못해도 좋다. 매일 정해진 진도를 나가야 하는 학교 수업이 아니니까. 하지만 읽지 않아도 괜찮다고 해서 펼쳐두지조차 않으면 곤란하다. 가능한 한 자주 책을 펼쳐두도록 하자. 전혀 읽지 않고 멍하니 바라보고 있다가 다시 덮게 되더라도\n>\n> - 막막한 독서. 시로군. P.10~13\n\n> I think it should be everyone's primary focus to sleep well, drink water, get outside, get active, and eat generally decently. I hate to say it, but if you're not eating a good amount of vegetables and fruit, decent protein, sleep, etc, no amount of XYZ will catch up to that detriment. - [CE02](https://news.ycombinator.com/item?id=35056071)\n\n> My real battle is doing good versus doing nothing. - [Deirdre Sullivan](https://www.npr.org/2005/08/08/4785079/always-go-to-the-funeral)\n\n[Kind Engineering](https://kind.engineering/) - How To Engineer Kindness\n\n> Sometimes magic is just someone spending more time on something than anyone else might reasonably expect. - [Teller](https://www.goodreads.com/quotes/6641527-sometimes-magic-is-just-someone-spending-more-time-on-something)\n\n---\n\n## What I read in past\n\n- [[What I read in 2025|journal.what-i-read-in.2025]]\n  - [[2024|journal.what-i-read-in.2024]]\n  - [[2023|journal.what-i-read-in.2023]]\n  - [[2022|journal.what-i-read-in.2022]]\n- 📝 [Gists](https://gist.github.com/Luke-SNAW)\n- 📜 [Journals](https://luke-snaw.github.io/Luke-SNAW__netlify-CMS.github.io/)\n\n---\n\n- [[journal.what-i-struggled-brag-in]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":false,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.115.0","enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Luke SNAW","description":"Personal knowledge space"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","siteUrl":"https://luke-snaw.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}