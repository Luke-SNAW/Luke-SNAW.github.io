<h1 id="windows-subsystem-for-linux">Windows Subsystem for Linux<a aria-hidden="true" class="anchor-heading icon-link" href="#windows-subsystem-for-linux"></a></h1>
<blockquote>
<p><a href="https://learn.microsoft.com/ko-kr/windows/wsl/install">https://learn.microsoft.com/ko-kr/windows/wsl/install</a></p>
</blockquote>
<h2 id="update-wsl-kernel"><a href="https://pureinfotech.com/install-windows-subsystem-linux-2-windows-10/">Update WSL kernel</a><a aria-hidden="true" class="anchor-heading icon-link" href="#update-wsl-kernel"></a></h2>
<p>To update the WSL kernel to the latest version, use these steps:</p>
<ol>
<li>Open <strong>Start</strong>.</li>
<li>Search for <strong>Command Prompt</strong>, right-click the top result, and select the <strong>Run as administrator</strong> option.</li>
<li>Type the following command to <em>update the WSL kernel</em> and press <strong>Enter</strong>:</li>
</ol>
<pre class="language-shell"><code class="language-shell">wsl --update
</code></pre>
<p><a href="https://learn.microsoft.com/ko-kr/windows/wsl/install-manual#step-3---enable-virtual-machine-feature">https://learn.microsoft.com/ko-kr/windows/wsl/install-manual#step-3---enable-virtual-machine-feature</a></p>
<h2 id="set-default-version"><a href="https://pureinfotech.com/upgrade-wsl2-wsl1-windows-10/">Set default version</a><a aria-hidden="true" class="anchor-heading icon-link" href="#set-default-version"></a></h2>
<p>Type the following command to set Windows Subsystem for Linux 2 your default architecture for new distros you’ll install and press <strong>Enter</strong>:</p>
<pre class="language-shell"><code class="language-shell">wsl --set-default-version <span class="token number">2</span>
</code></pre>
<p>Type the following command to get a list of all the distros installed on your device and press <strong>Enter</strong>:</p>
<pre class="language-shell"><code class="language-shell">wsl -l -v
</code></pre>
<p>Type the following command to convert the distro from WSL 1 to WSL 2 and press <strong>Enter</strong>:</p>
<pre class="language-shell"><code class="language-shell">wsl --set-version DISTRO-NAME <span class="token number">2</span>
</code></pre>
<h2 id="how-to-reset-wsl2-linux-distro-on-windows-10"><a href="https://pureinfotech.com/reset-wsl2-linux-distro-windows-10/">How to reset WSL2 Linux distro on Windows 10</a><a aria-hidden="true" class="anchor-heading icon-link" href="#how-to-reset-wsl2-linux-distro-on-windows-10"></a></h2>
<h2 id="trouble-shooting">Trouble-shooting<a aria-hidden="true" class="anchor-heading icon-link" href="#trouble-shooting"></a></h2>
<h3 id="wsl-vscode-server-install-fails-on-ubuntu"><a href="https://github.com/microsoft/vscode-remote-release/issues/1856">WSL: VSCode server install fails on Ubuntu</a><a aria-hidden="true" class="anchor-heading icon-link" href="#wsl-vscode-server-install-fails-on-ubuntu"></a></h3>
<blockquote>
<p><strong>consider to run only node in WSL, the others in windows.</strong>
git setting, vs code expansions needs to be redundant.</p>
</blockquote>
<p>Running Windows 10, WSL with Ubuntu 19.10.</p>
<p>The VSCode server install fails when untaring the server: <code>'/bin/gzip: 10: Syntax error: "(" unexpected'</code></p>
<p>WSL log:</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> Starting server: /home/mellowd/.vscode-server/bin/86405ea23e3937316009fc27c9361deee66ffbf5/server.sh --port<span class="token operator">=</span><span class="token number">0</span> --fileWatcherPolling<span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> /bin/gzip: <span class="token number">10</span>: Syntax error: <span class="token string">"("</span> unexpected
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> tar: Child returned status <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> tar: Error is not recoverable: exiting now
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> /bin/gzip: <span class="token number">10</span>: Syntax error: <span class="token string">"("</span> unexpected
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> tar: Child returned status <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> tar: Error is not recoverable: exiting now
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> ERROR: Unpacking failed: Files expected: <span class="token number">0</span>, is <span class="token number">1</span>
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> /mnt/c/Users/mellowd/.vscode/extensions/ms-vscode-remote.remote-wsl-0.40.2/scripts/wslServer.sh: <span class="token number">60</span>: /home/mellowd/.vscode-server/bin/86405ea23e3937316009fc27c9361deee66ffbf5/server.sh: not found
<span class="token punctuation">[</span><span class="token number">2019</span>-11-09 01:04:18.721<span class="token punctuation">]</span> VS Code Server <span class="token keyword">for</span> WSL closed unexpectedly.
</code></pre>
<p><a href="https://github.com/microsoft/WSL/issues/4461#issuecomment-1132360882">https://github.com/microsoft/WSL/issues/4461#issuecomment-1132360882</a></p>
<blockquote>
<p>I am also affected by this bug again in Ubuntu 22.04. Weirdly enough, the rest of the binaries work fine. Only gzip seems to fail.</p>
</blockquote>
<p>use this command may help</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">echo</span> -en <span class="token string">'\\x10'</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">dd</span> <span class="token assign-left variable">of</span><span class="token operator">=</span>/usr/bin/gzip <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">0x189</span><span class="token variable">))</span></span>
</code></pre>