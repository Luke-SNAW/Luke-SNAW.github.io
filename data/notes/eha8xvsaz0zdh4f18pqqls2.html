<h1 id="db">DB<a aria-hidden="true" class="anchor-heading icon-link" href="#db"></a></h1>
<h2 id="collections">Collections<a aria-hidden="true" class="anchor-heading icon-link" href="#collections"></a></h2>
<ul>
<li>
<p><a href="https://gvwilson.github.io/sql-tutorial/">SQL for the Weary</a></p>
</li>
<li>
<p><a href="https://rahulraj.io/a-better-deletion-approach-than-soft-delete/">Use cases of soft delete</a></p>
<blockquote>
<ul>
<li>You want to delete records, but also want to retain them for n number of days, just for a safer side against accidental deletion.</li>
<li>You want to exclude some records (permanent retain) under explicit requirements, even if they match the criteria of an eligible record to be deleted.</li>
<li>You don't want to delete the actual resource before returning the resource back. Basically, deletion before returning the value is not desired.</li>
<li>You don't want to modify existing table schema(s) to accommodate soft delete key.</li>
<li>You want the tables as loosely coupled as possible without having to worry about deletion logic.</li>
</ul>
</blockquote>
</li>
<li>
<p><a href="https://brandur.org/soft-deletion">Soft Deletion Probably Isn't Worth It</a></p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=32156009">https://news.ycombinator.com/item?id=32156009</a></li>
<li><a href="https://brandur.org/fragments/deleted-record-insert">Easy, alternative soft deletion: <code>deleted_record_insert</code></a></li>
</ul>
</li>
<li>
<p><a href="https://sirupsen.com/index-merges">Index Merges vs Composite Indexes in Postgres and MySQL</a></p>
<blockquote>
<p>Composite indexes are about 10x faster than index merges. In Postgres, the gap is larger than in MySQL because Postgres doesn't support index-only scans for queries that involve index merges.</p>
</blockquote>
</li>
<li>
<p><a href="https://planetscale.com/courses/mysql-for-developers/introduction/course-introduction">MySQL for Developers</a> <a class="color-tag" style="--tag-color: #c77986;" href="/notes/0ce4gh9w22elz738jbxchfo">#bookshelf</a></p>
</li>
<li>
<p><a href="https://planetscale.com/blog/how-does-database-sharding-work">How does database sharding work?</a></p>
<blockquote>
<p>why are you not using a database that does sharding for you? Over the past few years the so-called “serverless” database has gotten a lot more traction.</p>
</blockquote>
<blockquote>
<p>This is the most important paragraph in the article. In a world where things like Dynamo/Cassandra or Spanner/Cockroach exist, manually-sharded DB solutions are pretty much entirely obsolete. Spanner exists because Google got so sick of people building and maintaining bespoke solutions for replication and resharding, which would inevitably have their own set of quirks, bugs, consistency gaps, scaling limits, and manual operations required to reshard or rebalance from time to time. When it's part of the database itself, all those problems just... disappear. It's like a single database that just happens to spread itself across multiple machines. It's an actual distributed cloud solution.<br>
My current employer uses sharded and replicated Postgres via RDS. Even basic things like deploying schema changes to every shard are an unbelievable pain in the ass, and changing the number of shards on a major database is a high-touch, multi-day operation. After having worked with Spanner in the past, it's like going back to the stone age, like we're only a step above babysitting individual machines in a closet. Nobody should do this. — <a href="https://news.ycombinator.com/item?id=35478332">GeneralMayhem</a></p>
</blockquote>
</li>
<li>
<p><a href="https://iorilan.medium.com/a-5-years-tech-lead-said-they-shard-a-database-to-scale-but-then-he-failed-to-answer-this-question-8be39115dcb0">A 5 years+ tech lead said they shard a database to scale but then he failed to answer this question</a></p>
</li>
<li>
<p><a href="https://martinfowler.com/bliki/OrmHate.html">OrmHate</a></p>
<blockquote>
<p>Essentially the ORM can handle about 80-90% of the mapping problems, but that last chunk always needs careful work by somebody who really understands how a relational database works.<br>
... A framework that allows me to avoid 80% of that is worthwhile even if it is only 80%.<br>
To avoid the mapping problem you have two alternatives. Either you use the relational model in memory, or you don't use it in the database.</p>
</blockquote>
</li>
<li>
<p><a href="https://www.dedp.online/">Data Engineering Design Patterns</a> <a class="color-tag" style="--tag-color: #c77986;" href="/notes/0ce4gh9w22elz738jbxchfo">#bookshelf</a></p>
</li>
<li>
<p><a href="https://bigmachine.io/databases/its-time-to-get-over-that-stored-procedure-aversion-you-have/">It's Time To Get Over That Stored Procedure Aversion You Have</a></p>
</li>
<li>
<p><a href="https://uuid7.com/">UUIDv7: The Time-Sortable Identifier for Modern Databases</a></p>
</li>
<li>
<p><a href="https://brandur.org/nanoglyphs/026-ids">Identity Crisis: Sequence v. UUID as Primary Key</a></p>
</li>
<li>
<p><a href="https://challahscript.com/what_i_wish_someone_told_me_about_postgres">What I Wish Someone Told Me About DB(Postgres)</a></p>
</li>
<li>
<p><a href="https://www.stemlaur.com/blog/2021/03/30/tech-hibern-hate/">Stop using JPA/Hibernate</a></p>
</li>
<li>
<p><a href="https://matt.blwt.io/post/7-databases-in-7-weeks-for-2025/">7 Databases in 7 Weeks for 2025</a></p>
</li>
<li>
<p><a href="https://mccue.dev/pages/3-11-25-life-altering-postgresql-patterns">Life Altering Postgresql Patterns</a></p>
</li>
<li>
<p><a href="https://atlas9.dev/blog/soft-delete.html">The challenges of soft delete</a></p>
<ul>
<li>The <code>archived_at</code> column approach can lead to significant complexity in queries, operations, and application code, with archived data often being ignored and accumulating over time.</li>
<li>Migrations involving soft delete data can be complex and non-trivial, especially when dealing with old records.</li>
<li>Restoring a soft-deleted record isn't always as simple as nullifying a timestamp; it may require complex, potentially buggy, restoration code.</li>
<li>Application-level archiving, where delete events trigger archiving to external storage like S3, can simplify the primary database but introduces its own reliability and infrastructure challenges.</li>
<li>The trigger-based approach is recommended for new projects needing soft delete due to its simplicity, ability to keep live tables clean, and ease of querying archived data without extra infrastructure.</li>
</ul>
</li>
</ul>
<h2 id="postgresql">PostgreSQL<a aria-hidden="true" class="anchor-heading icon-link" href="#postgresql"></a></h2>
<ul>
<li><a href="https://dbconvert.com/blog/mysql-vs-postgresql/">MySQL vs PostgreSQL in 2023.</a></li>
<li><a href="https://gist.github.com/cpursley/c8fb81fe8a7e5df038158bdfe0f06dbb">Postgresql is enough</a>
<blockquote>
<ul>
<li><a href="https://news.ycombinator.com/item?id=39274174">As an application grows in complexity, you start to realize <em>why</em> there's a stack, rather than just a single technology to rule them all. Trying to cram everything into Postgres (or lambdas, or S3, or firebase, or whatever other tech you're trying to consolidate on) starts to get really uncomfortable.</a></li>
<li><a href="https://news.ycombinator.com/item?id=39274805">... both worked: the PG queue was never grown out of, and generally SQS was easy to work with &#x26; reliable. But what I've also seen is "Let's introduce bespoke tech that nobody on the team, including the person introducing it, has experience in, for a queue that isn't even the main focus of what we're building" — this I'm less fine with.</a></li>
</ul>
</blockquote>
</li>
<li><a href="https://sive.rs/pg">Simplify: move code into database functions</a>
<ul>
<li>Databases outlive the applications that access them.</li>
<li>the database is actually <a href="https://www.postgresql.org/docs/current/server-programming.html">quite smart</a>.</li>
<li>examples: <a href="https://www.postgresql.org/docs/current/ddl-constraints.html">constraints</a>, <a href="https://www.postgresql.org/docs/current/trigger-definition.html">triggers</a>, functions, <a href="https://www.postgresql.org/docs/current/functions-json.html#FUNCTIONS-JSON-CREATION-TABLE">create JSON directly</a>.</li>
<li>If you like JavaScript, check out the promising <a href="https://plv8.github.io/">plv8</a>.</li>
<li><strong>branching? source code history(Migrations)?</strong>
<ul>
<li><a href="https://github.com/kblok/tech-posts/blob/master/working-with-stored-procedures.md">How to work with stored procedures and not die trying</a>?</li>
<li><a href="https://dba.stackexchange.com/a/33544">You can use a DDL trigger to keep all revisions in a table in a separate database (and of course back up that database frequently).</a> - <a href="http://www.mssqltips.com/sqlservertip/2085/sql-server-ddl-triggers-to-track-all-database-changes/">SQL Server DDL Triggers to Track All Database Changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="features-id-like-in-postgresql"><a href="https://gilslotd.com/blog/features_id_postgresql">Features I'd like in PostgreSQL</a><a aria-hidden="true" class="anchor-heading icon-link" href="#features-id-like-in-postgresql"></a></h3>
<ul>
<li>–i-am-a-dummy mode</li>
<li>Unit test mode (random result sorting)</li>
<li>Query progress in psql</li>
<li>Pandas-like join validation</li>
<li>JIT support for CREATE INDEX</li>
<li>Reduce the memory usage of prepared queries</li>
</ul>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/notes/gyry0ci0rohsl5gvjpsvws1">DB tools</a></li>
<li><a href="/notes/pytn4f8md64usu5rf6luoce">Efficient Pagination Using Deferred Joins</a></li>
<li><a href="/notes/mtpui4ue21ot6ggoxp75l6s">MySQL EXPLAIN ANALYZE</a></li>
<li><a href="/notes/droc7w967f365b24yxuvm1y">SQLite</a></li>
<li><a href="/notes/gospyun0oi7prijb9ompk6j">SQLite the only database you will ever need in most cases</a></li>
<li><a href="/notes/3ygr2ph38je7kt5jgvci8mi">Temporary tables in SQLite</a></li>
<li><a href="/notes/4yc7ze5ur5zu4cr1nardho0">Things You Should Know About Databases</a></li>
<li><a href="/notes/4422qtgalzn3o8syba1riv8">We switched to cursor-based pagination</a></li>
<li><a href="/notes/xyg5ao6vugkef44ahxssq60">postgres</a></li>
<li><a href="/notes/l45rax1y4cho17nr0ga9a5g">prisma-migration</a></li>
</ol>