<h1 id="using-has-as-a-css-parent-selector-and-much-more">Using :has() as a CSS Parent Selector and much more<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-as-a-css-parent-selector-and-much-more"></a></h1>
<blockquote>
<p><a href="https://webkit.org/blog/13096/css-has-pseudo-class/">https://webkit.org/blog/13096/css-has-pseudo-class/</a></p>
</blockquote>
<p>Over the last <a href="https://lists.w3.org/Archives/Public/www-style/2002May/0037.html">twenty years</a>, the CSS Working Group discussed the possibility many, many times. The need was clear and well understood. Defining syntax was a doable task. But figuring out how a browser engine could handle potentially very complex circular patterns, and get through the calculations fast enough seemed impossible. Early versions of a parent selector were drafted for CSS3, only to be deferred. Finally, the <code>:has()</code> pseudo-class was officially defined in <a href="https://www.w3.org/TR/selectors-4/#relational">CSS Selectors level 4</a>. But having a web standard alone didn’t make <code>:has()</code> a reality. We still needed a browser team to figure out the very real performance challenge. In the meantime, computers continued to get more powerful and faster year after year.</p>
<p>In 2021, <a href="https://www.igalia.com/">Igalia</a> started advocating for <code>:has()</code> among browser engineering teams, <a href="https://bkardell.com/blog/canihas.html">prototyping</a> their ideas and <a href="https://github.com/Igalia/explainers/tree/main/css/has">documenting</a> their findings regarding performance. The renewed attention on <code>:has()</code> caught the attention of engineers who work on WebKit at Apple. We started implementing the pseudo-class, thinking through possibilities for the needed performance enhancements to make this work. We debated whether to start with a faster version with a very limited and narrow scope of what it could do, and then try to remove those limits if possible… or to start with something that had no limits, and only apply restrictions as required. We went for it, and implemented the more powerful version. We developed a number of novel <code>:has</code>-specific caching and filtering optimizations, and leveraged the existing advanced optimization strategies of our CSS engine. And our approach worked, proving that after a two decade wait, it is finally possible to implement such a selector with <a href="https://twitter.com/anttikoivisto/status/1473251189181591554">fantastic performance</a>, even in the presence of large DOM trees and large numbers of <code>:has()</code> selectors.</p>
<h2 id="the-basics-of-how-to-use-has-as-a-parent-selector">The basics of how to use :has() as a parent selector<a aria-hidden="true" class="anchor-heading icon-link" href="#the-basics-of-how-to-use-has-as-a-parent-selector"></a></h2>
<pre class="language-css"><code class="language-css"><span class="token selector">figure<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">252</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token unit">px</span> solid <span class="token color">white</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">rem</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And I use a Selector Feature Query to hide a reminder about browser support whenever the current browser supports <code>:has()</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token selector-function-argument selector"><span class="token pseudo-class">:has</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span></span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">small</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>@supports selector()</code> at-rule is itself <a href="https://caniuse.com/mdn-css_at-rules_supports_selector">very well supported</a>. It can be incredibly useful anytime you want to use a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Conditional_Rules/Using_Feature_Queries">feature query</a> to test for browser support of a particular selector.</p>
<p>And finally, in this first demo, I also write a complex selector using the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not"><code>:not() pseudo-class</code></a>. I want to apply <code>display: flex</code> to the figure — but only if an image is the sole content. Flexbox makes the image stretch to fill all available space.</p>
<p>I use a selector to target any <code>figure</code> that does <em>not</em> have any element that is <em>not</em> an image. If the <code>figure</code> has a <code>figcaption</code>, <code>pre</code>, <code>p</code>, or an <code>h1</code> — or any element at all besides <code>img</code> — then the selector doesn’t apply.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">figure<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:not</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>:has()</code> is a powerful thing.</p>
<h2 id="using-has-with-the-child-combinator">Using :has() with the child combinator<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-with-the-child-combinator"></a></h2>
<p>First, a quick review of the difference between the <a href="https://www.w3.org/TR/selectors-4/#descendant-combinators">descendant combinator</a> and the <a href="https://www.w3.org/TR/selectors-4/#child-combinators">child combinator</a> (<code>></code>).</p>
<pre class="language-css"><code class="language-css"><span class="token selector">a<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-css"><code class="language-css"><span class="token selector">a<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">></span> img<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The first selects any <code>a</code> element with an <code>img</code> inside — any place in the HTML structure. While the second selects an element only if the <code>img</code> is a direct child of the <code>a</code>.</p>
<h2 id="using-has-with-sibling-combinators">Using :has() with sibling combinators<a aria-hidden="true" class="anchor-heading icon-link" href="#using-has-with-sibling-combinators"></a></h2>
<p>Let’s review the two selectors with sibling relationships. There’s the <a href="https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators">next-sibling combinator</a> (<code>+</code>) and the <a href="https://www.w3.org/TR/selectors-4/#general-sibling-combinators">subsequent-sibling combinator</a> (<code>~</code>).</p>
<p>The next-sibling combinator (<code>+</code>) selects only the paragraphs that come <em>directly</em> after an <code>h2</code> element.</p>
<pre class="language-css"><code class="language-css">h2 <span class="token operator">+</span> p
</code></pre>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span><span class="token punctuation">></span></span>Headline<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Paragraph that is selected by `h2 + p`, because it's directly after `h2`.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</code></pre>
<p>The subsequent-sibling combinator (<code>~</code>) selects all paragraphs that come after an <code>h2</code> element. They must be siblings, but there can be any number of other HTML elements in between.</p>
<pre class="language-css"><code class="language-css">h2 ~ p
</code></pre>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span><span class="token punctuation">></span></span>Headline<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span>Something else<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Paragraph that is selected by `h2 ~ p`.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is also selected.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</code></pre>
<p>Note that both <code>h2 + p</code> and <code>h2 ~ p</code> select the paragraph elements, and not the <code>h2</code> headlines. Like other selectors (think of <code>a img</code>), it’s the last element listed that is targeted by the selector. But what if we want to target the <code>h2</code>? We can use sibling combinators with <code>:has().</code></p>
<p>How often have you wanted to adjust the margins on a headline based on the element following it? Now it’s easy. This code allows us to select any <code>h2</code> with a <code>p</code> immediately after it.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h2<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> p<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Amazing.</p>
<p>What if we want to do this for all six headline elements, without writing out six copies of the selector. We can use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is"><code>:is</code></a> to simplify our code.</p>
<pre class="language-css"><code class="language-css"><span class="token selector"><span class="token pseudo-class">:is</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">)</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> p<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Or what if we want to write this code for more elements than just paragrapahs? Let’s eliminate the bottom margin of all headlines whenever they are followed by paragraphs, captions, code examples and lists.</p>
<pre class="language-css"><code class="language-css"><span class="token selector"><span class="token pseudo-class">:is</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">)</span><span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token combinator">+</span> <span class="token pseudo-class">:is</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> figcaption<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> dl<span class="token punctuation">,</span> ul<span class="token punctuation">,</span> ol<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Combining <code>:has()</code> with <a href="https://www.w3.org/TR/selectors-4/#descendant-combinators">descendant combinators</a>, <a href="https://www.w3.org/TR/selectors-4/#child-combinators">child combinators</a> (<code>></code>), <a href="https://www.w3.org/TR/selectors-4/#adjacent-sibling-combinators">next-sibling combinators</a> (<code>+</code>), and <a href="https://www.w3.org/TR/selectors-4/#general-sibling-combinators">subsequent-sibling combinators</a> (<code>~</code>) opens up a world of possibilities. But oh, this is <em>still</em> just the beginning.</p>
<h2 id="styling-form-states-without-js">Styling form states without JS<a aria-hidden="true" class="anchor-heading icon-link" href="#styling-form-states-without-js"></a></h2>
<p>There are a lot of fantastic <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes">pseudo-classes</a> that can be used inside has:(). In fact, it revolutionizes what pseudo-classes can do. Previously, pseudo-classes were only used for styling an element based on a special state — or styling one of its children. Now, pseudo-classes can be used to capture state, without JavaScript, and style anything in the DOM based on that state.</p>
<p>Form input fields provide a powerful way to capture such a state. Form-specific pseudo-classes include <code>:autofill</code>, <code>:enabled</code>, <code>:disabled</code>, <code>:read-only</code>, <code>:read-write</code>, <code>:placeholder-shown</code>, <code>:default</code>, <code>:checked</code>, <code>:indeterminate</code>, <code>:valid</code>, <code>:invalid</code>, <code>:in-range</code>, <code>:out-of-range</code>, <code>:required</code> and <code>:optional</code>.</p>
<p>Let’s solve one of the use cases I described in the introduction — the long-standing need to style a form label based on the state of the input field. Let’s start with a basic form.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>form</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Name<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>site<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Website<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>site<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>form</span><span class="token punctuation">></span></span>
</code></pre>
<p>I’d like to apply a background to the whole form whenever one of the fields is in focus.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color">antiquewhite</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now I could have used <code>form:focus-within</code> instead, but it would behave like <code>form:has(:focus)</code>. The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus"><code>:focus</code></a> pseudo-class always applies CSS whenever a field is in focus. The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible"><code>:focus-visible</code></a> pseudo-class provides a reliable way to style a focus indicator only when the browser would draw one natively, using the same <a href="https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/">complex heuristics the browser uses</a> to determine whether or not to apply a focus-ring.</p>
<p>Now, let’s imagine I want to style the other fields, the ones <em>not</em> in focus — changing their label text color and the input border color. Before <code>:has()</code>, this required JavaScript. Now we can use this CSS.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span> div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span><span class="token punctuation">)</span> label</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">peru</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">form<span class="token pseudo-class">:has</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span> div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:not</span><span class="token punctuation">(</span><span class="token pseudo-class">:focus-visible</span><span class="token punctuation">)</span><span class="token punctuation">)</span> input</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">peru</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>What does that selector say? If one of the controls inside this form has focus, and the input element for this particular form control does not have focus, then change the color of this label’s text to <code>peru</code>. And change the border of the input field to be <code>2px solid peru</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">input<span class="token pseudo-class">:invalid</span></span> <span class="token punctuation">{</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token unit">px</span> solid <span class="token color">red</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now with <code>:has()</code>, we can turn the label text red as well:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">div<span class="token pseudo-class">:has</span><span class="token punctuation">(</span>input<span class="token pseudo-class">:invalid</span><span class="token punctuation">)</span> label</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You can see the result by typing something in the website or email field that’s not a fully-formed URL or email address. Both are invalid, and so both will trigger a red border and red label, with an “X”.</p>
<h2 id="and-more">And more<a aria-hidden="true" class="anchor-heading icon-link" href="#and-more"></a></h2>
<p>Looking through other <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes">pseudo-classes</a>, there are so many that can be combined with <code>:has()</code>. Imagine the possibilities with <code>:nth-child</code>, <code>:nth-last-child</code>, <code>:first-child</code>, <code>:last-child</code>, <code>:only-child</code>, <code>:nth-of-type</code>, <code>:nth-last-of-type</code>, <code>:first-of-type</code>, <code>:last-of-type</code>, <code>:only-of-type</code>. The brand new <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:modal"><code>:modal</code></a> pseudo-class is triggered when a <code>dialog</code> is in the open state. With <code>:has(:modal)</code> you can style anything in the DOM based on whether the <code>dialog</code> is open or closed.</p>
<p>However, not every pseudo-class is currently supported inside <code>:has()</code> in every browser, so do try out your code in multiple browsers. Currently the dynamic media pseudo-classes don’t work — like <code>:playing</code>, <code>:paused</code>, <code>:muted</code>, etc. They very well may work in the future, so if you are reading this in the future, test them out! Also, form invalidation support is currently missing in certain specific situations, so dynamic state changes to those pseudo-classes may not update with <code>:has()</code>.</p>
<p>Safari 16 will add support for <code>:has(:target)</code> opening up interesting possibilities for writing code that looks at the current URL for a fragment that matches the ID of a specific element. For example, if a user clicks on a table of contents at the top of a document, and jumps down to the section of the page matching that link, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:target"><code>:target</code></a> provides a way to style that content uniquely, based on the fact the user clicked the link to get there. And <code>:has()</code> opens up what such styling can do.</p>
<p>Something to note — the CSS Working Group <a href="https://github.com/w3c/csswg-drafts/issues/7463">resolved</a> to disallow all existing pseudo-elements inside of <code>:has()</code>. For example, <code>article:has(p::first-line)</code> and <code>ol:has(li::marker)</code> won’t work. Same with <code>::before</code> and <code>::after.</code></p>